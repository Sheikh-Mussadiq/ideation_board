function AD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ev(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function DD(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var BE={exports:{}},tp={},VE={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hu=Symbol.for("react.element"),RD=Symbol.for("react.portal"),_D=Symbol.for("react.fragment"),ID=Symbol.for("react.strict_mode"),LD=Symbol.for("react.profiler"),$D=Symbol.for("react.provider"),FD=Symbol.for("react.context"),BD=Symbol.for("react.forward_ref"),VD=Symbol.for("react.suspense"),zD=Symbol.for("react.memo"),UD=Symbol.for("react.lazy"),k1=Symbol.iterator;function HD(t){return t===null||typeof t!="object"?null:(t=k1&&t[k1]||t["@@iterator"],typeof t=="function"?t:null)}var zE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},UE=Object.assign,HE={};function Wa(t,e,n){this.props=t,this.context=e,this.refs=HE,this.updater=n||zE}Wa.prototype.isReactComponent={};Wa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function WE(){}WE.prototype=Wa.prototype;function Tv(t,e,n){this.props=t,this.context=e,this.refs=HE,this.updater=n||zE}var Nv=Tv.prototype=new WE;Nv.constructor=Tv;UE(Nv,Wa.prototype);Nv.isPureReactComponent=!0;var S1=Array.isArray,KE=Object.prototype.hasOwnProperty,Mv={current:null},GE={key:!0,ref:!0,__self:!0,__source:!0};function qE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)KE.call(e,r)&&!GE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:hu,type:t,key:s,ref:o,props:i,_owner:Mv.current}}function WD(t,e){return{$$typeof:hu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pv(t){return typeof t=="object"&&t!==null&&t.$$typeof===hu}function KD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var C1=/\/+/g;function wm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?KD(""+t.key):e.toString(36)}function Ld(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case hu:case RD:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+wm(o,0):r,S1(i)?(n="",t!=null&&(n=t.replace(C1,"$&/")+"/"),Ld(i,e,n,"",function(c){return c})):i!=null&&(Pv(i)&&(i=WD(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(C1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",S1(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+wm(s,a);o+=Ld(s,e,n,l,i)}else if(l=HD(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+wm(s,a++),o+=Ld(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Wu(t,e,n){if(t==null)return t;var r=[],i=0;return Ld(t,r,"","",function(s){return e.call(n,s,i++)}),r}function GD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nn={current:null},$d={transition:null},qD={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:$d,ReactCurrentOwner:Mv};function JE(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Wu,forEach:function(t,e,n){Wu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wu(t,function(){e++}),e},toArray:function(t){return Wu(t,function(e){return e})||[]},only:function(t){if(!Pv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=Wa;ye.Fragment=_D;ye.Profiler=LD;ye.PureComponent=Tv;ye.StrictMode=ID;ye.Suspense=VD;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qD;ye.act=JE;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=UE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Mv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)KE.call(e,l)&&!GE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:hu,type:t.type,key:i,ref:s,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:FD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$D,_context:t},t.Consumer=t};ye.createElement=qE;ye.createFactory=function(t){var e=qE.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:BD,render:t}};ye.isValidElement=Pv;ye.lazy=function(t){return{$$typeof:UD,_payload:{_status:-1,_result:t},_init:GD}};ye.memo=function(t,e){return{$$typeof:zD,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=$d.transition;$d.transition={};try{t()}finally{$d.transition=e}};ye.unstable_act=JE;ye.useCallback=function(t,e){return nn.current.useCallback(t,e)};ye.useContext=function(t){return nn.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return nn.current.useDeferredValue(t)};ye.useEffect=function(t,e){return nn.current.useEffect(t,e)};ye.useId=function(){return nn.current.useId()};ye.useImperativeHandle=function(t,e,n){return nn.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return nn.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return nn.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return nn.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return nn.current.useReducer(t,e,n)};ye.useRef=function(t){return nn.current.useRef(t)};ye.useState=function(t){return nn.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return nn.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return nn.current.useTransition()};ye.version="18.3.1";VE.exports=ye;var g=VE.exports;const D=Ev(g),df=AD({__proto__:null,default:D},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JD=g,YD=Symbol.for("react.element"),XD=Symbol.for("react.fragment"),QD=Object.prototype.hasOwnProperty,ZD=JD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eR={key:!0,ref:!0,__self:!0,__source:!0};function YE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)QD.call(e,r)&&!eR.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:YD,type:t,key:s,ref:o,props:i,_owner:ZD.current}}tp.Fragment=XD;tp.jsx=YE;tp.jsxs=YE;BE.exports=tp;var p=BE.exports,XE={exports:{}},Mn={},QE={exports:{}},ZE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,j){var F=O.length;O.push(j);e:for(;0<F;){var H=F-1>>>1,Z=O[H];if(0<i(Z,j))O[H]=j,O[F]=Z,F=H;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var j=O[0],F=O.pop();if(F!==j){O[0]=F;e:for(var H=0,Z=O.length,z=Z>>>1;H<z;){var se=2*(H+1)-1,we=O[se],Se=se+1,Ne=O[Se];if(0>i(we,F))Se<Z&&0>i(Ne,we)?(O[H]=Ne,O[Se]=F,H=Se):(O[H]=we,O[se]=F,H=se);else if(Se<Z&&0>i(Ne,F))O[H]=Ne,O[Se]=F,H=Se;else break e}}return j}function i(O,j){var F=O.sortIndex-j.sortIndex;return F!==0?F:O.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,m=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var j=n(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=O)r(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function k(O){if(y=!1,b(O),!m)if(n(l)!==null)m=!0,X(S);else{var j=n(c);j!==null&&V(k,j.startTime-O)}}function S(O,j){m=!1,y&&(y=!1,v(T),T=-1),h=!0;var F=f;try{for(b(j),d=n(l);d!==null&&(!(d.expirationTime>j)||O&&!M());){var H=d.callback;if(typeof H=="function"){d.callback=null,f=d.priorityLevel;var Z=H(d.expirationTime<=j);j=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&r(l),b(j)}else r(l);d=n(l)}if(d!==null)var z=!0;else{var se=n(c);se!==null&&V(k,se.startTime-j),z=!1}return z}finally{d=null,f=F,h=!1}}var C=!1,E=null,T=-1,P=5,N=-1;function M(){return!(t.unstable_now()-N<P)}function A(){if(E!==null){var O=t.unstable_now();N=O;var j=!0;try{j=E(!0,O)}finally{j?B():(C=!1,E=null)}}else C=!1}var B;if(typeof w=="function")B=function(){w(A)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,R=Y.port2;Y.port1.onmessage=A,B=function(){R.postMessage(null)}}else B=function(){x(A,0)};function X(O){E=O,C||(C=!0,B())}function V(O,j){T=x(function(){O(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,X(S))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var F=f;f=j;try{return O()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,j){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var F=f;f=O;try{return j()}finally{f=F}},t.unstable_scheduleCallback=function(O,j,F){var H=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?H+F:H):F=H,O){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=F+Z,O={id:u++,callback:j,priorityLevel:O,startTime:F,expirationTime:Z,sortIndex:-1},F>H?(O.sortIndex=F,e(c,O),n(l)===null&&O===n(c)&&(y?(v(T),T=-1):y=!0,V(k,F-H))):(O.sortIndex=Z,e(l,O),m||h||(m=!0,X(S))),O},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(O){var j=f;return function(){var F=f;f=j;try{return O.apply(this,arguments)}finally{f=F}}}})(ZE);QE.exports=ZE;var tR=QE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nR=g,Nn=tR;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eT=new Set,Cc={};function yo(t,e){xa(t,e),xa(t+"Capture",e)}function xa(t,e){for(Cc[t]=e,t=0;t<e.length;t++)eT.add(e[t])}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ly=Object.prototype.hasOwnProperty,rR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E1={},T1={};function iR(t){return ly.call(T1,t)?!0:ly.call(E1,t)?!1:rR.test(t)?T1[t]=!0:(E1[t]=!0,!1)}function sR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oR(t,e,n,r){if(e===null||typeof e>"u"||sR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ov=/[\-:]([a-z])/g;function jv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ov,jv);Ot[e]=new rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ov,jv);Ot[e]=new rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ov,jv);Ot[e]=new rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new rn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Av(t,e,n,r){var i=Ot.hasOwnProperty(e)?Ot[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oR(e,n,i,r)&&(n=null),r||i===null?iR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ci=nR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ku=Symbol.for("react.element"),Bo=Symbol.for("react.portal"),Vo=Symbol.for("react.fragment"),Dv=Symbol.for("react.strict_mode"),cy=Symbol.for("react.profiler"),tT=Symbol.for("react.provider"),nT=Symbol.for("react.context"),Rv=Symbol.for("react.forward_ref"),uy=Symbol.for("react.suspense"),dy=Symbol.for("react.suspense_list"),_v=Symbol.for("react.memo"),Ci=Symbol.for("react.lazy"),rT=Symbol.for("react.offscreen"),N1=Symbol.iterator;function gl(t){return t===null||typeof t!="object"?null:(t=N1&&t[N1]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,bm;function Dl(t){if(bm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bm=e&&e[1]||""}return`
`+bm+t}var km=!1;function Sm(t,e){if(!t||km)return"";km=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{km=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Dl(t):""}function aR(t){switch(t.tag){case 5:return Dl(t.type);case 16:return Dl("Lazy");case 13:return Dl("Suspense");case 19:return Dl("SuspenseList");case 0:case 2:case 15:return t=Sm(t.type,!1),t;case 11:return t=Sm(t.type.render,!1),t;case 1:return t=Sm(t.type,!0),t;default:return""}}function fy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vo:return"Fragment";case Bo:return"Portal";case cy:return"Profiler";case Dv:return"StrictMode";case uy:return"Suspense";case dy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nT:return(t.displayName||"Context")+".Consumer";case tT:return(t._context.displayName||"Context")+".Provider";case Rv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _v:return e=t.displayName||null,e!==null?e:fy(t.type)||"Memo";case Ci:e=t._payload,t=t._init;try{return fy(t(e))}catch{}}return null}function lR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fy(e);case 8:return e===Dv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function as(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cR(t){var e=iT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gu(t){t._valueTracker||(t._valueTracker=cR(t))}function sT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=iT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ff(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hy(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function M1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=as(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function oT(t,e){e=e.checked,e!=null&&Av(t,"checked",e,!1)}function py(t,e){oT(t,e);var n=as(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?my(t,e.type,n):e.hasOwnProperty("defaultValue")&&my(t,e.type,as(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function P1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function my(t,e,n){(e!=="number"||ff(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Rl=Array.isArray;function sa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+as(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function gy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function O1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Rl(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:as(n)}}function aT(t,e){var n=as(e.value),r=as(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function j1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qu,cT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qu=qu||document.createElement("div"),qu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ec(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Kl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uR=["Webkit","ms","Moz","O"];Object.keys(Kl).forEach(function(t){uR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Kl[e]=Kl[t]})});function uT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Kl.hasOwnProperty(t)&&Kl[t]?(""+e).trim():e+"px"}function dT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=uT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var dR=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vy(t,e){if(e){if(dR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function xy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wy=null;function Iv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var by=null,oa=null,aa=null;function A1(t){if(t=gu(t)){if(typeof by!="function")throw Error($(280));var e=t.stateNode;e&&(e=op(e),by(t.stateNode,t.type,e))}}function fT(t){oa?aa?aa.push(t):aa=[t]:oa=t}function hT(){if(oa){var t=oa,e=aa;if(aa=oa=null,A1(t),e)for(t=0;t<e.length;t++)A1(e[t])}}function pT(t,e){return t(e)}function mT(){}var Cm=!1;function gT(t,e,n){if(Cm)return t(e,n);Cm=!0;try{return pT(t,e,n)}finally{Cm=!1,(oa!==null||aa!==null)&&(mT(),hT())}}function Tc(t,e){var n=t.stateNode;if(n===null)return null;var r=op(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ky=!1;if(ri)try{var yl={};Object.defineProperty(yl,"passive",{get:function(){ky=!0}}),window.addEventListener("test",yl,yl),window.removeEventListener("test",yl,yl)}catch{ky=!1}function fR(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Gl=!1,hf=null,pf=!1,Sy=null,hR={onError:function(t){Gl=!0,hf=t}};function pR(t,e,n,r,i,s,o,a,l){Gl=!1,hf=null,fR.apply(hR,arguments)}function mR(t,e,n,r,i,s,o,a,l){if(pR.apply(this,arguments),Gl){if(Gl){var c=hf;Gl=!1,hf=null}else throw Error($(198));pf||(pf=!0,Sy=c)}}function vo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function yT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function D1(t){if(vo(t)!==t)throw Error($(188))}function gR(t){var e=t.alternate;if(!e){if(e=vo(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return D1(i),t;if(s===r)return D1(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function vT(t){return t=gR(t),t!==null?xT(t):null}function xT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xT(t);if(e!==null)return e;t=t.sibling}return null}var wT=Nn.unstable_scheduleCallback,R1=Nn.unstable_cancelCallback,yR=Nn.unstable_shouldYield,vR=Nn.unstable_requestPaint,Qe=Nn.unstable_now,xR=Nn.unstable_getCurrentPriorityLevel,Lv=Nn.unstable_ImmediatePriority,bT=Nn.unstable_UserBlockingPriority,mf=Nn.unstable_NormalPriority,wR=Nn.unstable_LowPriority,kT=Nn.unstable_IdlePriority,np=null,Mr=null;function bR(t){if(Mr&&typeof Mr.onCommitFiberRoot=="function")try{Mr.onCommitFiberRoot(np,t,void 0,(t.current.flags&128)===128)}catch{}}var lr=Math.clz32?Math.clz32:CR,kR=Math.log,SR=Math.LN2;function CR(t){return t>>>=0,t===0?32:31-(kR(t)/SR|0)|0}var Ju=64,Yu=4194304;function _l(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=_l(a):(s&=o,s!==0&&(r=_l(s)))}else o=n&~i,o!==0?r=_l(o):s!==0&&(r=_l(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-lr(e),i=1<<n,r|=t[n],e&=~i;return r}function ER(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-lr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=ER(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Cy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ST(){var t=Ju;return Ju<<=1,!(Ju&4194240)&&(Ju=64),t}function Em(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-lr(e),t[e]=n}function NR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-lr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function $v(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-lr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Te=0;function CT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ET,Fv,TT,NT,MT,Ey=!1,Xu=[],Ki=null,Gi=null,qi=null,Nc=new Map,Mc=new Map,Ai=[],MR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _1(t,e){switch(t){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Gi=null;break;case"mouseover":case"mouseout":qi=null;break;case"pointerover":case"pointerout":Nc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mc.delete(e.pointerId)}}function vl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=gu(e),e!==null&&Fv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function PR(t,e,n,r,i){switch(e){case"focusin":return Ki=vl(Ki,t,e,n,r,i),!0;case"dragenter":return Gi=vl(Gi,t,e,n,r,i),!0;case"mouseover":return qi=vl(qi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Nc.set(s,vl(Nc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Mc.set(s,vl(Mc.get(s)||null,t,e,n,r,i)),!0}return!1}function PT(t){var e=Ls(t.target);if(e!==null){var n=vo(e);if(n!==null){if(e=n.tag,e===13){if(e=yT(n),e!==null){t.blockedOn=e,MT(t.priority,function(){TT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ty(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wy=r,n.target.dispatchEvent(r),wy=null}else return e=gu(n),e!==null&&Fv(e),t.blockedOn=n,!1;e.shift()}return!0}function I1(t,e,n){Fd(t)&&n.delete(e)}function OR(){Ey=!1,Ki!==null&&Fd(Ki)&&(Ki=null),Gi!==null&&Fd(Gi)&&(Gi=null),qi!==null&&Fd(qi)&&(qi=null),Nc.forEach(I1),Mc.forEach(I1)}function xl(t,e){t.blockedOn===e&&(t.blockedOn=null,Ey||(Ey=!0,Nn.unstable_scheduleCallback(Nn.unstable_NormalPriority,OR)))}function Pc(t){function e(i){return xl(i,t)}if(0<Xu.length){xl(Xu[0],t);for(var n=1;n<Xu.length;n++){var r=Xu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ki!==null&&xl(Ki,t),Gi!==null&&xl(Gi,t),qi!==null&&xl(qi,t),Nc.forEach(e),Mc.forEach(e),n=0;n<Ai.length;n++)r=Ai[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ai.length&&(n=Ai[0],n.blockedOn===null);)PT(n),n.blockedOn===null&&Ai.shift()}var la=ci.ReactCurrentBatchConfig,yf=!0;function jR(t,e,n,r){var i=Te,s=la.transition;la.transition=null;try{Te=1,Bv(t,e,n,r)}finally{Te=i,la.transition=s}}function AR(t,e,n,r){var i=Te,s=la.transition;la.transition=null;try{Te=4,Bv(t,e,n,r)}finally{Te=i,la.transition=s}}function Bv(t,e,n,r){if(yf){var i=Ty(t,e,n,r);if(i===null)_m(t,e,r,vf,n),_1(t,r);else if(PR(i,t,e,n,r))r.stopPropagation();else if(_1(t,r),e&4&&-1<MR.indexOf(t)){for(;i!==null;){var s=gu(i);if(s!==null&&ET(s),s=Ty(t,e,n,r),s===null&&_m(t,e,r,vf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else _m(t,e,r,null,n)}}var vf=null;function Ty(t,e,n,r){if(vf=null,t=Iv(r),t=Ls(t),t!==null)if(e=vo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=yT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vf=t,null}function OT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xR()){case Lv:return 1;case bT:return 4;case mf:case wR:return 16;case kT:return 536870912;default:return 16}default:return 16}}var Fi=null,Vv=null,Bd=null;function jT(){if(Bd)return Bd;var t,e=Vv,n=e.length,r,i="value"in Fi?Fi.value:Fi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Bd=i.slice(t,1<r?1-r:void 0)}function Vd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qu(){return!0}function L1(){return!1}function Pn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qu:L1,this.isPropagationStopped=L1,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qu)},persist:function(){},isPersistent:Qu}),e}var Ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zv=Pn(Ka),mu=ze({},Ka,{view:0,detail:0}),DR=Pn(mu),Tm,Nm,wl,rp=ze({},mu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wl&&(wl&&t.type==="mousemove"?(Tm=t.screenX-wl.screenX,Nm=t.screenY-wl.screenY):Nm=Tm=0,wl=t),Tm)},movementY:function(t){return"movementY"in t?t.movementY:Nm}}),$1=Pn(rp),RR=ze({},rp,{dataTransfer:0}),_R=Pn(RR),IR=ze({},mu,{relatedTarget:0}),Mm=Pn(IR),LR=ze({},Ka,{animationName:0,elapsedTime:0,pseudoElement:0}),$R=Pn(LR),FR=ze({},Ka,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BR=Pn(FR),VR=ze({},Ka,{data:0}),F1=Pn(VR),zR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HR[t])?!!e[t]:!1}function Uv(){return WR}var KR=ze({},mu,{key:function(t){if(t.key){var e=zR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uv,charCode:function(t){return t.type==="keypress"?Vd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GR=Pn(KR),qR=ze({},rp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B1=Pn(qR),JR=ze({},mu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uv}),YR=Pn(JR),XR=ze({},Ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),QR=Pn(XR),ZR=ze({},rp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),e_=Pn(ZR),t_=[9,13,27,32],Hv=ri&&"CompositionEvent"in window,ql=null;ri&&"documentMode"in document&&(ql=document.documentMode);var n_=ri&&"TextEvent"in window&&!ql,AT=ri&&(!Hv||ql&&8<ql&&11>=ql),V1=" ",z1=!1;function DT(t,e){switch(t){case"keyup":return t_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zo=!1;function r_(t,e){switch(t){case"compositionend":return RT(e);case"keypress":return e.which!==32?null:(z1=!0,V1);case"textInput":return t=e.data,t===V1&&z1?null:t;default:return null}}function i_(t,e){if(zo)return t==="compositionend"||!Hv&&DT(t,e)?(t=jT(),Bd=Vv=Fi=null,zo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return AT&&e.locale!=="ko"?null:e.data;default:return null}}var s_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!s_[t.type]:e==="textarea"}function _T(t,e,n,r){fT(r),e=xf(e,"onChange"),0<e.length&&(n=new zv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jl=null,Oc=null;function o_(t){KT(t,0)}function ip(t){var e=Wo(t);if(sT(e))return t}function a_(t,e){if(t==="change")return e}var IT=!1;if(ri){var Pm;if(ri){var Om="oninput"in document;if(!Om){var H1=document.createElement("div");H1.setAttribute("oninput","return;"),Om=typeof H1.oninput=="function"}Pm=Om}else Pm=!1;IT=Pm&&(!document.documentMode||9<document.documentMode)}function W1(){Jl&&(Jl.detachEvent("onpropertychange",LT),Oc=Jl=null)}function LT(t){if(t.propertyName==="value"&&ip(Oc)){var e=[];_T(e,Oc,t,Iv(t)),gT(o_,e)}}function l_(t,e,n){t==="focusin"?(W1(),Jl=e,Oc=n,Jl.attachEvent("onpropertychange",LT)):t==="focusout"&&W1()}function c_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ip(Oc)}function u_(t,e){if(t==="click")return ip(e)}function d_(t,e){if(t==="input"||t==="change")return ip(e)}function f_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ur=typeof Object.is=="function"?Object.is:f_;function jc(t,e){if(ur(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ly.call(e,i)||!ur(t[i],e[i]))return!1}return!0}function K1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function G1(t,e){var n=K1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=K1(n)}}function $T(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$T(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function FT(){for(var t=window,e=ff();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ff(t.document)}return e}function Wv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function h_(t){var e=FT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$T(n.ownerDocument.documentElement,n)){if(r!==null&&Wv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=G1(n,s);var o=G1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var p_=ri&&"documentMode"in document&&11>=document.documentMode,Uo=null,Ny=null,Yl=null,My=!1;function q1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;My||Uo==null||Uo!==ff(r)||(r=Uo,"selectionStart"in r&&Wv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yl&&jc(Yl,r)||(Yl=r,r=xf(Ny,"onSelect"),0<r.length&&(e=new zv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Uo)))}function Zu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ho={animationend:Zu("Animation","AnimationEnd"),animationiteration:Zu("Animation","AnimationIteration"),animationstart:Zu("Animation","AnimationStart"),transitionend:Zu("Transition","TransitionEnd")},jm={},BT={};ri&&(BT=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function sp(t){if(jm[t])return jm[t];if(!Ho[t])return t;var e=Ho[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BT)return jm[t]=e[n];return t}var VT=sp("animationend"),zT=sp("animationiteration"),UT=sp("animationstart"),HT=sp("transitionend"),WT=new Map,J1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ms(t,e){WT.set(t,e),yo(e,[t])}for(var Am=0;Am<J1.length;Am++){var Dm=J1[Am],m_=Dm.toLowerCase(),g_=Dm[0].toUpperCase()+Dm.slice(1);ms(m_,"on"+g_)}ms(VT,"onAnimationEnd");ms(zT,"onAnimationIteration");ms(UT,"onAnimationStart");ms("dblclick","onDoubleClick");ms("focusin","onFocus");ms("focusout","onBlur");ms(HT,"onTransitionEnd");xa("onMouseEnter",["mouseout","mouseover"]);xa("onMouseLeave",["mouseout","mouseover"]);xa("onPointerEnter",["pointerout","pointerover"]);xa("onPointerLeave",["pointerout","pointerover"]);yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Il));function Y1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,mR(r,e,void 0,t),t.currentTarget=null}function KT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Y1(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Y1(i,a,c),s=l}}}if(pf)throw t=Sy,pf=!1,Sy=null,t}function De(t,e){var n=e[Dy];n===void 0&&(n=e[Dy]=new Set);var r=t+"__bubble";n.has(r)||(GT(e,t,2,!1),n.add(r))}function Rm(t,e,n){var r=0;e&&(r|=4),GT(n,t,r,e)}var ed="_reactListening"+Math.random().toString(36).slice(2);function Ac(t){if(!t[ed]){t[ed]=!0,eT.forEach(function(n){n!=="selectionchange"&&(y_.has(n)||Rm(n,!1,t),Rm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ed]||(e[ed]=!0,Rm("selectionchange",!1,e))}}function GT(t,e,n,r){switch(OT(e)){case 1:var i=jR;break;case 4:i=AR;break;default:i=Bv}n=i.bind(null,e,n,t),i=void 0,!ky||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function _m(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ls(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}gT(function(){var c=s,u=Iv(n),d=[];e:{var f=WT.get(t);if(f!==void 0){var h=zv,m=t;switch(t){case"keypress":if(Vd(n)===0)break e;case"keydown":case"keyup":h=GR;break;case"focusin":m="focus",h=Mm;break;case"focusout":m="blur",h=Mm;break;case"beforeblur":case"afterblur":h=Mm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=_R;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=YR;break;case VT:case zT:case UT:h=$R;break;case HT:h=QR;break;case"scroll":h=DR;break;case"wheel":h=e_;break;case"copy":case"cut":case"paste":h=BR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=B1}var y=(e&4)!==0,x=!y&&t==="scroll",v=y?f!==null?f+"Capture":null:f;y=[];for(var w=c,b;w!==null;){b=w;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,v!==null&&(k=Tc(w,v),k!=null&&y.push(Dc(w,k,b)))),x)break;w=w.return}0<y.length&&(f=new h(f,m,null,n,u),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==wy&&(m=n.relatedTarget||n.fromElement)&&(Ls(m)||m[ii]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?Ls(m):null,m!==null&&(x=vo(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=c),h!==m)){if(y=$1,k="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=B1,k="onPointerLeave",v="onPointerEnter",w="pointer"),x=h==null?f:Wo(h),b=m==null?f:Wo(m),f=new y(k,w+"leave",h,n,u),f.target=x,f.relatedTarget=b,k=null,Ls(u)===c&&(y=new y(v,w+"enter",m,n,u),y.target=b,y.relatedTarget=x,k=y),x=k,h&&m)t:{for(y=h,v=m,w=0,b=y;b;b=Po(b))w++;for(b=0,k=v;k;k=Po(k))b++;for(;0<w-b;)y=Po(y),w--;for(;0<b-w;)v=Po(v),b--;for(;w--;){if(y===v||v!==null&&y===v.alternate)break t;y=Po(y),v=Po(v)}y=null}else y=null;h!==null&&X1(d,f,h,y,!1),m!==null&&x!==null&&X1(d,x,m,y,!0)}}e:{if(f=c?Wo(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var S=a_;else if(U1(f))if(IT)S=d_;else{S=c_;var C=l_}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=u_);if(S&&(S=S(t,c))){_T(d,S,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&my(f,"number",f.value)}switch(C=c?Wo(c):window,t){case"focusin":(U1(C)||C.contentEditable==="true")&&(Uo=C,Ny=c,Yl=null);break;case"focusout":Yl=Ny=Uo=null;break;case"mousedown":My=!0;break;case"contextmenu":case"mouseup":case"dragend":My=!1,q1(d,n,u);break;case"selectionchange":if(p_)break;case"keydown":case"keyup":q1(d,n,u)}var E;if(Hv)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else zo?DT(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(AT&&n.locale!=="ko"&&(zo||T!=="onCompositionStart"?T==="onCompositionEnd"&&zo&&(E=jT()):(Fi=u,Vv="value"in Fi?Fi.value:Fi.textContent,zo=!0)),C=xf(c,T),0<C.length&&(T=new F1(T,t,null,n,u),d.push({event:T,listeners:C}),E?T.data=E:(E=RT(n),E!==null&&(T.data=E)))),(E=n_?r_(t,n):i_(t,n))&&(c=xf(c,"onBeforeInput"),0<c.length&&(u=new F1("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}KT(d,e)})}function Dc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Tc(t,n),s!=null&&r.unshift(Dc(t,s,i)),s=Tc(t,e),s!=null&&r.push(Dc(t,s,i))),t=t.return}return r}function Po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function X1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Tc(n,s),l!=null&&o.unshift(Dc(n,l,a))):i||(l=Tc(n,s),l!=null&&o.push(Dc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var v_=/\r\n?/g,x_=/\u0000|\uFFFD/g;function Q1(t){return(typeof t=="string"?t:""+t).replace(v_,`
`).replace(x_,"")}function td(t,e,n){if(e=Q1(e),Q1(t)!==e&&n)throw Error($(425))}function wf(){}var Py=null,Oy=null;function jy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ay=typeof setTimeout=="function"?setTimeout:void 0,w_=typeof clearTimeout=="function"?clearTimeout:void 0,Z1=typeof Promise=="function"?Promise:void 0,b_=typeof queueMicrotask=="function"?queueMicrotask:typeof Z1<"u"?function(t){return Z1.resolve(null).then(t).catch(k_)}:Ay;function k_(t){setTimeout(function(){throw t})}function Im(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Pc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pc(e)}function Ji(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function eb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ga=Math.random().toString(36).slice(2),Tr="__reactFiber$"+Ga,Rc="__reactProps$"+Ga,ii="__reactContainer$"+Ga,Dy="__reactEvents$"+Ga,S_="__reactListeners$"+Ga,C_="__reactHandles$"+Ga;function Ls(t){var e=t[Tr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ii]||n[Tr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=eb(t);t!==null;){if(n=t[Tr])return n;t=eb(t)}return e}t=n,n=t.parentNode}return null}function gu(t){return t=t[Tr]||t[ii],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function op(t){return t[Rc]||null}var Ry=[],Ko=-1;function gs(t){return{current:t}}function _e(t){0>Ko||(t.current=Ry[Ko],Ry[Ko]=null,Ko--)}function je(t,e){Ko++,Ry[Ko]=t.current,t.current=e}var ls={},Ut=gs(ls),fn=gs(!1),ro=ls;function wa(t,e){var n=t.type.contextTypes;if(!n)return ls;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function hn(t){return t=t.childContextTypes,t!=null}function bf(){_e(fn),_e(Ut)}function tb(t,e,n){if(Ut.current!==ls)throw Error($(168));je(Ut,e),je(fn,n)}function qT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,lR(t)||"Unknown",i));return ze({},n,r)}function kf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ls,ro=Ut.current,je(Ut,t),je(fn,fn.current),!0}function nb(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=qT(t,e,ro),r.__reactInternalMemoizedMergedChildContext=t,_e(fn),_e(Ut),je(Ut,t)):_e(fn),je(fn,n)}var qr=null,ap=!1,Lm=!1;function JT(t){qr===null?qr=[t]:qr.push(t)}function E_(t){ap=!0,JT(t)}function ys(){if(!Lm&&qr!==null){Lm=!0;var t=0,e=Te;try{var n=qr;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qr=null,ap=!1}catch(i){throw qr!==null&&(qr=qr.slice(t+1)),wT(Lv,ys),i}finally{Te=e,Lm=!1}}return null}var Go=[],qo=0,Sf=null,Cf=0,$n=[],Fn=0,io=null,Jr=1,Yr="";function Ms(t,e){Go[qo++]=Cf,Go[qo++]=Sf,Sf=t,Cf=e}function YT(t,e,n){$n[Fn++]=Jr,$n[Fn++]=Yr,$n[Fn++]=io,io=t;var r=Jr;t=Yr;var i=32-lr(r)-1;r&=~(1<<i),n+=1;var s=32-lr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jr=1<<32-lr(e)+i|n<<i|r,Yr=s+t}else Jr=1<<s|n<<i|r,Yr=t}function Kv(t){t.return!==null&&(Ms(t,1),YT(t,1,0))}function Gv(t){for(;t===Sf;)Sf=Go[--qo],Go[qo]=null,Cf=Go[--qo],Go[qo]=null;for(;t===io;)io=$n[--Fn],$n[Fn]=null,Yr=$n[--Fn],$n[Fn]=null,Jr=$n[--Fn],$n[Fn]=null}var Cn=null,Sn=null,Le=!1,ir=null;function XT(t,e){var n=zn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Cn=t,Sn=Ji(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Cn=t,Sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=io!==null?{id:Jr,overflow:Yr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Cn=t,Sn=null,!0):!1;default:return!1}}function _y(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Iy(t){if(Le){var e=Sn;if(e){var n=e;if(!rb(t,e)){if(_y(t))throw Error($(418));e=Ji(n.nextSibling);var r=Cn;e&&rb(t,e)?XT(r,n):(t.flags=t.flags&-4097|2,Le=!1,Cn=t)}}else{if(_y(t))throw Error($(418));t.flags=t.flags&-4097|2,Le=!1,Cn=t}}}function ib(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Cn=t}function nd(t){if(t!==Cn)return!1;if(!Le)return ib(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jy(t.type,t.memoizedProps)),e&&(e=Sn)){if(_y(t))throw QT(),Error($(418));for(;e;)XT(t,e),e=Ji(e.nextSibling)}if(ib(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Sn=Ji(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Sn=null}}else Sn=Cn?Ji(t.stateNode.nextSibling):null;return!0}function QT(){for(var t=Sn;t;)t=Ji(t.nextSibling)}function ba(){Sn=Cn=null,Le=!1}function qv(t){ir===null?ir=[t]:ir.push(t)}var T_=ci.ReactCurrentBatchConfig;function bl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function rd(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sb(t){var e=t._init;return e(t._payload)}function ZT(t){function e(v,w){if(t){var b=v.deletions;b===null?(v.deletions=[w],v.flags|=16):b.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function i(v,w){return v=Zi(v,w),v.index=0,v.sibling=null,v}function s(v,w,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<w?(v.flags|=2,w):b):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,b,k){return w===null||w.tag!==6?(w=Hm(b,v.mode,k),w.return=v,w):(w=i(w,b),w.return=v,w)}function l(v,w,b,k){var S=b.type;return S===Vo?u(v,w,b.props.children,k,b.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ci&&sb(S)===w.type)?(k=i(w,b.props),k.ref=bl(v,w,b),k.return=v,k):(k=qd(b.type,b.key,b.props,null,v.mode,k),k.ref=bl(v,w,b),k.return=v,k)}function c(v,w,b,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=Wm(b,v.mode,k),w.return=v,w):(w=i(w,b.children||[]),w.return=v,w)}function u(v,w,b,k,S){return w===null||w.tag!==7?(w=Js(b,v.mode,k,S),w.return=v,w):(w=i(w,b),w.return=v,w)}function d(v,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Hm(""+w,v.mode,b),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ku:return b=qd(w.type,w.key,w.props,null,v.mode,b),b.ref=bl(v,null,w),b.return=v,b;case Bo:return w=Wm(w,v.mode,b),w.return=v,w;case Ci:var k=w._init;return d(v,k(w._payload),b)}if(Rl(w)||gl(w))return w=Js(w,v.mode,b,null),w.return=v,w;rd(v,w)}return null}function f(v,w,b,k){var S=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:a(v,w,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ku:return b.key===S?l(v,w,b,k):null;case Bo:return b.key===S?c(v,w,b,k):null;case Ci:return S=b._init,f(v,w,S(b._payload),k)}if(Rl(b)||gl(b))return S!==null?null:u(v,w,b,k,null);rd(v,b)}return null}function h(v,w,b,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(b)||null,a(w,v,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ku:return v=v.get(k.key===null?b:k.key)||null,l(w,v,k,S);case Bo:return v=v.get(k.key===null?b:k.key)||null,c(w,v,k,S);case Ci:var C=k._init;return h(v,w,b,C(k._payload),S)}if(Rl(k)||gl(k))return v=v.get(b)||null,u(w,v,k,S,null);rd(w,k)}return null}function m(v,w,b,k){for(var S=null,C=null,E=w,T=w=0,P=null;E!==null&&T<b.length;T++){E.index>T?(P=E,E=null):P=E.sibling;var N=f(v,E,b[T],k);if(N===null){E===null&&(E=P);break}t&&E&&N.alternate===null&&e(v,E),w=s(N,w,T),C===null?S=N:C.sibling=N,C=N,E=P}if(T===b.length)return n(v,E),Le&&Ms(v,T),S;if(E===null){for(;T<b.length;T++)E=d(v,b[T],k),E!==null&&(w=s(E,w,T),C===null?S=E:C.sibling=E,C=E);return Le&&Ms(v,T),S}for(E=r(v,E);T<b.length;T++)P=h(E,v,T,b[T],k),P!==null&&(t&&P.alternate!==null&&E.delete(P.key===null?T:P.key),w=s(P,w,T),C===null?S=P:C.sibling=P,C=P);return t&&E.forEach(function(M){return e(v,M)}),Le&&Ms(v,T),S}function y(v,w,b,k){var S=gl(b);if(typeof S!="function")throw Error($(150));if(b=S.call(b),b==null)throw Error($(151));for(var C=S=null,E=w,T=w=0,P=null,N=b.next();E!==null&&!N.done;T++,N=b.next()){E.index>T?(P=E,E=null):P=E.sibling;var M=f(v,E,N.value,k);if(M===null){E===null&&(E=P);break}t&&E&&M.alternate===null&&e(v,E),w=s(M,w,T),C===null?S=M:C.sibling=M,C=M,E=P}if(N.done)return n(v,E),Le&&Ms(v,T),S;if(E===null){for(;!N.done;T++,N=b.next())N=d(v,N.value,k),N!==null&&(w=s(N,w,T),C===null?S=N:C.sibling=N,C=N);return Le&&Ms(v,T),S}for(E=r(v,E);!N.done;T++,N=b.next())N=h(E,v,T,N.value,k),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?T:N.key),w=s(N,w,T),C===null?S=N:C.sibling=N,C=N);return t&&E.forEach(function(A){return e(v,A)}),Le&&Ms(v,T),S}function x(v,w,b,k){if(typeof b=="object"&&b!==null&&b.type===Vo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ku:e:{for(var S=b.key,C=w;C!==null;){if(C.key===S){if(S=b.type,S===Vo){if(C.tag===7){n(v,C.sibling),w=i(C,b.props.children),w.return=v,v=w;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ci&&sb(S)===C.type){n(v,C.sibling),w=i(C,b.props),w.ref=bl(v,C,b),w.return=v,v=w;break e}n(v,C);break}else e(v,C);C=C.sibling}b.type===Vo?(w=Js(b.props.children,v.mode,k,b.key),w.return=v,v=w):(k=qd(b.type,b.key,b.props,null,v.mode,k),k.ref=bl(v,w,b),k.return=v,v=k)}return o(v);case Bo:e:{for(C=b.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(v,w.sibling),w=i(w,b.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=Wm(b,v.mode,k),w.return=v,v=w}return o(v);case Ci:return C=b._init,x(v,w,C(b._payload),k)}if(Rl(b))return m(v,w,b,k);if(gl(b))return y(v,w,b,k);rd(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(v,w.sibling),w=i(w,b),w.return=v,v=w):(n(v,w),w=Hm(b,v.mode,k),w.return=v,v=w),o(v)):n(v,w)}return x}var ka=ZT(!0),eN=ZT(!1),Ef=gs(null),Tf=null,Jo=null,Jv=null;function Yv(){Jv=Jo=Tf=null}function Xv(t){var e=Ef.current;_e(Ef),t._currentValue=e}function Ly(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ca(t,e){Tf=t,Jv=Jo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dn=!0),t.firstContext=null)}function qn(t){var e=t._currentValue;if(Jv!==t)if(t={context:t,memoizedValue:e,next:null},Jo===null){if(Tf===null)throw Error($(308));Jo=t,Tf.dependencies={lanes:0,firstContext:t}}else Jo=Jo.next=t;return e}var $s=null;function Qv(t){$s===null?$s=[t]:$s.push(t)}function tN(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Qv(e)):(n.next=i.next,i.next=n),e.interleaved=n,si(t,r)}function si(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ei=!1;function Zv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,si(t,n)}return i=r.interleaved,i===null?(e.next=e,Qv(r)):(e.next=i.next,i.next=e),r.interleaved=e,si(t,n)}function zd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$v(t,n)}}function ob(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nf(t,e,n,r){var i=t.updateQueue;Ei=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(f=e,h=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(h,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(h,d,f):m,f==null)break e;d=ze({},d,f);break e;case 2:Ei=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);oo|=o,t.lanes=o,t.memoizedState=d}}function ab(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var yu={},Pr=gs(yu),_c=gs(yu),Ic=gs(yu);function Fs(t){if(t===yu)throw Error($(174));return t}function ex(t,e){switch(je(Ic,e),je(_c,t),je(Pr,yu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yy(e,t)}_e(Pr),je(Pr,e)}function Sa(){_e(Pr),_e(_c),_e(Ic)}function rN(t){Fs(Ic.current);var e=Fs(Pr.current),n=yy(e,t.type);e!==n&&(je(_c,t),je(Pr,n))}function tx(t){_c.current===t&&(_e(Pr),_e(_c))}var $e=gs(0);function Mf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $m=[];function nx(){for(var t=0;t<$m.length;t++)$m[t]._workInProgressVersionPrimary=null;$m.length=0}var Ud=ci.ReactCurrentDispatcher,Fm=ci.ReactCurrentBatchConfig,so=0,Be=null,ot=null,ht=null,Pf=!1,Xl=!1,Lc=0,N_=0;function Rt(){throw Error($(321))}function rx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ur(t[n],e[n]))return!1;return!0}function ix(t,e,n,r,i,s){if(so=s,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ud.current=t===null||t.memoizedState===null?j_:A_,t=n(r,i),Xl){s=0;do{if(Xl=!1,Lc=0,25<=s)throw Error($(301));s+=1,ht=ot=null,e.updateQueue=null,Ud.current=D_,t=n(r,i)}while(Xl)}if(Ud.current=Of,e=ot!==null&&ot.next!==null,so=0,ht=ot=Be=null,Pf=!1,e)throw Error($(300));return t}function sx(){var t=Lc!==0;return Lc=0,t}function kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Be.memoizedState=ht=t:ht=ht.next=t,ht}function Jn(){if(ot===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=ht===null?Be.memoizedState:ht.next;if(e!==null)ht=e,ot=t;else{if(t===null)throw Error($(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ht===null?Be.memoizedState=ht=t:ht=ht.next=t}return ht}function $c(t,e){return typeof e=="function"?e(t):e}function Bm(t){var e=Jn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=ot,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((so&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Be.lanes|=u,oo|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,ur(r,e.memoizedState)||(dn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Be.lanes|=s,oo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Vm(t){var e=Jn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ur(s,e.memoizedState)||(dn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function iN(){}function sN(t,e){var n=Be,r=Jn(),i=e(),s=!ur(r.memoizedState,i);if(s&&(r.memoizedState=i,dn=!0),r=r.queue,ox(lN.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,Fc(9,aN.bind(null,n,r,i,e),void 0,null),gt===null)throw Error($(349));so&30||oN(n,e,i)}return i}function oN(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function aN(t,e,n,r){e.value=n,e.getSnapshot=r,cN(e)&&uN(t)}function lN(t,e,n){return n(function(){cN(e)&&uN(t)})}function cN(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ur(t,n)}catch{return!0}}function uN(t){var e=si(t,1);e!==null&&cr(e,t,1,-1)}function lb(t){var e=kr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$c,lastRenderedState:t},e.queue=t,t=t.dispatch=O_.bind(null,Be,t),[e.memoizedState,t]}function Fc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function dN(){return Jn().memoizedState}function Hd(t,e,n,r){var i=kr();Be.flags|=t,i.memoizedState=Fc(1|e,n,void 0,r===void 0?null:r)}function lp(t,e,n,r){var i=Jn();r=r===void 0?null:r;var s=void 0;if(ot!==null){var o=ot.memoizedState;if(s=o.destroy,r!==null&&rx(r,o.deps)){i.memoizedState=Fc(e,n,s,r);return}}Be.flags|=t,i.memoizedState=Fc(1|e,n,s,r)}function cb(t,e){return Hd(8390656,8,t,e)}function ox(t,e){return lp(2048,8,t,e)}function fN(t,e){return lp(4,2,t,e)}function hN(t,e){return lp(4,4,t,e)}function pN(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mN(t,e,n){return n=n!=null?n.concat([t]):null,lp(4,4,pN.bind(null,e,t),n)}function ax(){}function gN(t,e){var n=Jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function yN(t,e){var n=Jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vN(t,e,n){return so&21?(ur(n,e)||(n=ST(),Be.lanes|=n,oo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dn=!0),t.memoizedState=n)}function M_(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=Fm.transition;Fm.transition={};try{t(!1),e()}finally{Te=n,Fm.transition=r}}function xN(){return Jn().memoizedState}function P_(t,e,n){var r=Qi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wN(t))bN(e,n);else if(n=tN(t,e,n,r),n!==null){var i=Yt();cr(n,t,r,i),kN(n,e,r)}}function O_(t,e,n){var r=Qi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wN(t))bN(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ur(a,o)){var l=e.interleaved;l===null?(i.next=i,Qv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=tN(t,e,i,r),n!==null&&(i=Yt(),cr(n,t,r,i),kN(n,e,r))}}function wN(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function bN(t,e){Xl=Pf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kN(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$v(t,n)}}var Of={readContext:qn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},j_={readContext:qn,useCallback:function(t,e){return kr().memoizedState=[t,e===void 0?null:e],t},useContext:qn,useEffect:cb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hd(4194308,4,pN.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hd(4,2,t,e)},useMemo:function(t,e){var n=kr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=kr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=P_.bind(null,Be,t),[r.memoizedState,t]},useRef:function(t){var e=kr();return t={current:t},e.memoizedState=t},useState:lb,useDebugValue:ax,useDeferredValue:function(t){return kr().memoizedState=t},useTransition:function(){var t=lb(!1),e=t[0];return t=M_.bind(null,t[1]),kr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Be,i=kr();if(Le){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),gt===null)throw Error($(349));so&30||oN(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,cb(lN.bind(null,r,s,t),[t]),r.flags|=2048,Fc(9,aN.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=kr(),e=gt.identifierPrefix;if(Le){var n=Yr,r=Jr;n=(r&~(1<<32-lr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Lc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=N_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},A_={readContext:qn,useCallback:gN,useContext:qn,useEffect:ox,useImperativeHandle:mN,useInsertionEffect:fN,useLayoutEffect:hN,useMemo:yN,useReducer:Bm,useRef:dN,useState:function(){return Bm($c)},useDebugValue:ax,useDeferredValue:function(t){var e=Jn();return vN(e,ot.memoizedState,t)},useTransition:function(){var t=Bm($c)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:iN,useSyncExternalStore:sN,useId:xN,unstable_isNewReconciler:!1},D_={readContext:qn,useCallback:gN,useContext:qn,useEffect:ox,useImperativeHandle:mN,useInsertionEffect:fN,useLayoutEffect:hN,useMemo:yN,useReducer:Vm,useRef:dN,useState:function(){return Vm($c)},useDebugValue:ax,useDeferredValue:function(t){var e=Jn();return ot===null?e.memoizedState=t:vN(e,ot.memoizedState,t)},useTransition:function(){var t=Vm($c)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:iN,useSyncExternalStore:sN,useId:xN,unstable_isNewReconciler:!1};function tr(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $y(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cp={isMounted:function(t){return(t=t._reactInternals)?vo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=Qi(t),s=Qr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Yi(t,s,i),e!==null&&(cr(e,t,i,r),zd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=Qi(t),s=Qr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Yi(t,s,i),e!==null&&(cr(e,t,i,r),zd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yt(),r=Qi(t),i=Qr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Yi(t,i,r),e!==null&&(cr(e,t,r,n),zd(e,t,r))}};function ub(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!jc(n,r)||!jc(i,s):!0}function SN(t,e,n){var r=!1,i=ls,s=e.contextType;return typeof s=="object"&&s!==null?s=qn(s):(i=hn(e)?ro:Ut.current,r=e.contextTypes,s=(r=r!=null)?wa(t,i):ls),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function db(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cp.enqueueReplaceState(e,e.state,null)}function Fy(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Zv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=qn(s):(s=hn(e)?ro:Ut.current,i.context=wa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($y(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cp.enqueueReplaceState(i,i.state,null),Nf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ca(t,e){try{var n="",r=e;do n+=aR(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function zm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function By(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var R_=typeof WeakMap=="function"?WeakMap:Map;function CN(t,e,n){n=Qr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Af||(Af=!0,Yy=r),By(t,e)},n}function EN(t,e,n){n=Qr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){By(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){By(t,e),typeof r!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function fb(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new R_;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=q_.bind(null,t,e,n),e.then(t,t))}function hb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function pb(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qr(-1,1),e.tag=2,Yi(n,e,1))),n.lanes|=1),t)}var __=ci.ReactCurrentOwner,dn=!1;function Wt(t,e,n,r){e.child=t===null?eN(e,null,n,r):ka(e,t.child,n,r)}function mb(t,e,n,r,i){n=n.render;var s=e.ref;return ca(e,i),r=ix(t,e,n,r,s,i),n=sx(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oi(t,e,i)):(Le&&n&&Kv(e),e.flags|=1,Wt(t,e,r,i),e.child)}function gb(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!mx(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,TN(t,e,s,r,i)):(t=qd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:jc,n(o,r)&&t.ref===e.ref)return oi(t,e,i)}return e.flags|=1,t=Zi(s,r),t.ref=e.ref,t.return=e,e.child=t}function TN(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(jc(s,r)&&t.ref===e.ref)if(dn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(dn=!0);else return e.lanes=t.lanes,oi(t,e,i)}return Vy(t,e,n,r,i)}function NN(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Xo,bn),bn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(Xo,bn),bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,je(Xo,bn),bn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,je(Xo,bn),bn|=r;return Wt(t,e,i,n),e.child}function MN(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vy(t,e,n,r,i){var s=hn(n)?ro:Ut.current;return s=wa(e,s),ca(e,i),n=ix(t,e,n,r,s,i),r=sx(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oi(t,e,i)):(Le&&r&&Kv(e),e.flags|=1,Wt(t,e,n,i),e.child)}function yb(t,e,n,r,i){if(hn(n)){var s=!0;kf(e)}else s=!1;if(ca(e,i),e.stateNode===null)Wd(t,e),SN(e,n,r),Fy(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=qn(c):(c=hn(n)?ro:Ut.current,c=wa(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&db(e,o,r,c),Ei=!1;var f=e.memoizedState;o.state=f,Nf(e,r,o,i),l=e.memoizedState,a!==r||f!==l||fn.current||Ei?(typeof u=="function"&&($y(e,n,u,r),l=e.memoizedState),(a=Ei||ub(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,nN(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:tr(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=qn(l):(l=hn(n)?ro:Ut.current,l=wa(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&db(e,o,r,l),Ei=!1,f=e.memoizedState,o.state=f,Nf(e,r,o,i);var m=e.memoizedState;a!==d||f!==m||fn.current||Ei?(typeof h=="function"&&($y(e,n,h,r),m=e.memoizedState),(c=Ei||ub(e,n,c,r,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return zy(t,e,n,r,s,i)}function zy(t,e,n,r,i,s){MN(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&nb(e,n,!1),oi(t,e,s);r=e.stateNode,__.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ka(e,t.child,null,s),e.child=ka(e,null,a,s)):Wt(t,e,a,s),e.memoizedState=r.state,i&&nb(e,n,!0),e.child}function PN(t){var e=t.stateNode;e.pendingContext?tb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tb(t,e.context,!1),ex(t,e.containerInfo)}function vb(t,e,n,r,i){return ba(),qv(i),e.flags|=256,Wt(t,e,n,r),e.child}var Uy={dehydrated:null,treeContext:null,retryLane:0};function Hy(t){return{baseLanes:t,cachePool:null,transitions:null}}function ON(t,e,n){var r=e.pendingProps,i=$e.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),je($e,i&1),t===null)return Iy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=fp(o,r,0,null),t=Js(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Hy(n),e.memoizedState=Uy,t):lx(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return I_(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Zi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Zi(a,s):(s=Js(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Hy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Uy,r}return s=t.child,t=s.sibling,r=Zi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lx(t,e){return e=fp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function id(t,e,n,r){return r!==null&&qv(r),ka(e,t.child,null,n),t=lx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function I_(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=zm(Error($(422))),id(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=fp({mode:"visible",children:r.children},i,0,null),s=Js(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ka(e,t.child,null,o),e.child.memoizedState=Hy(o),e.memoizedState=Uy,s);if(!(e.mode&1))return id(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error($(419)),r=zm(s,r,void 0),id(t,e,o,r)}if(a=(o&t.childLanes)!==0,dn||a){if(r=gt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,si(t,i),cr(r,t,i,-1))}return px(),r=zm(Error($(421))),id(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=J_.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Sn=Ji(i.nextSibling),Cn=e,Le=!0,ir=null,t!==null&&($n[Fn++]=Jr,$n[Fn++]=Yr,$n[Fn++]=io,Jr=t.id,Yr=t.overflow,io=e),e=lx(e,r.children),e.flags|=4096,e)}function xb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ly(t.return,e,n)}function Um(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function jN(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Wt(t,e,r.children,n),r=$e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xb(t,n,e);else if(t.tag===19)xb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(je($e,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Mf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Um(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Mf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Um(e,!0,n,null,s);break;case"together":Um(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function oi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Zi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function L_(t,e,n){switch(e.tag){case 3:PN(e),ba();break;case 5:rN(e);break;case 1:hn(e.type)&&kf(e);break;case 4:ex(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;je(Ef,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(je($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?ON(t,e,n):(je($e,$e.current&1),t=oi(t,e,n),t!==null?t.sibling:null);je($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return jN(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,NN(t,e,n)}return oi(t,e,n)}var AN,Wy,DN,RN;AN=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wy=function(){};DN=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fs(Pr.current);var s=null;switch(n){case"input":i=hy(t,i),r=hy(t,r),s=[];break;case"select":i=ze({},i,{value:void 0}),r=ze({},r,{value:void 0}),s=[];break;case"textarea":i=gy(t,i),r=gy(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wf)}vy(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Cc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Cc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&De("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};RN=function(t,e,n,r){n!==r&&(e.flags|=4)};function kl(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $_(t,e,n){var r=e.pendingProps;switch(Gv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return hn(e.type)&&bf(),_t(e),null;case 3:return r=e.stateNode,Sa(),_e(fn),_e(Ut),nx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(nd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ir!==null&&(Zy(ir),ir=null))),Wy(t,e),_t(e),null;case 5:tx(e);var i=Fs(Ic.current);if(n=e.type,t!==null&&e.stateNode!=null)DN(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return _t(e),null}if(t=Fs(Pr.current),nd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Tr]=e,r[Rc]=s,t=(e.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(i=0;i<Il.length;i++)De(Il[i],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":M1(r,s),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},De("invalid",r);break;case"textarea":O1(r,s),De("invalid",r)}vy(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&td(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&td(r.textContent,a,t),i=["children",""+a]):Cc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&De("scroll",r)}switch(n){case"input":Gu(r),P1(r,s,!0);break;case"textarea":Gu(r),j1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=wf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Tr]=e,t[Rc]=r,AN(t,e,!1,!1),e.stateNode=t;e:{switch(o=xy(n,r),n){case"dialog":De("cancel",t),De("close",t),i=r;break;case"iframe":case"object":case"embed":De("load",t),i=r;break;case"video":case"audio":for(i=0;i<Il.length;i++)De(Il[i],t);i=r;break;case"source":De("error",t),i=r;break;case"img":case"image":case"link":De("error",t),De("load",t),i=r;break;case"details":De("toggle",t),i=r;break;case"input":M1(t,r),i=hy(t,r),De("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ze({},r,{value:void 0}),De("invalid",t);break;case"textarea":O1(t,r),i=gy(t,r),De("invalid",t);break;default:i=r}vy(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?dT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ec(t,l):typeof l=="number"&&Ec(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&De("scroll",t):l!=null&&Av(t,s,l,o))}switch(n){case"input":Gu(t),P1(t,r,!1);break;case"textarea":Gu(t),j1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+as(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?sa(t,!!r.multiple,s,!1):r.defaultValue!=null&&sa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)RN(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Fs(Ic.current),Fs(Pr.current),nd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tr]=e,(s=r.nodeValue!==n)&&(t=Cn,t!==null))switch(t.tag){case 3:td(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&td(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tr]=e,e.stateNode=r}return _t(e),null;case 13:if(_e($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&Sn!==null&&e.mode&1&&!(e.flags&128))QT(),ba(),e.flags|=98560,s=!1;else if(s=nd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Tr]=e}else ba(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),s=!1}else ir!==null&&(Zy(ir),ir=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?dt===0&&(dt=3):px())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return Sa(),Wy(t,e),t===null&&Ac(e.stateNode.containerInfo),_t(e),null;case 10:return Xv(e.type._context),_t(e),null;case 17:return hn(e.type)&&bf(),_t(e),null;case 19:if(_e($e),s=e.memoizedState,s===null)return _t(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)kl(s,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Mf(t),o!==null){for(e.flags|=128,kl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je($e,$e.current&1|2),e.child}t=t.sibling}s.tail!==null&&Qe()>Ea&&(e.flags|=128,r=!0,kl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Mf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),kl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Le)return _t(e),null}else 2*Qe()-s.renderingStartTime>Ea&&n!==1073741824&&(e.flags|=128,r=!0,kl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qe(),e.sibling=null,n=$e.current,je($e,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return hx(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bn&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function F_(t,e){switch(Gv(e),e.tag){case 1:return hn(e.type)&&bf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Sa(),_e(fn),_e(Ut),nx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tx(e),null;case 13:if(_e($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));ba()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e($e),null;case 4:return Sa(),null;case 10:return Xv(e.type._context),null;case 22:case 23:return hx(),null;case 24:return null;default:return null}}var sd=!1,$t=!1,B_=typeof WeakSet=="function"?WeakSet:Set,q=null;function Yo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(t,e,r)}else n.current=null}function Ky(t,e,n){try{n()}catch(r){Ge(t,e,r)}}var wb=!1;function V_(t,e){if(Py=yf,t=FT(),Wv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Oy={focusedElem:t,selectionRange:n},yf=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,x=m.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:tr(e.type,y),x);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(k){Ge(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return m=wb,wb=!1,m}function Ql(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ky(e,n,s)}i=i.next}while(i!==r)}}function up(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Gy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _N(t){var e=t.alternate;e!==null&&(t.alternate=null,_N(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tr],delete e[Rc],delete e[Dy],delete e[S_],delete e[C_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function IN(t){return t.tag===5||t.tag===3||t.tag===4}function bb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||IN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wf));else if(r!==4&&(t=t.child,t!==null))for(qy(t,e,n),t=t.sibling;t!==null;)qy(t,e,n),t=t.sibling}function Jy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Jy(t,e,n),t=t.sibling;t!==null;)Jy(t,e,n),t=t.sibling}var Ct=null,nr=!1;function yi(t,e,n){for(n=n.child;n!==null;)LN(t,e,n),n=n.sibling}function LN(t,e,n){if(Mr&&typeof Mr.onCommitFiberUnmount=="function")try{Mr.onCommitFiberUnmount(np,n)}catch{}switch(n.tag){case 5:$t||Yo(n,e);case 6:var r=Ct,i=nr;Ct=null,yi(t,e,n),Ct=r,nr=i,Ct!==null&&(nr?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(nr?(t=Ct,n=n.stateNode,t.nodeType===8?Im(t.parentNode,n):t.nodeType===1&&Im(t,n),Pc(t)):Im(Ct,n.stateNode));break;case 4:r=Ct,i=nr,Ct=n.stateNode.containerInfo,nr=!0,yi(t,e,n),Ct=r,nr=i;break;case 0:case 11:case 14:case 15:if(!$t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ky(n,e,o),i=i.next}while(i!==r)}yi(t,e,n);break;case 1:if(!$t&&(Yo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ge(n,e,a)}yi(t,e,n);break;case 21:yi(t,e,n);break;case 22:n.mode&1?($t=(r=$t)||n.memoizedState!==null,yi(t,e,n),$t=r):yi(t,e,n);break;default:yi(t,e,n)}}function kb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new B_),e.forEach(function(r){var i=Y_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ct=a.stateNode,nr=!1;break e;case 3:Ct=a.stateNode.containerInfo,nr=!0;break e;case 4:Ct=a.stateNode.containerInfo,nr=!0;break e}a=a.return}if(Ct===null)throw Error($(160));LN(s,o,i),Ct=null,nr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ge(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$N(e,t),e=e.sibling}function $N(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qn(e,t),br(t),r&4){try{Ql(3,t,t.return),up(3,t)}catch(y){Ge(t,t.return,y)}try{Ql(5,t,t.return)}catch(y){Ge(t,t.return,y)}}break;case 1:Qn(e,t),br(t),r&512&&n!==null&&Yo(n,n.return);break;case 5:if(Qn(e,t),br(t),r&512&&n!==null&&Yo(n,n.return),t.flags&32){var i=t.stateNode;try{Ec(i,"")}catch(y){Ge(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&oT(i,s),xy(a,o);var c=xy(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?dT(i,d):u==="dangerouslySetInnerHTML"?cT(i,d):u==="children"?Ec(i,d):Av(i,u,d,c)}switch(a){case"input":py(i,s);break;case"textarea":aT(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?sa(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?sa(i,!!s.multiple,s.defaultValue,!0):sa(i,!!s.multiple,s.multiple?[]:"",!1))}i[Rc]=s}catch(y){Ge(t,t.return,y)}}break;case 6:if(Qn(e,t),br(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){Ge(t,t.return,y)}}break;case 3:if(Qn(e,t),br(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pc(e.containerInfo)}catch(y){Ge(t,t.return,y)}break;case 4:Qn(e,t),br(t);break;case 13:Qn(e,t),br(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(dx=Qe())),r&4&&kb(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?($t=(c=$t)||u,Qn(e,t),$t=c):Qn(e,t),br(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(q=t,u=t.child;u!==null;){for(d=q=u;q!==null;){switch(f=q,h=f.child,f.tag){case 0:case 11:case 14:case 15:Ql(4,f,f.return);break;case 1:Yo(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){Ge(r,n,y)}}break;case 5:Yo(f,f.return);break;case 22:if(f.memoizedState!==null){Cb(d);continue}}h!==null?(h.return=f,q=h):Cb(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=uT("display",o))}catch(y){Ge(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Ge(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Qn(e,t),br(t),r&4&&kb(t);break;case 21:break;default:Qn(e,t),br(t)}}function br(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(IN(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ec(i,""),r.flags&=-33);var s=bb(t);Jy(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=bb(t);qy(t,a,o);break;default:throw Error($(161))}}catch(l){Ge(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function z_(t,e,n){q=t,FN(t)}function FN(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||sd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||$t;a=sd;var c=$t;if(sd=o,($t=l)&&!c)for(q=i;q!==null;)o=q,l=o.child,o.tag===22&&o.memoizedState!==null?Eb(i):l!==null?(l.return=o,q=l):Eb(i);for(;s!==null;)q=s,FN(s),s=s.sibling;q=i,sd=a,$t=c}Sb(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):Sb(t)}}function Sb(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$t||up(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$t)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:tr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ab(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ab(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Pc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}$t||e.flags&512&&Gy(e)}catch(f){Ge(e,e.return,f)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Cb(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Eb(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{up(4,e)}catch(l){Ge(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ge(e,i,l)}}var s=e.return;try{Gy(e)}catch(l){Ge(e,s,l)}break;case 5:var o=e.return;try{Gy(e)}catch(l){Ge(e,o,l)}}}catch(l){Ge(e,e.return,l)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var U_=Math.ceil,jf=ci.ReactCurrentDispatcher,cx=ci.ReactCurrentOwner,Hn=ci.ReactCurrentBatchConfig,be=0,gt=null,et=null,Pt=0,bn=0,Xo=gs(0),dt=0,Bc=null,oo=0,dp=0,ux=0,Zl=null,ln=null,dx=0,Ea=1/0,Kr=null,Af=!1,Yy=null,Xi=null,od=!1,Bi=null,Df=0,ec=0,Xy=null,Kd=-1,Gd=0;function Yt(){return be&6?Qe():Kd!==-1?Kd:Kd=Qe()}function Qi(t){return t.mode&1?be&2&&Pt!==0?Pt&-Pt:T_.transition!==null?(Gd===0&&(Gd=ST()),Gd):(t=Te,t!==0||(t=window.event,t=t===void 0?16:OT(t.type)),t):1}function cr(t,e,n,r){if(50<ec)throw ec=0,Xy=null,Error($(185));pu(t,n,r),(!(be&2)||t!==gt)&&(t===gt&&(!(be&2)&&(dp|=n),dt===4&&Di(t,Pt)),pn(t,r),n===1&&be===0&&!(e.mode&1)&&(Ea=Qe()+500,ap&&ys()))}function pn(t,e){var n=t.callbackNode;TR(t,e);var r=gf(t,t===gt?Pt:0);if(r===0)n!==null&&R1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&R1(n),e===1)t.tag===0?E_(Tb.bind(null,t)):JT(Tb.bind(null,t)),b_(function(){!(be&6)&&ys()}),n=null;else{switch(CT(r)){case 1:n=Lv;break;case 4:n=bT;break;case 16:n=mf;break;case 536870912:n=kT;break;default:n=mf}n=GN(n,BN.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function BN(t,e){if(Kd=-1,Gd=0,be&6)throw Error($(327));var n=t.callbackNode;if(ua()&&t.callbackNode!==n)return null;var r=gf(t,t===gt?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Rf(t,r);else{e=r;var i=be;be|=2;var s=zN();(gt!==t||Pt!==e)&&(Kr=null,Ea=Qe()+500,qs(t,e));do try{K_();break}catch(a){VN(t,a)}while(!0);Yv(),jf.current=s,be=i,et!==null?e=0:(gt=null,Pt=0,e=dt)}if(e!==0){if(e===2&&(i=Cy(t),i!==0&&(r=i,e=Qy(t,i))),e===1)throw n=Bc,qs(t,0),Di(t,r),pn(t,Qe()),n;if(e===6)Di(t,r);else{if(i=t.current.alternate,!(r&30)&&!H_(i)&&(e=Rf(t,r),e===2&&(s=Cy(t),s!==0&&(r=s,e=Qy(t,s))),e===1))throw n=Bc,qs(t,0),Di(t,r),pn(t,Qe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Ps(t,ln,Kr);break;case 3:if(Di(t,r),(r&130023424)===r&&(e=dx+500-Qe(),10<e)){if(gf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ay(Ps.bind(null,t,ln,Kr),e);break}Ps(t,ln,Kr);break;case 4:if(Di(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-lr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*U_(r/1960))-r,10<r){t.timeoutHandle=Ay(Ps.bind(null,t,ln,Kr),r);break}Ps(t,ln,Kr);break;case 5:Ps(t,ln,Kr);break;default:throw Error($(329))}}}return pn(t,Qe()),t.callbackNode===n?BN.bind(null,t):null}function Qy(t,e){var n=Zl;return t.current.memoizedState.isDehydrated&&(qs(t,e).flags|=256),t=Rf(t,e),t!==2&&(e=ln,ln=n,e!==null&&Zy(e)),t}function Zy(t){ln===null?ln=t:ln.push.apply(ln,t)}function H_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ur(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Di(t,e){for(e&=~ux,e&=~dp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-lr(e),r=1<<n;t[n]=-1,e&=~r}}function Tb(t){if(be&6)throw Error($(327));ua();var e=gf(t,0);if(!(e&1))return pn(t,Qe()),null;var n=Rf(t,e);if(t.tag!==0&&n===2){var r=Cy(t);r!==0&&(e=r,n=Qy(t,r))}if(n===1)throw n=Bc,qs(t,0),Di(t,e),pn(t,Qe()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ps(t,ln,Kr),pn(t,Qe()),null}function fx(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&(Ea=Qe()+500,ap&&ys())}}function ao(t){Bi!==null&&Bi.tag===0&&!(be&6)&&ua();var e=be;be|=1;var n=Hn.transition,r=Te;try{if(Hn.transition=null,Te=1,t)return t()}finally{Te=r,Hn.transition=n,be=e,!(be&6)&&ys()}}function hx(){bn=Xo.current,_e(Xo)}function qs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,w_(n)),et!==null)for(n=et.return;n!==null;){var r=n;switch(Gv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bf();break;case 3:Sa(),_e(fn),_e(Ut),nx();break;case 5:tx(r);break;case 4:Sa();break;case 13:_e($e);break;case 19:_e($e);break;case 10:Xv(r.type._context);break;case 22:case 23:hx()}n=n.return}if(gt=t,et=t=Zi(t.current,null),Pt=bn=e,dt=0,Bc=null,ux=dp=oo=0,ln=Zl=null,$s!==null){for(e=0;e<$s.length;e++)if(n=$s[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}$s=null}return t}function VN(t,e){do{var n=et;try{if(Yv(),Ud.current=Of,Pf){for(var r=Be.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Pf=!1}if(so=0,ht=ot=Be=null,Xl=!1,Lc=0,cx.current=null,n===null||n.return===null){dt=1,Bc=e,et=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Pt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=hb(o);if(h!==null){h.flags&=-257,pb(h,o,a,s,e),h.mode&1&&fb(s,c,e),e=h,l=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){fb(s,c,e),px();break e}l=Error($(426))}}else if(Le&&a.mode&1){var x=hb(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),pb(x,o,a,s,e),qv(Ca(l,a));break e}}s=l=Ca(l,a),dt!==4&&(dt=2),Zl===null?Zl=[s]:Zl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=CN(s,l,e);ob(s,v);break e;case 1:a=l;var w=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Xi===null||!Xi.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=EN(s,a,e);ob(s,k);break e}}s=s.return}while(s!==null)}HN(n)}catch(S){e=S,et===n&&n!==null&&(et=n=n.return);continue}break}while(!0)}function zN(){var t=jf.current;return jf.current=Of,t===null?Of:t}function px(){(dt===0||dt===3||dt===2)&&(dt=4),gt===null||!(oo&268435455)&&!(dp&268435455)||Di(gt,Pt)}function Rf(t,e){var n=be;be|=2;var r=zN();(gt!==t||Pt!==e)&&(Kr=null,qs(t,e));do try{W_();break}catch(i){VN(t,i)}while(!0);if(Yv(),be=n,jf.current=r,et!==null)throw Error($(261));return gt=null,Pt=0,dt}function W_(){for(;et!==null;)UN(et)}function K_(){for(;et!==null&&!yR();)UN(et)}function UN(t){var e=KN(t.alternate,t,bn);t.memoizedProps=t.pendingProps,e===null?HN(t):et=e,cx.current=null}function HN(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=F_(n,e),n!==null){n.flags&=32767,et=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,et=null;return}}else if(n=$_(n,e,bn),n!==null){et=n;return}if(e=e.sibling,e!==null){et=e;return}et=e=t}while(e!==null);dt===0&&(dt=5)}function Ps(t,e,n){var r=Te,i=Hn.transition;try{Hn.transition=null,Te=1,G_(t,e,n,r)}finally{Hn.transition=i,Te=r}return null}function G_(t,e,n,r){do ua();while(Bi!==null);if(be&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(NR(t,s),t===gt&&(et=gt=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||od||(od=!0,GN(mf,function(){return ua(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Hn.transition,Hn.transition=null;var o=Te;Te=1;var a=be;be|=4,cx.current=null,V_(t,n),$N(n,t),h_(Oy),yf=!!Py,Oy=Py=null,t.current=n,z_(n),vR(),be=a,Te=o,Hn.transition=s}else t.current=n;if(od&&(od=!1,Bi=t,Df=i),s=t.pendingLanes,s===0&&(Xi=null),bR(n.stateNode),pn(t,Qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Af)throw Af=!1,t=Yy,Yy=null,t;return Df&1&&t.tag!==0&&ua(),s=t.pendingLanes,s&1?t===Xy?ec++:(ec=0,Xy=t):ec=0,ys(),null}function ua(){if(Bi!==null){var t=CT(Df),e=Hn.transition,n=Te;try{if(Hn.transition=null,Te=16>t?16:t,Bi===null)var r=!1;else{if(t=Bi,Bi=null,Df=0,be&6)throw Error($(331));var i=be;for(be|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(q=c;q!==null;){var u=q;switch(u.tag){case 0:case 11:case 15:Ql(8,u,s)}var d=u.child;if(d!==null)d.return=u,q=d;else for(;q!==null;){u=q;var f=u.sibling,h=u.return;if(_N(u),u===c){q=null;break}if(f!==null){f.return=h,q=f;break}q=h}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ql(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,q=v;break e}q=s.return}}var w=t.current;for(q=w;q!==null;){o=q;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,q=b;else e:for(o=w;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:up(9,a)}}catch(S){Ge(a,a.return,S)}if(a===o){q=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,q=k;break e}q=a.return}}if(be=i,ys(),Mr&&typeof Mr.onPostCommitFiberRoot=="function")try{Mr.onPostCommitFiberRoot(np,t)}catch{}r=!0}return r}finally{Te=n,Hn.transition=e}}return!1}function Nb(t,e,n){e=Ca(n,e),e=CN(t,e,1),t=Yi(t,e,1),e=Yt(),t!==null&&(pu(t,1,e),pn(t,e))}function Ge(t,e,n){if(t.tag===3)Nb(t,t,n);else for(;e!==null;){if(e.tag===3){Nb(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xi===null||!Xi.has(r))){t=Ca(n,t),t=EN(e,t,1),e=Yi(e,t,1),t=Yt(),e!==null&&(pu(e,1,t),pn(e,t));break}}e=e.return}}function q_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yt(),t.pingedLanes|=t.suspendedLanes&n,gt===t&&(Pt&n)===n&&(dt===4||dt===3&&(Pt&130023424)===Pt&&500>Qe()-dx?qs(t,0):ux|=n),pn(t,e)}function WN(t,e){e===0&&(t.mode&1?(e=Yu,Yu<<=1,!(Yu&130023424)&&(Yu=4194304)):e=1);var n=Yt();t=si(t,e),t!==null&&(pu(t,e,n),pn(t,n))}function J_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),WN(t,n)}function Y_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),WN(t,n)}var KN;KN=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)dn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dn=!1,L_(t,e,n);dn=!!(t.flags&131072)}else dn=!1,Le&&e.flags&1048576&&YT(e,Cf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wd(t,e),t=e.pendingProps;var i=wa(e,Ut.current);ca(e,n),i=ix(null,e,r,t,i,n);var s=sx();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(r)?(s=!0,kf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zv(e),i.updater=cp,e.stateNode=i,i._reactInternals=e,Fy(e,r,t,n),e=zy(null,e,r,!0,s,n)):(e.tag=0,Le&&s&&Kv(e),Wt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Wd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Q_(r),t=tr(r,t),i){case 0:e=Vy(null,e,r,t,n);break e;case 1:e=yb(null,e,r,t,n);break e;case 11:e=mb(null,e,r,t,n);break e;case 14:e=gb(null,e,r,tr(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),Vy(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),yb(t,e,r,i,n);case 3:e:{if(PN(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,nN(t,e),Nf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ca(Error($(423)),e),e=vb(t,e,r,n,i);break e}else if(r!==i){i=Ca(Error($(424)),e),e=vb(t,e,r,n,i);break e}else for(Sn=Ji(e.stateNode.containerInfo.firstChild),Cn=e,Le=!0,ir=null,n=eN(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ba(),r===i){e=oi(t,e,n);break e}Wt(t,e,r,n)}e=e.child}return e;case 5:return rN(e),t===null&&Iy(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,jy(r,i)?o=null:s!==null&&jy(r,s)&&(e.flags|=32),MN(t,e),Wt(t,e,o,n),e.child;case 6:return t===null&&Iy(e),null;case 13:return ON(t,e,n);case 4:return ex(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ka(e,null,r,n):Wt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),mb(t,e,r,i,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,je(Ef,r._currentValue),r._currentValue=o,s!==null)if(ur(s.value,o)){if(s.children===i.children&&!fn.current){e=oi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Qr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Ly(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ly(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Wt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ca(e,n),i=qn(i),r=r(i),e.flags|=1,Wt(t,e,r,n),e.child;case 14:return r=e.type,i=tr(r,e.pendingProps),i=tr(r.type,i),gb(t,e,r,i,n);case 15:return TN(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),Wd(t,e),e.tag=1,hn(r)?(t=!0,kf(e)):t=!1,ca(e,n),SN(e,r,i),Fy(e,r,i,n),zy(null,e,r,!0,t,n);case 19:return jN(t,e,n);case 22:return NN(t,e,n)}throw Error($(156,e.tag))};function GN(t,e){return wT(t,e)}function X_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(t,e,n,r){return new X_(t,e,n,r)}function mx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Q_(t){if(typeof t=="function")return mx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rv)return 11;if(t===_v)return 14}return 2}function Zi(t,e){var n=t.alternate;return n===null?(n=zn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")mx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vo:return Js(n.children,i,s,e);case Dv:o=8,i|=8;break;case cy:return t=zn(12,n,e,i|2),t.elementType=cy,t.lanes=s,t;case uy:return t=zn(13,n,e,i),t.elementType=uy,t.lanes=s,t;case dy:return t=zn(19,n,e,i),t.elementType=dy,t.lanes=s,t;case rT:return fp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tT:o=10;break e;case nT:o=9;break e;case Rv:o=11;break e;case _v:o=14;break e;case Ci:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=zn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Js(t,e,n,r){return t=zn(7,t,r,e),t.lanes=n,t}function fp(t,e,n,r){return t=zn(22,t,r,e),t.elementType=rT,t.lanes=n,t.stateNode={isHidden:!1},t}function Hm(t,e,n){return t=zn(6,t,null,e),t.lanes=n,t}function Wm(t,e,n){return e=zn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Z_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Em(0),this.expirationTimes=Em(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Em(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gx(t,e,n,r,i,s,o,a,l){return t=new Z_(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=zn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zv(s),t}function eI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function qN(t){if(!t)return ls;t=t._reactInternals;e:{if(vo(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(hn(n))return qT(t,n,e)}return e}function JN(t,e,n,r,i,s,o,a,l){return t=gx(n,r,!0,t,i,s,o,a,l),t.context=qN(null),n=t.current,r=Yt(),i=Qi(n),s=Qr(r,i),s.callback=e??null,Yi(n,s,i),t.current.lanes=i,pu(t,i,r),pn(t,r),t}function hp(t,e,n,r){var i=e.current,s=Yt(),o=Qi(i);return n=qN(n),e.context===null?e.context=n:e.pendingContext=n,e=Qr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yi(i,e,o),t!==null&&(cr(t,i,o,s),zd(t,i,o)),o}function _f(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yx(t,e){Mb(t,e),(t=t.alternate)&&Mb(t,e)}function tI(){return null}var YN=typeof reportError=="function"?reportError:function(t){console.error(t)};function vx(t){this._internalRoot=t}pp.prototype.render=vx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));hp(t,e,null,null)};pp.prototype.unmount=vx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ao(function(){hp(null,t,null,null)}),e[ii]=null}};function pp(t){this._internalRoot=t}pp.prototype.unstable_scheduleHydration=function(t){if(t){var e=NT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ai.length&&e!==0&&e<Ai[n].priority;n++);Ai.splice(n,0,t),n===0&&PT(t)}};function xx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Pb(){}function nI(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=_f(o);s.call(c)}}var o=JN(e,r,t,0,null,!1,!1,"",Pb);return t._reactRootContainer=o,t[ii]=o.current,Ac(t.nodeType===8?t.parentNode:t),ao(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=_f(l);a.call(c)}}var l=gx(t,0,!1,null,null,!1,!1,"",Pb);return t._reactRootContainer=l,t[ii]=l.current,Ac(t.nodeType===8?t.parentNode:t),ao(function(){hp(e,l,n,r)}),l}function gp(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=_f(o);a.call(l)}}hp(e,o,t,i)}else o=nI(n,e,t,i,r);return _f(o)}ET=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_l(e.pendingLanes);n!==0&&($v(e,n|1),pn(e,Qe()),!(be&6)&&(Ea=Qe()+500,ys()))}break;case 13:ao(function(){var r=si(t,1);if(r!==null){var i=Yt();cr(r,t,1,i)}}),yx(t,1)}};Fv=function(t){if(t.tag===13){var e=si(t,134217728);if(e!==null){var n=Yt();cr(e,t,134217728,n)}yx(t,134217728)}};TT=function(t){if(t.tag===13){var e=Qi(t),n=si(t,e);if(n!==null){var r=Yt();cr(n,t,e,r)}yx(t,e)}};NT=function(){return Te};MT=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};by=function(t,e,n){switch(e){case"input":if(py(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=op(r);if(!i)throw Error($(90));sT(r),py(r,i)}}}break;case"textarea":aT(t,n);break;case"select":e=n.value,e!=null&&sa(t,!!n.multiple,e,!1)}};pT=fx;mT=ao;var rI={usingClientEntryPoint:!1,Events:[gu,Wo,op,fT,hT,fx]},Sl={findFiberByHostInstance:Ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iI={bundleType:Sl.bundleType,version:Sl.version,rendererPackageName:Sl.rendererPackageName,rendererConfig:Sl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ci.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vT(t),t===null?null:t.stateNode},findFiberByHostInstance:Sl.findFiberByHostInstance||tI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{np=ad.inject(iI),Mr=ad}catch{}}Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rI;Mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xx(e))throw Error($(200));return eI(t,e,null,n)};Mn.createRoot=function(t,e){if(!xx(t))throw Error($(299));var n=!1,r="",i=YN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=gx(t,1,!1,null,null,n,!1,r,i),t[ii]=e.current,Ac(t.nodeType===8?t.parentNode:t),new vx(e)};Mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=vT(e),t=t===null?null:t.stateNode,t};Mn.flushSync=function(t){return ao(t)};Mn.hydrate=function(t,e,n){if(!mp(e))throw Error($(200));return gp(null,t,e,!0,n)};Mn.hydrateRoot=function(t,e,n){if(!xx(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=YN;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=JN(e,null,t,1,n??null,i,!1,s,o),t[ii]=e.current,Ac(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new pp(e)};Mn.render=function(t,e,n){if(!mp(e))throw Error($(200));return gp(null,t,e,!1,n)};Mn.unmountComponentAtNode=function(t){if(!mp(t))throw Error($(40));return t._reactRootContainer?(ao(function(){gp(null,null,t,!1,function(){t._reactRootContainer=null,t[ii]=null})}),!0):!1};Mn.unstable_batchedUpdates=fx;Mn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mp(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return gp(t,e,n,!1,r)};Mn.version="18.3.1-next-f1338f8080-20240426";function XN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XN)}catch(t){console.error(t)}}XN(),XE.exports=Mn;var tt=XE.exports;const sI=Ev(tt);var QN,Ob=tt;QN=Ob.createRoot,Ob.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vc(){return Vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vc.apply(this,arguments)}var Vi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Vi||(Vi={}));const jb="popstate";function oI(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=xo(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),e0("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:If(s))}function r(i,s){wx(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return lI(e,n,r,t)}function Ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aI(){return Math.random().toString(36).substr(2,8)}function Ab(t,e){return{usr:t.state,key:t.key,idx:e}}function e0(t,e,n,r){return n===void 0&&(n=null),Vc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?xo(e):e,{state:n,key:e&&e.key||r||aI()})}function If(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function lI(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Vi.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Vc({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Vi.Pop;let x=u(),v=x==null?null:x-c;c=x,l&&l({action:a,location:y.location,delta:v})}function f(x,v){a=Vi.Push;let w=e0(y.location,x,v);n&&n(w,x),c=u()+1;let b=Ab(w,c),k=y.createHref(w);try{o.pushState(b,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(k)}s&&l&&l({action:a,location:y.location,delta:1})}function h(x,v){a=Vi.Replace;let w=e0(y.location,x,v);n&&n(w,x),c=u();let b=Ab(w,c),k=y.createHref(w);o.replaceState(b,"",k),s&&l&&l({action:a,location:y.location,delta:0})}function m(x){let v=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof x=="string"?x:If(x);return w=w.replace(/ $/,"%20"),Ve(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let y={get action(){return a},get location(){return t(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(jb,d),l=x,()=>{i.removeEventListener(jb,d),l=null}},createHref(x){return e(i,x)},createURL:m,encodeLocation(x){let v=m(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:h,go(x){return o.go(x)}};return y}var Db;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Db||(Db={}));function cI(t,e,n){return n===void 0&&(n="/"),uI(t,e,n,!1)}function uI(t,e,n,r){let i=typeof e=="string"?xo(e):e,s=Ta(i.pathname||"/",n);if(s==null)return null;let o=ZN(t);dI(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=kI(s);a=wI(o[l],c,r)}return a}function ZN(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ve(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=es([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Ve(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ZN(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:vI(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of e2(s.path))i(s,o,l)}),e}function e2(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=e2(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function dI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:xI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const fI=/^:[\w-]+$/,hI=3,pI=2,mI=1,gI=10,yI=-2,Rb=t=>t==="*";function vI(t,e){let n=t.split("/"),r=n.length;return n.some(Rb)&&(r+=yI),e&&(r+=pI),n.filter(i=>!Rb(i)).reduce((i,s)=>i+(fI.test(s)?hI:s===""?mI:gI),r)}function xI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function wI(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=Lf({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=Lf({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:es([s,d.pathname]),pathnameBase:TI(es([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=es([s,d.pathnameBase]))}return o}function Lf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=bI(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let y=a[d]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const m=a[d];return h&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function bI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function kI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ta(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function SI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?xo(t):t;return{pathname:n?n.startsWith("/")?n:CI(n,e):e,search:NI(r),hash:MI(i)}}function CI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Km(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bx(t,e){let n=EI(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function kx(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=xo(t):(i=Vc({},t),Ve(!i.pathname||!i.pathname.includes("?"),Km("?","pathname","search",i)),Ve(!i.pathname||!i.pathname.includes("#"),Km("#","pathname","hash",i)),Ve(!i.search||!i.search.includes("#"),Km("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=SI(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const es=t=>t.join("/").replace(/\/\/+/g,"/"),TI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),NI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,MI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function PI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const t2=["post","put","patch","delete"];new Set(t2);const OI=["get",...t2];new Set(OI);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zc(){return zc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zc.apply(this,arguments)}const yp=g.createContext(null),n2=g.createContext(null),ui=g.createContext(null),vp=g.createContext(null),di=g.createContext({outlet:null,matches:[],isDataRoute:!1}),r2=g.createContext(null);function jI(t,e){let{relative:n}=e===void 0?{}:e;qa()||Ve(!1);let{basename:r,navigator:i}=g.useContext(ui),{hash:s,pathname:o,search:a}=xp(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:es([r,o])),i.createHref({pathname:l,search:a,hash:s})}function qa(){return g.useContext(vp)!=null}function wo(){return qa()||Ve(!1),g.useContext(vp).location}function i2(t){g.useContext(ui).static||g.useLayoutEffect(t)}function $r(){let{isDataRoute:t}=g.useContext(di);return t?WI():AI()}function AI(){qa()||Ve(!1);let t=g.useContext(yp),{basename:e,future:n,navigator:r}=g.useContext(ui),{matches:i}=g.useContext(di),{pathname:s}=wo(),o=JSON.stringify(bx(i,n.v7_relativeSplatPath)),a=g.useRef(!1);return i2(()=>{a.current=!0}),g.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=kx(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:es([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}function DI(){let{matches:t}=g.useContext(di),e=t[t.length-1];return e?e.params:{}}function xp(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(ui),{matches:i}=g.useContext(di),{pathname:s}=wo(),o=JSON.stringify(bx(i,r.v7_relativeSplatPath));return g.useMemo(()=>kx(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function RI(t,e){return _I(t,e)}function _I(t,e,n,r){qa()||Ve(!1);let{navigator:i}=g.useContext(ui),{matches:s}=g.useContext(di),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=wo(),u;if(e){var d;let x=typeof e=="string"?xo(e):e;l==="/"||(d=x.pathname)!=null&&d.startsWith(l)||Ve(!1),u=x}else u=c;let f=u.pathname||"/",h=f;if(l!=="/"){let x=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let m=cI(t,{pathname:h}),y=BI(m&&m.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:es([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:es([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&y?g.createElement(vp.Provider,{value:{location:zc({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Vi.Pop}},y):y}function II(){let t=HI(),e=PI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:i},n):null,null)}const LI=g.createElement(II,null);class $I extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(di.Provider,{value:this.props.routeContext},g.createElement(r2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FI(t){let{routeContext:e,match:n,children:r}=t,i=g.useContext(yp);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(di.Provider,{value:e},r)}function BI(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Ve(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:h}=n,m=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let h,m=!1,y=null,x=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,y=d.route.errorElement||LI,l&&(c<0&&f===0?(m=!0,x=null):c===f&&(m=!0,x=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),w=()=>{let b;return h?b=y:m?b=x:d.route.Component?b=g.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,g.createElement(FI,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?g.createElement($I,{location:n.location,revalidation:n.revalidation,component:y,error:h,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var s2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(s2||{}),$f=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($f||{});function VI(t){let e=g.useContext(yp);return e||Ve(!1),e}function zI(t){let e=g.useContext(n2);return e||Ve(!1),e}function UI(t){let e=g.useContext(di);return e||Ve(!1),e}function o2(t){let e=UI(),n=e.matches[e.matches.length-1];return n.route.id||Ve(!1),n.route.id}function HI(){var t;let e=g.useContext(r2),n=zI($f.UseRouteError),r=o2($f.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function WI(){let{router:t}=VI(s2.UseNavigateStable),e=o2($f.UseNavigateStable),n=g.useRef(!1);return i2(()=>{n.current=!0}),g.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,zc({fromRouteId:e},s)))},[t,e])}const _b={};function KI(t,e){_b[e]||(_b[e]=!0,console.warn(e))}const Ib=(t,e,n)=>KI(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function GI(t,e){t!=null&&t.v7_startTransition||Ib("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&Ib("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function Ff(t){let{to:e,replace:n,state:r,relative:i}=t;qa()||Ve(!1);let{future:s,static:o}=g.useContext(ui),{matches:a}=g.useContext(di),{pathname:l}=wo(),c=$r(),u=kx(e,bx(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return g.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function Bs(t){Ve(!1)}function qI(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Vi.Pop,navigator:s,static:o=!1,future:a}=t;qa()&&Ve(!1);let l=e.replace(/^\/*/,"/"),c=g.useMemo(()=>({basename:l,navigator:s,static:o,future:zc({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=xo(r));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:m="default"}=r,y=g.useMemo(()=>{let x=Ta(u,l);return x==null?null:{location:{pathname:x,search:d,hash:f,state:h,key:m},navigationType:i}},[l,u,d,f,h,m,i]);return y==null?null:g.createElement(ui.Provider,{value:c},g.createElement(vp.Provider,{children:n,value:y}))}function a2(t){let{children:e,location:n}=t;return RI(t0(e),n)}new Promise(()=>{});function t0(t,e){e===void 0&&(e=[]);let n=[];return g.Children.forEach(t,(r,i)=>{if(!g.isValidElement(r))return;let s=[...e,i];if(r.type===g.Fragment){n.push.apply(n,t0(r.props.children,s));return}r.type!==Bs&&Ve(!1),!r.props.index||!r.props.children||Ve(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=t0(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bf(){return Bf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bf.apply(this,arguments)}function l2(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function JI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function YI(t,e){return t.button===0&&(!e||e==="_self")&&!JI(t)}const XI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],QI=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ZI="6";try{window.__reactRouterVersion=ZI}catch{}const eL=g.createContext({isTransitioning:!1}),tL="startTransition",Lb=df[tL];function nL(t){let{basename:e,children:n,future:r,window:i}=t,s=g.useRef();s.current==null&&(s.current=oI({window:i,v5Compat:!0}));let o=s.current,[a,l]=g.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=g.useCallback(d=>{c&&Lb?Lb(()=>l(d)):l(d)},[l,c]);return g.useLayoutEffect(()=>o.listen(u),[o,u]),g.useEffect(()=>GI(r),[r]),g.createElement(qI,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const rL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sL=g.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,f=l2(e,XI),{basename:h}=g.useContext(ui),m,y=!1;if(typeof c=="string"&&iL.test(c)&&(m=c,rL))try{let b=new URL(window.location.href),k=c.startsWith("//")?new URL(b.protocol+c):new URL(c),S=Ta(k.pathname,h);k.origin===b.origin&&S!=null?c=S+k.search+k.hash:y=!0}catch{}let x=jI(c,{relative:i}),v=lL(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function w(b){r&&r(b),b.defaultPrevented||v(b)}return g.createElement("a",Bf({},f,{href:m||x,onClick:y||s?r:w,ref:n,target:l}))}),oL=g.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,d=l2(e,QI),f=xp(l,{relative:d.relative}),h=wo(),m=g.useContext(n2),{navigator:y,basename:x}=g.useContext(ui),v=m!=null&&cL(f)&&c===!0,w=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,b=h.pathname,k=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(b=b.toLowerCase(),k=k?k.toLowerCase():null,w=w.toLowerCase()),k&&x&&(k=Ta(k,x)||k);const S=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let C=b===w||!o&&b.startsWith(w)&&b.charAt(S)==="/",E=k!=null&&(k===w||!o&&k.startsWith(w)&&k.charAt(w.length)==="/"),T={isActive:C,isPending:E,isTransitioning:v},P=C?r:void 0,N;typeof s=="function"?N=s(T):N=[s,C?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(T):a;return g.createElement(sL,Bf({},d,{"aria-current":P,className:N,ref:n,style:M,to:l,viewTransition:c}),typeof u=="function"?u(T):u)});var n0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(n0||(n0={}));var $b;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($b||($b={}));function aL(t){let e=g.useContext(yp);return e||Ve(!1),e}function lL(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=$r(),c=wo(),u=xp(t,{relative:o});return g.useCallback(d=>{if(YI(d,n)){d.preventDefault();let f=r!==void 0?r:If(c)===If(u);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function cL(t,e){e===void 0&&(e={});let n=g.useContext(eL);n==null&&Ve(!1);let{basename:r}=aL(n0.useViewTransitionState),i=xp(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ta(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ta(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Lf(i.pathname,o)!=null||Lf(i.pathname,s)!=null}let uL={data:""},dL=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||uL,fL=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,hL=/\/\*[^]*?\*\/|  +/g,Fb=/\n+/g,Ri=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Ri(o,s):s+"{"+Ri(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Ri(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Ri.p?Ri.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Vr={},c2=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+c2(t[n]);return e}return t},pL=(t,e,n,r,i)=>{let s=c2(t),o=Vr[s]||(Vr[s]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(s));if(!Vr[o]){let l=s!==t?t:(c=>{let u,d,f=[{}];for(;u=fL.exec(c.replace(hL,""));)u[4]?f.shift():u[3]?(d=u[3].replace(Fb," ").trim(),f.unshift(f[0][d]=f[0][d]||{})):f[0][u[1]]=u[2].replace(Fb," ").trim();return f[0]})(t);Vr[o]=Ri(i?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Vr.g?Vr.g:null;return n&&(Vr.g=Vr[o]),((l,c,u,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(Vr[o],e,r,a),o},mL=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Ri(a,""):a===!1?"":a}return r+i+(o??"")},"");function wp(t){let e=this||{},n=t.call?t(e.p):t;return pL(n.unshift?n.raw?mL(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,dL(e.target),e.g,e.o,e.k)}let u2,r0,i0;wp.bind({g:1});let ai=wp.bind({k:1});function gL(t,e,n,r){Ri.p=e,u2=t,r0=n,i0=r}function vs(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;n.p=Object.assign({theme:r0&&r0()},a),n.o=/ *go\d+/.test(l),a.className=wp.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),i0&&c[0]&&i0(a),u2(c,a)}return i}}var yL=t=>typeof t=="function",Vf=(t,e)=>yL(t)?t(e):t,vL=(()=>{let t=0;return()=>(++t).toString()})(),d2=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),xL=20,Jd=new Map,wL=1e3,Bb=t=>{if(Jd.has(t))return;let e=setTimeout(()=>{Jd.delete(t),bo({type:4,toastId:t})},wL);Jd.set(t,e)},bL=t=>{let e=Jd.get(t);e&&clearTimeout(e)},s0=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,xL)};case 1:return e.toast.id&&bL(e.toast.id),{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return t.toasts.find(s=>s.id===n.id)?s0(t,{type:1,toast:n}):s0(t,{type:0,toast:n});case 3:let{toastId:r}=e;return r?Bb(r):t.toasts.forEach(s=>{Bb(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},Yd=[],Xd={toasts:[],pausedAt:void 0},bo=t=>{Xd=s0(Xd,t),Yd.forEach(e=>{e(Xd)})},kL={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},SL=(t={})=>{let[e,n]=g.useState(Xd);g.useEffect(()=>(Yd.push(n),()=>{let i=Yd.indexOf(n);i>-1&&Yd.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o;return{...t,...t[i.type],...i,duration:i.duration||((s=t[i.type])==null?void 0:s.duration)||(t==null?void 0:t.duration)||kL[i.type],style:{...t.style,...(o=t[i.type])==null?void 0:o.style,...i.style}}});return{...e,toasts:r}},CL=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||vL()}),vu=t=>(e,n)=>{let r=CL(e,t,n);return bo({type:2,toast:r}),r.id},Bt=(t,e)=>vu("blank")(t,e);Bt.error=vu("error");Bt.success=vu("success");Bt.loading=vu("loading");Bt.custom=vu("custom");Bt.dismiss=t=>{bo({type:3,toastId:t})};Bt.remove=t=>bo({type:4,toastId:t});Bt.promise=(t,e,n)=>{let r=Bt.loading(e.loading,{...n,...n==null?void 0:n.loading});return t.then(i=>(Bt.success(Vf(e.success,i),{id:r,...n,...n==null?void 0:n.success}),i)).catch(i=>{Bt.error(Vf(e.error,i),{id:r,...n,...n==null?void 0:n.error})}),t};var EL=(t,e)=>{bo({type:1,toast:{id:t,height:e}})},TL=()=>{bo({type:5,time:Date.now()})},NL=t=>{let{toasts:e,pausedAt:n}=SL(t);g.useEffect(()=>{if(n)return;let s=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(s-a.createdAt);if(l<0){a.visible&&Bt.dismiss(a.id);return}return setTimeout(()=>Bt.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,n]);let r=g.useCallback(()=>{n&&bo({type:6,time:Date.now()})},[n]),i=g.useCallback((s,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:c}=o||{},u=e.filter(h=>(h.position||c)===(s.position||c)&&h.height),d=u.findIndex(h=>h.id===s.id),f=u.filter((h,m)=>m<d&&h.visible).length;return u.filter(h=>h.visible).slice(...a?[f+1]:[0,f]).reduce((h,m)=>h+(m.height||0)+l,0)},[e]);return{toasts:e,handlers:{updateHeight:EL,startPause:TL,endPause:r,calculateOffset:i}}},ML=ai`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,PL=ai`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,OL=ai`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,jL=vs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ML} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${PL} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${OL} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,AL=ai`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,DL=vs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${AL} 1s linear infinite;
`,RL=ai`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,_L=ai`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,IL=vs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${RL} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${_L} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,LL=vs("div")`
  position: absolute;
`,$L=vs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,FL=ai`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,BL=vs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${FL} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,VL=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?g.createElement(BL,null,e):e:n==="blank"?null:g.createElement($L,null,g.createElement(DL,{...r}),n!=="loading"&&g.createElement(LL,null,n==="error"?g.createElement(jL,{...r}):g.createElement(IL,{...r})))},zL=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,UL=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,HL="0%{opacity:0;} 100%{opacity:1;}",WL="0%{opacity:1;} 100%{opacity:0;}",KL=vs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,GL=vs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,qL=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=d2()?[HL,WL]:[zL(n),UL(n)];return{animation:e?`${ai(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ai(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},JL=g.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?qL(t.position||e||"top-center",t.visible):{opacity:0},s=g.createElement(VL,{toast:t}),o=g.createElement(GL,{...t.ariaProps},Vf(t.message,t));return g.createElement(KL,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):g.createElement(g.Fragment,null,s,o))});gL(g.createElement);var YL=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=g.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return g.createElement("div",{ref:s,className:e,style:n},i)},XL=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:d2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},QL=wp`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ld=16,ZL=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:a,handlers:l}=NL(n);return g.createElement("div",{style:{position:"fixed",zIndex:9999,top:ld,left:ld,right:ld,bottom:ld,pointerEvents:"none",...s},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(c=>{let u=c.position||e,d=l.calculateOffset(c,{reverseOrder:t,gutter:r,defaultPosition:e}),f=XL(u,d);return g.createElement(YL,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?QL:"",style:f},c.type==="custom"?Vf(c.message,c):i?i(c):g.createElement(JL,{toast:c,position:u}))}))},ge=Bt;async function e$(){const e=document.cookie.split(";").map(u=>u.trim().split("=")).reduce((u,[d,f])=>(u[d]=f,u),{}).accesstoken;if(!e)throw new Error("Missing 'accesstoken' or 'hidden_accesstoken' cookies");const n=await fetch(`https://app.socialhub.io/api2/sb-auth?accesstoken=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({addon:"idea-board-mubashir"}),credentials:"include"});if(console.log("userInfoRes : ",n),!n.ok)throw new Error("Failed to fetch user info from SocialHub");const r=await n.json();console.log("userInfoData : ",r);const i=await fetch(`https://app.socialhub.io/api2/teams?accesstoken=${e}`,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(!i.ok)throw new Error("Failed to fetch team info from SocialHub");const s=await i.json(),o=await fetch(`https://app.socialhub.io/api2/users?accesstoken=${e}`,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(!o.ok)throw new Error("Failed to fetch user-users info from SocialHub");const a=await o.json(),l=await fetch(`https://app.socialhub.io/api2/channels?accesstoken=${e}`,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(!l.ok)throw new Error("Failed to fetch user-channels info from SocialHub");const c=await l.json();return{userInfo:r,userTeams:s,userUsers:a,userChannels:c}}const t$="modulepreload",n$=function(t){return"/"+t},Vb={},Na=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=n$(l),l in Vb)return;Vb[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":t$,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},r$=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Na(async()=>{const{default:r}=await Promise.resolve().then(()=>Ja);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Sx extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class i$ extends Sx{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class s$ extends Sx{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class o$ extends Sx{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var o0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(o0||(o0={}));var a$=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class l${constructor(e,{headers:n={},customFetch:r,region:i=o0.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=r$(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return a$(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(m=>{throw new i$(m)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new s$(u);if(!u.ok)throw new o$(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),h;return f==="application/json"?h=yield u.json():f==="application/octet-stream"?h=yield u.blob():f==="text/event-stream"?h=u:f==="multipart/form-data"?h=yield u.formData():h=yield u.text(),{data:h,error:null}}catch(i){return{data:null,error:i}}})}}var cn={},Cx={},bp={},xu={},kp={},Sp={},c$=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ma=c$();const u$=Ma.fetch,f2=Ma.fetch.bind(Ma),h2=Ma.Headers,d$=Ma.Request,f$=Ma.Response,Ja=Object.freeze(Object.defineProperty({__proto__:null,Headers:h2,Request:d$,Response:f$,default:f2,fetch:u$},Symbol.toStringTag,{value:"Module"})),h$=DD(Ja);var Cp={};Object.defineProperty(Cp,"__esModule",{value:!0});class p$ extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}Cp.default=p$;var p2=Gn&&Gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sp,"__esModule",{value:!0});const m$=p2(h$),g$=p2(Cp);let y$=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=m$.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,u=null,d=null,f=s.status,h=s.statusText;if(s.ok){if(this.method!=="HEAD"){const v=await s.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&x&&x.length>1&&(d=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,f=406,h="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await s.text();try{c=JSON.parse(y),Array.isArray(c)&&s.status===404&&(u=[],c=null,f=200,h="OK")}catch{s.status===404&&y===""?(f=204,h="No Content"):c={message:y}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,h="OK"),c&&this.shouldThrowOnError)throw new g$.default(c)}return{error:c,data:u,count:d,status:f,statusText:h}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}};Sp.default=y$;var v$=Gn&&Gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kp,"__esModule",{value:!0});const x$=v$(Sp);let w$=class extends x$.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};kp.default=w$;var b$=Gn&&Gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xu,"__esModule",{value:!0});const k$=b$(kp);let S$=class extends k$.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};xu.default=S$;var C$=Gn&&Gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bp,"__esModule",{value:!0});const Cl=C$(xu);let E$=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Cl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Cl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Cl.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new Cl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Cl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};bp.default=E$;var Ep={},Tp={};Object.defineProperty(Tp,"__esModule",{value:!0});Tp.version=void 0;Tp.version="0.0.0-automated";Object.defineProperty(Ep,"__esModule",{value:!0});Ep.DEFAULT_HEADERS=void 0;const T$=Tp;Ep.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${T$.version}`};var m2=Gn&&Gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cx,"__esModule",{value:!0});const N$=m2(bp),M$=m2(xu),P$=Ep;let O$=class g2{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},P$.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new N$.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new g2(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",l=n);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new M$.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Cx.default=O$;var Ya=Gn&&Gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cn,"__esModule",{value:!0});cn.PostgrestError=cn.PostgrestBuilder=cn.PostgrestTransformBuilder=cn.PostgrestFilterBuilder=cn.PostgrestQueryBuilder=cn.PostgrestClient=void 0;const y2=Ya(Cx);cn.PostgrestClient=y2.default;const v2=Ya(bp);cn.PostgrestQueryBuilder=v2.default;const x2=Ya(xu);cn.PostgrestFilterBuilder=x2.default;const w2=Ya(kp);cn.PostgrestTransformBuilder=w2.default;const b2=Ya(Sp);cn.PostgrestBuilder=b2.default;const k2=Ya(Cp);cn.PostgrestError=k2.default;var j$=cn.default={PostgrestClient:y2.default,PostgrestQueryBuilder:v2.default,PostgrestFilterBuilder:x2.default,PostgrestTransformBuilder:w2.default,PostgrestBuilder:b2.default,PostgrestError:k2.default};const{PostgrestClient:A$,PostgrestQueryBuilder:Lee,PostgrestFilterBuilder:$ee,PostgrestTransformBuilder:Fee,PostgrestBuilder:Bee}=j$,D$="2.10.7",R$={"X-Client-Info":`realtime-js/${D$}`},_$="1.0.0",S2=1e4,I$=1e3;var da;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(da||(da={}));var wn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(wn||(wn={}));var rr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(rr||(rr={}));var a0;(function(t){t.websocket="websocket"})(a0||(a0={}));var Ds;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ds||(Ds={}));class L${constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class C2{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Oe||(Oe={}));const zb=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=$$(o,t,e,i),s),{})},$$=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?E2(s,o):l0(o)},E2=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return z$(e,n)}switch(t){case Oe.bool:return F$(e);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return B$(e);case Oe.json:case Oe.jsonb:return V$(e);case Oe.timestamp:return U$(e);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return l0(e);default:return l0(e)}},l0=t=>t,F$=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},B$=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},V$=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},z$=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>E2(e,a))}return t},U$=t=>typeof t=="string"?t.replace(" ","T"):t,T2=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Gm{constructor(e,n,r={},i=S2){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ub;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ub||(Ub={}));class tc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tc.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=tc.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=tc.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=s[c];if(d){const f=u.map(x=>x.presence_ref),h=d.map(x=>x.presence_ref),m=u.filter(x=>h.indexOf(x.presence_ref)<0),y=d.filter(x=>f.indexOf(x.presence_ref)<0);m.length>0&&(a[c]=m),y.length>0&&(l[c]=y)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(h=>h.presence_ref),f=u.filter(h=>d.indexOf(h.presence_ref)<0);e[a].unshift(...f)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hb;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Hb||(Hb={}));var Wb;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Wb||(Wb={}));var Kb;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Kb||(Kb={}));class Ex{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=wn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Gm(this,rr.join,this.params,this.timeout),this.rejoinTimer=new C2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=wn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rr.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new tc(this),this.broadcastEndpointURL=T2(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const l={},c={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:u})=>{var d;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,h=(d=f==null?void 0:f.length)!==null&&d!==void 0?d:0,m=[];for(let y=0;y<h;y++){const x=f[y],{filter:{event:v,schema:w,table:b,filter:k}}=x,S=u&&u[y];if(S&&S.event===v&&S.schema===w&&S.table===b&&S.filter===k)m.push(Object.assign(Object.assign({},x),{id:S.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=wn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new Gm(this,rr.leave,{},e);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Gm(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=rr;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(h=>{var m,y,x;return((m=h.filter)===null||m===void 0?void 0:m.event)==="*"||((x=(y=h.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(h=>h.callback(f,r)):(s=this.bindings[o])===null||s===void 0||s.filter(h=>{var m,y,x,v,w,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const k=h.id,S=(m=h.filter)===null||m===void 0?void 0:m.event;return k&&((y=n.ids)===null||y===void 0?void 0:y.includes(k))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const k=(w=(v=h==null?void 0:h.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return k==="*"||k===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:y,table:x,commit_timestamp:v,type:w,errors:b}=m;f=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:v,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(m))}h.callback(f,r)})}_isClosed(){return this.state===wn.closed}_isJoined(){return this.state===wn.joined}_isJoining(){return this.state===wn.joining}_isLeaving(){return this.state===wn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Ex.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(rr.close,{},e)}_onError(e){this._on(rr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=zb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=zb(e.columns,e.old_record)),n}}const H$=()=>{},W$=typeof WebSocket<"u",K$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class G${constructor(e,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=R$,this.params={},this.timeout=S2,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=H$,this.conn=null,this.sendBuffer=[],this.serializer=new L$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Na(async()=>{const{default:l}=await Promise.resolve().then(()=>Ja);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${a0.websocket}`,this.httpEndpoint=T2(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new C2(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(W$){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new q$(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Na(async()=>{const{default:e}=await import("./browser-PEiJmL6w.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case da.connecting:return Ds.Connecting;case da.open:return Ds.Open;case da.closing:return Ds.Closing;default:return Ds.Closed}}isConnected(){return this.connectionState()===Ds.Open}channel(e,n={config:{}}){const r=new Ex(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(n=>{e&&n.updateJoinPayload({access_token:e}),n.joinedOnce&&n._isJoined()&&n._push(rr.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:_$}))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;(o&&o===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(rr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(I$,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([K$],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class q${constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=da.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Tx extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ft(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class J$ extends Tx{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class c0 extends Tx{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Y$=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const N2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Na(async()=>{const{default:r}=await Promise.resolve().then(()=>Ja);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},X$=()=>Y$(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Na(()=>Promise.resolve().then(()=>Ja),void 0)).Response:Response}),u0=t=>{if(Array.isArray(t))return t.map(n=>u0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=u0(r)}),e};var ko=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const qm=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Q$=(t,e,n)=>ko(void 0,void 0,void 0,function*(){const r=yield X$();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new J$(qm(i),t.status||500))}).catch(i=>{e(new c0(qm(i),i))}):e(new c0(qm(t),t))}),Z$=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function wu(t,e,n,r,i,s){return ko(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,Z$(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Q$(l,a,r))})})}function zf(t,e,n,r){return ko(this,void 0,void 0,function*(){return wu(t,"GET",e,n,r)})}function Ti(t,e,n,r,i){return ko(this,void 0,void 0,function*(){return wu(t,"POST",e,r,i,n)})}function e3(t,e,n,r,i){return ko(this,void 0,void 0,function*(){return wu(t,"PUT",e,r,i,n)})}function t3(t,e,n,r){return ko(this,void 0,void 0,function*(){return wu(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function M2(t,e,n,r,i){return ko(this,void 0,void 0,function*(){return wu(t,"DELETE",e,r,i,n)})}var an=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const n3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class r3{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=N2(i)}uploadOrUpdate(e,n,r,i){return an(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},Gb),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield d.json();return d.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(s){if(ft(s))return{data:null,error:s};throw s}})}upload(e,n,r){return an(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return an(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:Gb.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),f=yield d.json();return d.ok?{data:{path:s,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(ft(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return an(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield Ti(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new Tx("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}})}update(e,n,r){return an(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return an(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(ft(i))return{data:null,error:i};throw i}})}copy(e,n,r){return an(this,void 0,void 0,function*(){try{return{data:{path:(yield Ti(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(ft(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return an(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Ti(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(ft(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return an(this,void 0,void 0,function*(){try{const i=yield Ti(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(ft(i))return{data:null,error:i};throw i}})}download(e,n){return an(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield zf(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ft(a))return{data:null,error:a};throw a}})}info(e){return an(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield zf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:u0(r),error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}})}exists(e){return an(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield t3(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ft(r)&&r instanceof c0){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return an(this,void 0,void 0,function*(){try{return{data:yield M2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(ft(n))return{data:null,error:n};throw n}})}list(e,n,r){return an(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},n3),n),{prefix:e||""});return{data:yield Ti(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(ft(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const i3="2.7.1",s3={"X-Client-Info":`storage-js/${i3}`};var Oo=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class o3{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},s3),n),this.fetch=N2(r)}listBuckets(){return Oo(this,void 0,void 0,function*(){try{return{data:yield zf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ft(e))return{data:null,error:e};throw e}})}getBucket(e){return Oo(this,void 0,void 0,function*(){try{return{data:yield zf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(ft(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Oo(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Oo(this,void 0,void 0,function*(){try{return{data:yield e3(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Oo(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ft(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Oo(this,void 0,void 0,function*(){try{return{data:yield M2(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(ft(n))return{data:null,error:n};throw n}})}}class a3 extends o3{constructor(e,n={},r){super(e,n,r)}from(e){return new r3(this.url,this.headers,e,this.fetch)}}const l3="2.46.1";let Ll="";typeof Deno<"u"?Ll="deno":typeof document<"u"?Ll="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ll="react-native":Ll="node";const c3={"X-Client-Info":`supabase-js-${Ll}/${l3}`},u3={headers:c3},d3={schema:"public"},f3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},h3={};var p3=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const m3=t=>{let e;return t?e=t:typeof fetch>"u"?e=f2:e=fetch,(...n)=>e(...n)},g3=()=>typeof Headers>"u"?h2:Headers,y3=(t,e,n)=>{const r=m3(n),i=g3();return(s,o)=>p3(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};var v3=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function x3(t){return t.replace(/\/$/,"")}function w3(t,e){const{db:n,auth:r,realtime:i,global:s}=t,{db:o,auth:a,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s),accessToken:()=>v3(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const P2="2.65.1",b3="http://localhost:9999",k3="supabase.auth.token",S3={"X-Client-Info":`gotrue-js/${P2}`},qb=10,d0="X-Supabase-Api-Version",O2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function C3(t){return Math.round(Date.now()/1e3)+t}function E3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Zn=()=>typeof document<"u",Es={tested:!1,writable:!1},nc=()=>{if(!Zn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Es.tested)return Es.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Es.tested=!0,Es.writable=!0}catch{Es.tested=!0,Es.writable=!1}return Es.writable};function Jm(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const j2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Na(async()=>{const{default:r}=await Promise.resolve().then(()=>Ja);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},T3=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",A2=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},cd=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ud=async(t,e)=>{await t.removeItem(e)};function N3(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,s,o,a,l,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)o=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),r=o<<2|a>>4,i=(a&15)<<4|l>>2,s=(l&3)<<6|c,n=n+String.fromCharCode(r),l!=64&&i!=0&&(n=n+String.fromCharCode(i)),c!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class Np{constructor(){this.promise=new Np.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Np.promiseConstructor=Promise;function Jb(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(N3(r))}async function M3(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function P3(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function O3(t){return("0"+t.toString(16)).substr(-2)}function j3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,O3).join("")}async function A3(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function D3(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function R3(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await A3(t);return D3(n)}async function jo(t,e,n=!1){const r=j3();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await A2(t,`${e}-code-verifier`,i);const s=await R3(r);return[s,r===s?"plain":"s256"]}const _3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function I3(t){const e=t.headers.get(d0);if(!e||!e.match(_3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Nx extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ue(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class L3 extends Nx{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function $3(t){return ue(t)&&t.name==="AuthApiError"}class D2 extends Nx{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class So extends Nx{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class wi extends So{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function F3(t){return ue(t)&&t.name==="AuthSessionMissingError"}class Ym extends So{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class dd extends So{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class fd extends So{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Yb extends So{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class f0 extends So{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Xm(t){return ue(t)&&t.name==="AuthRetryableFetchError"}class Xb extends So{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var B3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Os=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),V3=[502,503,504];async function Qb(t){var e;if(!T3(t))throw new f0(Os(t),0);if(V3.includes(t.status))throw new f0(Os(t),t.status);let n;try{n=await t.json()}catch(s){throw new D2(Os(s),s)}let r;const i=I3(t);if(i&&i.getTime()>=O2["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Xb(Os(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new wi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Xb(Os(n),t.status,n.weak_password.reasons);throw new L3(Os(n),t.status||500,r)}const z3=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ve(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[d0]||(s[d0]=O2["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await U3(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function U3(t,e,n,r,i,s){const o=z3(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new f0(Os(l),0)}if(a.ok||await Qb(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Qb(l)}}function bi(t){var e;let n=null;G3(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=C3(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Zb(t){const e=bi(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function _i(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function H3(t){return{data:t,error:null}}function W3(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=B3(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function K3(t){return t}function G3(t){return t.access_token&&t.refresh_token&&t.expires_in}var q3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class J3{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=j2(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_i})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=q3(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:W3,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ue(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_i})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:K3});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(m.split(";")[1].split("=")[1]);c[`${x}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(ue(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_i})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:_i})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:_i})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}}const Y3={getItem:t=>nc()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{nc()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{nc()&&globalThis.localStorage.removeItem(t)}};function ek(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function X3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ao={debug:!!(globalThis&&nc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class R2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Q3 extends R2{}async function Z3(t,e,n){Ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ao.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Q3(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ao.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}X3();const e4={url:b3,storageKey:k3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:S3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},El=30*1e3,tk=3;async function nk(t,e,n){return await n()}class Uc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Uc.nextInstanceID,Uc.nextInstanceID+=1,this.instanceID>0&&Zn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},e4),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new J3({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=j2(i.fetch),this.lock=i.lock||nk,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Zn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Z3:this.lock=nk,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:nc()?this.storage=Y3:(this.memoryStorage={},this.storage=ek(this.memoryStorage)):(this.memoryStorage={},this.storage=ek(this.memoryStorage)),Zn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${P2}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=Zn()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.code)==="identity_already_exists"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:s}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return ue(e)?{error:e}:{error:new D2("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:bi}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:u,password:d,options:f}=e;let h=null,m=null;this.flowType==="pkce"&&([h,m]=await jo(this.storage,this.storageKey)),s=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:m},xform:bi})}else if("phone"in e){const{phone:u,password:d,options:f}=e;s=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:bi})}else throw new dd("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Zb})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Zb})}else throw new dd("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ym}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await cd(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:bi});if(await ud(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Ym}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(ue(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:bi}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ym}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await jo(this.storage,this.storageKey));const{error:d}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new dd("You must provide either an email or phone number.")}catch(a){if(ue(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:bi});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await jo(this.storage,this.storageKey)),await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:H3})}catch(s){if(ue(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new wi;const{error:i}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(ue(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new dd("You must provide either an email or phone number and a type")}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await cd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_i}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new wi}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:_i})})}catch(n){if(ue(n))return F3(n)&&(await this._removeSession(),await ud(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new wi;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await jo(this.storage,this.storageKey));const{data:c,error:u}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:_i});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Jb(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new wi;const n=Date.now()/1e3;let r=n,i=!0,s=null;const o=Jb(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(ue(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new wi;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e){try{if(!Zn())throw new fd("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new fd("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Yb("Not a valid PKCE flow url.");const n=Jm(window.location.href);if(e){if(!n.code)throw new Yb("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(n.code);if(b)throw b;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:w.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new fd(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=n;if(!s||!a||!o||!c)throw new fd("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const h=f-u;h*1e3<=El&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const m=f-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,u);const{data:y,error:x}=await this._getUser(s);if(x)throw x;const v={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:n.type},error:null}}catch(n){if(ue(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const e=Jm(window.location.href);return!!(Zn()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Jm(window.location.href),n=await cd(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!($3(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ud(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=E3(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await jo(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(ue(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:d,error:f}=s;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",h,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Zn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ue(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await P3(async i=>(i>0&&await M3(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:bi})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Xm(s)&&Date.now()+o-r<El})}catch(r){if(this._debug(n,"error",r),ue(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Zn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await cd(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+qb;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${qb}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Xm(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new wi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Np;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new wi;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),ue(s)){const o={session:null,error:s};return Xm(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await A2(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ud(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Zn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),El);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/El);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${El}ms, refresh threshold is ${tk} ticks`),i<=tk&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof R2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await jo(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(ue(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ue(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}Uc.nextInstanceID=0;const t4=Uc;class n4 extends t4{constructor(e){super(e)}}var r4=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class i4{constructor(e,n,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=x3(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:d3,realtime:h3,auth:Object.assign(Object.assign({},f3),{storageKey:l}),global:u3},u=w3(r??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=y3(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},u.realtime)),this.rest=new A$(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new l$(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new a3(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return r4(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},c,u){var d;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new n4({url:this.authUrl,headers:Object.assign(Object.assign({},f),c),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:(d="Authorization"in this.headers)!==null&&d!==void 0?d:!1})}_initRealtimeClient(e){return new G$(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Mx=(t,e,n)=>new i4(t,e,n),Uf={url:"https://mvmfwkigdnwiuysjlsgn.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im12bWZ3a2lnZG53aXV5c2psc2duIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA0OTA2ODcsImV4cCI6MjA1NjA2NjY4N30.jk3JQhfXS0W7vZI4icnWLWY3T4horTc37WM5J-jisLM"},s4=()=>document.cookie.split(";").map(e=>e.trim().split("=")).reduce((e,[n,r])=>(e[n]=r,e),{}).accesstoken,o4=t=>async(e,n={})=>{try{const r=new URL(e);if(!r.pathname.includes("/rest/v1/"))return fetch(e,n);const i=s4(),s=r.search.substring(1),o=`https://app.socialhub.io/api2/sb-proxy${r.pathname}${s?"?"+s:""}${s?"&":"?"}accesstoken=${i}`;return console.log("Proxying request:",{to:o}),fetch(o,{...n,credentials:"include"})}catch(r){throw console.error("Proxy fetch error:",r),r}},a4=()=>Mx(Uf.url,Uf.anonKey,{auth:{persistSession:!0,detectSessionInUrl:!0},global:{fetch:o4()}});a4();Mx("https://mvmfwkigdnwiuysjlsgn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im12bWZ3a2lnZG53aXV5c2psc2duIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA0OTA2ODcsImV4cCI6MjA1NjA2NjY4N30.jk3JQhfXS0W7vZI4icnWLWY3T4horTc37WM5J-jisLM");let ne;console.log("Using normal Supabase client"),ne=Mx(Uf.url,Uf.anonKey,{auth:{persistSession:!0,autoRefreshToken:!0}});const l4=async(t,e)=>{const{data:n,error:r}=await ne.from("users").update({email_notifications:t}).eq("id",e);return r&&console.error("error",r),n},rk=async t=>{const{data:e,error:n}=await ne.from("users").select("email_notifications").eq("id",t).single();return n&&console.error("error",n),e==null?void 0:e.email_notifications},_2=g.createContext(null);function c4({children:t}){const[e,n]=g.useState(!1),[r,i]=g.useState(null),[s,o]=g.useState(null),[a,l]=g.useState([]),[c,u]=g.useState([]),[d,f]=g.useState([]),[h,m]=g.useState(!0),y=async()=>{const w=await fetch("http://localhost:5000/api/user/userDataSocialHub",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(w.ok){const b=await w.json();console.log("from jwt and all data development: ",b);const k=b.token;await ne.auth.setSession({access_token:k,refresh_token:k});const S=await ne.auth.getUser();o(S.data.user);const C=await rk(S.data.user.id);i({...b.userInfo,userName:`${b.userInfo.firstName}_${b.userInfo.lastName}`,email_preferance:C}),u(b.userTeams);const E=b.userUsers.map(T=>{const P=T.firstName.replace(/\s+/g,""),N=T.lastName.replace(/\s+/g,"");return{...T,userName:`${P}_${N}`}});console.log("after updating users: ",E),l(E),f(b.userChannels),n(!0),m(!1)}else console.error("Failed to generate JWT"),m(!1)},x=async()=>{try{const w=await e$();console.log("from jwt and all data production: ",w);const b=w.userInfo.sbUser;o(b);const k=await rk(b.id);i({...w.userInfo,email_preferance:k}),u(w.userTeams);const S=w.userUsers.map(C=>{const E=C.firstName.replace(/\s+/g,""),T=C.lastName.replace(/\s+/g,"");return{...C,userName:`${E}_${T}`}});console.log("after updating users: ",S),l(S),f(w.userChannels),n(!0)}catch(w){Bt.error(w.message||"An error occurred while fetching data")}finally{m(!1)}};g.useEffect(()=>{console.log("from development"),y()},[]);const v=g.useCallback(async(w,b)=>{try{const S=await(await fetch("http://localhost:5000/api/user/loginSocialHub",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:w,password:b}),credentials:"include"})).json();if(console.log("from social hub login: ",S),!S.success)throw new Error("Login failed");return console.log("from development"),await y(),S.success}catch(k){throw Bt.error("Login failed"),console.error("SocialHub login error:",k),k}},[]);return p.jsx(_2.Provider,{value:{isAuthenticated:e,currentUser:r,login:v,isLoading:h,authUser:s,currentUserUsers:a,currentUserTeams:c,currentUserChannels:d},children:t})}function gr(){const t=g.useContext(_2);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var u4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),G=(t,e)=>{const n=g.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>g.createElement("svg",{ref:u,...u4,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${d4(t)}`,a].join(" "),...c},[...e.map(([d,f])=>g.createElement(d,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=G("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=G("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=G("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=G("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=G("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=G("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=G("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=G("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=G("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=G("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=G("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=G("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=G("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=G("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=G("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=G("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=G("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=G("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=G("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=G("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=G("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=G("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=G("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=G("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=G("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=G("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=G("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=G("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=G("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=G("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=G("KanbanSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 7v7",key:"1x2jlm"}],["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M16 7v9",key:"1hp2iy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=G("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=G("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=G("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=G("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=G("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=G("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=G("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=G("MailOpen",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=G("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=G("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=G("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=G("NotebookText",[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M9.5 8h5",key:"11mslq"}],["path",{d:"M9.5 12H16",key:"ktog6x"}],["path",{d:"M9.5 16H14",key:"p1seyn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=G("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=G("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=G("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=G("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=G("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=G("SquareUserRound",[["path",{d:"M18 21a6 6 0 0 0-12 0",key:"kaz2du"}],["circle",{cx:"12",cy:"11",r:"4",key:"1gt34v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=G("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=G("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=G("Sunrise",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=G("Sunset",[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=G("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=G("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=G("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=G("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Dx=g.createContext({});function Rx(t){const e=g.useRef(null);return e.current===null&&(e.current=t()),e.current}const Op=g.createContext(null),_x=g.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class q4 extends g.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=r instanceof HTMLElement&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function J4({children:t,isPresent:e,anchorX:n}){const r=g.useId(),i=g.useRef(null),s=g.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=g.useContext(_x);return g.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:u,right:d}=s.current;if(e||!i.current||!a||!l)return;const f=n==="left"?`left: ${u}`:`right: ${d}`;i.current.dataset.motionPopId=r;const h=document.createElement("style");return o&&(h.nonce=o),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            ${f}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),p.jsx(q4,{isPresent:e,childRef:i,sizeRef:s,children:g.cloneElement(t,{ref:i})})}const Y4=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a})=>{const l=Rx(X4),c=g.useId(),u=g.useCallback(f=>{l.set(f,!0);for(const h of l.values())if(!h)return;r&&r()},[l,r]),d=g.useMemo(()=>({id:c,initial:e,isPresent:n,custom:i,onExitComplete:u,register:f=>(l.set(f,!1),()=>l.delete(f))}),s?[Math.random(),u]:[n,u]);return g.useMemo(()=>{l.forEach((f,h)=>l.set(h,!1))},[n]),g.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(t=p.jsx(J4,{isPresent:n,anchorX:a,children:t})),p.jsx(Op.Provider,{value:d,children:t})};function X4(){return new Map}function H2(t=!0){const e=g.useContext(Op);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=g.useId();g.useEffect(()=>{t&&i(s)},[t]);const o=g.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const pd=t=>t.key||"";function ok(t){const e=[];return g.Children.forEach(t,n=>{g.isValidElement(n)&&e.push(n)}),e}const Ix=typeof window<"u",W2=Ix?g.useLayoutEffect:g.useEffect,ct=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left"})=>{const[l,c]=H2(o),u=g.useMemo(()=>ok(t),[t]),d=o&&!l?[]:u.map(pd),f=g.useRef(!0),h=g.useRef(u),m=Rx(()=>new Map),[y,x]=g.useState(u),[v,w]=g.useState(u);W2(()=>{f.current=!1,h.current=u;for(let S=0;S<v.length;S++){const C=pd(v[S]);d.includes(C)?m.delete(C):m.get(C)!==!0&&m.set(C,!1)}},[v,d.length,d.join("-")]);const b=[];if(u!==y){let S=[...u];for(let C=0;C<v.length;C++){const E=v[C],T=pd(E);d.includes(T)||(S.splice(C,0,E),b.push(E))}return s==="wait"&&b.length&&(S=b),w(ok(S)),x(u),null}const{forceRender:k}=g.useContext(Dx);return p.jsx(p.Fragment,{children:v.map(S=>{const C=pd(S),E=o&&!l?!1:u===v||d.includes(C),T=()=>{if(m.has(C))m.set(C,!0);else return;let P=!0;m.forEach(N=>{N||(P=!1)}),P&&(k==null||k(),w(h.current),o&&(c==null||c()),r&&r())};return p.jsx(Y4,{isPresent:E,initial:!f.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,onExitComplete:E?void 0:T,anchorX:a,children:S},C)})})},En=t=>t;let p0=En;function Lx(t){let e;return()=>(e===void 0&&(e=t()),e)}const ja=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Zr=t=>t*1e3,ei=t=>t/1e3,Q4={skipAnimations:!1,useManualTiming:!1},md=["read","resolveKeyframes","update","preRender","render","postRender"],ak={value:null,addProjectionMetrics:null};function Z4(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(d){o.has(d)&&(u.schedule(d),t()),l++,d(a)}const u={schedule:(d,f=!1,h=!1)=>{const y=h&&i?n:r;return f&&o.add(d),y.has(d)||y.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(a=d,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),e&&ak.value&&ak.value.frameloop[e].push(l),l=0,n.clear(),i=!1,s&&(s=!1,u.process(d))}};return u}const eF=40;function K2(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=md.reduce((v,w)=>(v[w]=Z4(s,e?w:void 0),v),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:f}=o,h=()=>{const v=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,eF),1),i.timestamp=v,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),d.process(i),f.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(h))},m=()=>{n=!0,r=!0,i.isProcessing||t(h)};return{schedule:md.reduce((v,w)=>{const b=o[w];return v[w]=(k,S=!1,C=!1)=>(n||m(),b.schedule(k,S,C)),v},{}),cancel:v=>{for(let w=0;w<md.length;w++)o[md[w]].cancel(v)},state:i,steps:o}}const{schedule:Ae,cancel:cs,state:Tt,steps:Zm}=K2(typeof requestAnimationFrame<"u"?requestAnimationFrame:En,!0),G2=g.createContext({strict:!1}),lk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Aa={};for(const t in lk)Aa[t]={isEnabled:e=>lk[t].some(n=>!!e[n])};function tF(t){for(const e in t)Aa[e]={...Aa[e],...t[e]}}const nF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Gf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||nF.has(t)}let q2=t=>!Gf(t);function rF(t){t&&(q2=e=>e.startsWith("on")?!Gf(e):t(e))}try{rF(require("@emotion/is-prop-valid").default)}catch{}function iF(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(q2(i)||n===!0&&Gf(i)||!e&&!Gf(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function sF(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const jp=g.createContext({});function Ap(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Hc(t){return typeof t=="string"||Array.isArray(t)}const $x=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Fx=["initial",...$x];function Dp(t){return Ap(t.animate)||Fx.some(e=>Hc(t[e]))}function J2(t){return!!(Dp(t)||t.variants)}function oF(t,e){if(Dp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Hc(n)?n:void 0,animate:Hc(r)?r:void 0}}return t.inherit!==!1?e:{}}function aF(t){const{initial:e,animate:n}=oF(t,g.useContext(jp));return g.useMemo(()=>({initial:e,animate:n}),[ck(e),ck(n)])}function ck(t){return Array.isArray(t)?t.join(" "):t}const lF=Symbol.for("motionComponentSymbol");function Qo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function cF(t,e,n){return g.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Qo(n)&&(n.current=r))},[e])}const Bx=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),uF="framerAppearId",Y2="data-"+Bx(uF),{schedule:Vx,cancel:Vee}=K2(queueMicrotask,!1),X2=g.createContext({});function dF(t,e,n,r,i){var s,o;const{visualElement:a}=g.useContext(jp),l=g.useContext(G2),c=g.useContext(Op),u=g.useContext(_x).reducedMotion,d=g.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,h=g.useContext(X2);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&fF(d.current,n,i,h);const m=g.useRef(!1);g.useInsertionEffect(()=>{f&&m.current&&f.update(n,c)});const y=n[Y2],x=g.useRef(!!y&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,y))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,y)));return W2(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Vx.render(f.render),x.current&&f.animationState&&f.animationState.animateChanges())}),g.useEffect(()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,y)}),x.current=!1))}),f}function fF(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Q2(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Qo(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function Q2(t){if(t)return t.options.allowProjection!==!1?t.projection:Q2(t.parent)}function hF({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&tF(t);function a(c,u){let d;const f={...g.useContext(_x),...c,layoutId:pF(c)},{isStatic:h}=f,m=aF(c),y=r(c,h);if(!h&&Ix){mF();const x=gF(f);d=x.MeasureLayout,m.visualElement=dF(i,y,f,e,x.ProjectionNode)}return p.jsxs(jp.Provider,{value:m,children:[d&&m.visualElement?p.jsx(d,{visualElement:m.visualElement,...f}):null,n(i,c,cF(y,m.visualElement,u),y,h,m.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=g.forwardRef(a);return l[lF]=i,l}function pF({layoutId:t}){const e=g.useContext(Dx).id;return e&&t!==void 0?e+"-"+t:t}function mF(t,e){g.useContext(G2).strict}function gF(t){const{drag:e,layout:n}=Aa;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Z2=t=>e=>typeof e=="string"&&e.startsWith(t),zx=Z2("--"),yF=Z2("var(--"),Ux=t=>yF(t)?vF.test(t.split("/*")[0].trim()):!1,vF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Wc={};function xF(t){for(const e in t)Wc[e]=t[e],zx(e)&&(Wc[e].isCSSVariable=!0)}const Xa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],To=new Set(Xa);function eM(t,{layout:e,layoutId:n}){return To.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Wc[t]||t==="opacity")}const Vt=t=>!!(t&&t.getVelocity),tM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,li=(t,e,n)=>n>e?e:n<t?t:n,Qa={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Kc={...Qa,transform:t=>li(0,1,t)},gd={...Qa,default:1},Su=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ki=Su("deg"),jr=Su("%"),ie=Su("px"),wF=Su("vh"),bF=Su("vw"),uk={...jr,parse:t=>jr.parse(t)/100,transform:t=>jr.transform(t*100)},kF={borderWidth:ie,borderTopWidth:ie,borderRightWidth:ie,borderBottomWidth:ie,borderLeftWidth:ie,borderRadius:ie,radius:ie,borderTopLeftRadius:ie,borderTopRightRadius:ie,borderBottomRightRadius:ie,borderBottomLeftRadius:ie,width:ie,maxWidth:ie,height:ie,maxHeight:ie,top:ie,right:ie,bottom:ie,left:ie,padding:ie,paddingTop:ie,paddingRight:ie,paddingBottom:ie,paddingLeft:ie,margin:ie,marginTop:ie,marginRight:ie,marginBottom:ie,marginLeft:ie,backgroundPositionX:ie,backgroundPositionY:ie},SF={rotate:ki,rotateX:ki,rotateY:ki,rotateZ:ki,scale:gd,scaleX:gd,scaleY:gd,scaleZ:gd,skew:ki,skewX:ki,skewY:ki,distance:ie,translateX:ie,translateY:ie,translateZ:ie,x:ie,y:ie,z:ie,perspective:ie,transformPerspective:ie,opacity:Kc,originX:uk,originY:uk,originZ:ie},dk={...Qa,transform:Math.round},Hx={...kF,...SF,zIndex:dk,size:ie,fillOpacity:Kc,strokeOpacity:Kc,numOctaves:dk},CF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},EF=Xa.length;function TF(t,e,n){let r="",i=!0;for(let s=0;s<EF;s++){const o=Xa[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=tM(a,Hx[o]);if(!l){i=!1;const u=CF[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Wx(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(To.has(l)){o=!0;continue}else if(zx(l)){i[l]=c;continue}else{const u=tM(c,Hx[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=TF(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const Kx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function nM(t,e,n){for(const r in e)!Vt(e[r])&&!eM(r,n)&&(t[r]=e[r])}function NF({transformTemplate:t},e){return g.useMemo(()=>{const n=Kx();return Wx(n,e,t),Object.assign({},n.vars,n.style)},[e])}function MF(t,e){const n=t.style||{},r={};return nM(r,n,t),Object.assign(r,NF(t,e)),r}function PF(t,e){const n={},r=MF(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const OF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Gx(t){return typeof t!="string"||t.includes("-")?!1:!!(OF.indexOf(t)>-1||/[A-Z]/u.test(t))}const jF={offset:"stroke-dashoffset",array:"stroke-dasharray"},AF={offset:"strokeDashoffset",array:"strokeDasharray"};function DF(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?jF:AF;t[s.offset]=ie.transform(-r);const o=ie.transform(e),a=ie.transform(n);t[s.array]=`${o} ${a}`}function fk(t,e,n){return typeof t=="string"?t:ie.transform(e+n*t)}function RF(t,e,n){const r=fk(e,t.x,t.width),i=fk(n,t.y,t.height);return`${r} ${i}`}function qx(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(Wx(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:h,dimensions:m}=t;f.transform&&(m&&(h.transform=f.transform),delete f.transform),m&&(i!==void 0||s!==void 0||h.transform)&&(h.transformOrigin=RF(m,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&DF(f,o,a,l,!1)}const rM=()=>({...Kx(),attrs:{}}),Jx=t=>typeof t=="string"&&t.toLowerCase()==="svg";function _F(t,e,n,r){const i=g.useMemo(()=>{const s=rM();return qx(s,e,Jx(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};nM(s,t.style,t),i.style={...s,...i.style}}return i}function IF(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(Gx(n)?_F:PF)(r,s,o,n),c=iF(r,typeof n=="string",t),u=n!==g.Fragment?{...c,...l,ref:i}:{},{children:d}=r,f=g.useMemo(()=>Vt(d)?d.get():d,[d]);return g.createElement(n,{...u,children:f})}}function hk(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Yx(t,e,n,r){if(typeof e=="function"){const[i,s]=hk(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=hk(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const m0=t=>Array.isArray(t),LF=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),$F=t=>m0(t)?t[t.length-1]||0:t;function Qd(t){const e=Vt(t)?t.get():t;return LF(e)?e.toValue():e}function FF({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:BF(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const iM=t=>(e,n)=>{const r=g.useContext(jp),i=g.useContext(Op),s=()=>FF(t,e,r,i);return n?s():Rx(s)};function BF(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=Qd(s[f]);let{initial:o,animate:a}=t;const l=Dp(t),c=J2(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!Ap(d)){const f=Array.isArray(d)?d:[d];for(let h=0;h<f.length;h++){const m=Yx(t,f[h]);if(m){const{transitionEnd:y,transition:x,...v}=m;for(const w in v){let b=v[w];if(Array.isArray(b)){const k=u?b.length-1:0;b=b[k]}b!==null&&(i[w]=b)}for(const w in y)i[w]=y[w]}}}return i}function Xx(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(Vt(i[o])||e.style&&Vt(e.style[o])||eM(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}const VF={useVisualState:iM({scrapeMotionValuesFromProps:Xx,createRenderState:Kx})};function sM(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function oM(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const aM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function lM(t,e,n,r){oM(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(aM.has(i)?i:Bx(i),e.attrs[i])}function cM(t,e,n){const r=Xx(t,e,n);for(const i in t)if(Vt(t[i])||Vt(e[i])){const s=Xa.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const pk=["x","y","width","height","cx","cy","r"],zF={useVisualState:iM({scrapeMotionValuesFromProps:cM,createRenderState:rM,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(To.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<pk.length;a++){const l=pk[a];t[l]!==e[l]&&(o=!0)}o&&Ae.read(()=>{sM(n,r),Ae.render(()=>{qx(r,i,Jx(n.tagName),t.transformTemplate),lM(n,r)})})}})};function UF(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Gx(r)?zF:VF,preloadedFeatures:t,useRender:IF(i),createVisualElement:e,Component:r};return hF(o)}}function Gc(t,e,n){const r=t.getProps();return Yx(r,e,n!==void 0?n:r.custom,t)}const HF=Lx(()=>window.ScrollTimeline!==void 0);class WF{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(HF()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class KF extends WF{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Qx(t,e){return t?t[e]||t.default||t:void 0}const g0=2e4;function uM(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<g0;)e+=n,r=t.next(e);return e>=g0?1/0:e}function Zx(t){return typeof t=="function"}function mk(t,e){t.timeline=e,t.onfinish=null}const ew=t=>Array.isArray(t)&&typeof t[0]=="number",GF={linearEasing:void 0};function qF(t,e){const n=Lx(t);return()=>{var r;return(r=GF[e])!==null&&r!==void 0?r:n()}}const qf=qF(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),dM=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(ja(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function fM(t){return!!(typeof t=="function"&&qf()||!t||typeof t=="string"&&(t in y0||qf())||ew(t)||Array.isArray(t)&&t.every(fM))}const Fl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,y0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fl([0,.65,.55,1]),circOut:Fl([.55,0,1,.45]),backIn:Fl([.31,.01,.66,-.59]),backOut:Fl([.33,1.53,.69,.99])};function hM(t,e){if(t)return typeof t=="function"&&qf()?dM(t,e):ew(t)?Fl(t):Array.isArray(t)?t.map(n=>hM(n,e)||y0.easeOut):y0[t]}const er={x:!1,y:!1};function pM(){return er.x||er.y}function JF(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function mM(t,e){const n=JF(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function gk(t){return!(t.pointerType==="touch"||pM())}function YF(t,e,n={}){const[r,i,s]=mM(t,n),o=a=>{if(!gk(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=d=>{gk(d)&&(c(d),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const gM=(t,e)=>e?t===e?!0:gM(t,e.parentElement):!1,tw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,XF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QF(t){return XF.has(t.tagName)||t.tabIndex!==-1}const Bl=new WeakSet;function yk(t){return e=>{e.key==="Enter"&&t(e)}}function eg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ZF=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=yk(()=>{if(Bl.has(n))return;eg(n,"down");const i=yk(()=>{eg(n,"up")}),s=()=>eg(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function vk(t){return tw(t)&&!pM()}function e5(t,e,n={}){const[r,i,s]=mM(t,n),o=a=>{const l=a.currentTarget;if(!vk(a)||Bl.has(l))return;Bl.add(l);const c=e(l,a),u=(h,m)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!vk(h)||!Bl.has(l))&&(Bl.delete(l),typeof c=="function"&&c(h,{success:m}))},d=h=>{u(h,n.useGlobalTarget||gM(l,h.target))},f=h=>{u(h,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{!QF(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>ZF(c,i),i)}),s}function t5(t){return t==="x"||t==="y"?er[t]?null:(er[t]=!0,()=>{er[t]=!1}):er.x||er.y?null:(er.x=er.y=!0,()=>{er.x=er.y=!1})}const yM=new Set(["width","height","top","left","right","bottom",...Xa]);let Zd;function n5(){Zd=void 0}const Ar={now:()=>(Zd===void 0&&Ar.set(Tt.isProcessing||Q4.useManualTiming?Tt.timestamp:performance.now()),Zd),set:t=>{Zd=t,queueMicrotask(n5)}};function nw(t,e){t.indexOf(e)===-1&&t.push(e)}function rw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class iw{constructor(){this.subscriptions=[]}add(e){return nw(this.subscriptions,e),()=>rw(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function vM(t,e){return e?t*(1e3/e):0}const xk=30,r5=t=>!isNaN(parseFloat(t));class i5{constructor(e,n={}){this.version="12.4.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Ar.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ar.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=r5(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new iw);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ae.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ar.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>xk)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,xk);return vM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qc(t,e){return new i5(t,e)}function s5(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,qc(n))}function o5(t,e){const n=Gc(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=$F(s[o]);s5(t,o,a)}}function a5(t){return!!(Vt(t)&&t.add)}function v0(t,e){const n=t.getValue("willChange");if(a5(n))return n.add(e)}function xM(t){return t.props[Y2]}const wM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,l5=1e-7,c5=12;function u5(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=wM(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>l5&&++a<c5);return o}function Cu(t,e,n,r){if(t===e&&n===r)return En;const i=s=>u5(s,0,1,t,n);return s=>s===0||s===1?s:wM(i(s),e,r)}const bM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,kM=t=>e=>1-t(1-e),SM=Cu(.33,1.53,.69,.99),sw=kM(SM),CM=bM(sw),EM=t=>(t*=2)<1?.5*sw(t):.5*(2-Math.pow(2,-10*(t-1))),ow=t=>1-Math.sin(Math.acos(t)),TM=kM(ow),NM=bM(ow),MM=t=>/^0[^.\s]+$/u.test(t);function d5(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||MM(t):!0}const rc=t=>Math.round(t*1e5)/1e5,aw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function f5(t){return t==null}const h5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lw=(t,e)=>n=>!!(typeof n=="string"&&h5.test(n)&&n.startsWith(t)||e&&!f5(n)&&Object.prototype.hasOwnProperty.call(n,e)),PM=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(aw);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},p5=t=>li(0,255,t),tg={...Qa,transform:t=>Math.round(p5(t))},Vs={test:lw("rgb","red"),parse:PM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+tg.transform(t)+", "+tg.transform(e)+", "+tg.transform(n)+", "+rc(Kc.transform(r))+")"};function m5(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const x0={test:lw("#"),parse:m5,transform:Vs.transform},Zo={test:lw("hsl","hue"),parse:PM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+jr.transform(rc(e))+", "+jr.transform(rc(n))+", "+rc(Kc.transform(r))+")"},It={test:t=>Vs.test(t)||x0.test(t)||Zo.test(t),parse:t=>Vs.test(t)?Vs.parse(t):Zo.test(t)?Zo.parse(t):x0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Vs.transform(t):Zo.transform(t)},g5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function y5(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(aw))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(g5))===null||n===void 0?void 0:n.length)||0)>0}const OM="number",jM="color",v5="var",x5="var(",wk="${}",w5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Jc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(w5,l=>(It.test(l)?(r.color.push(s),i.push(jM),n.push(It.parse(l))):l.startsWith(x5)?(r.var.push(s),i.push(v5),n.push(l)):(r.number.push(s),i.push(OM),n.push(parseFloat(l))),++s,wk)).split(wk);return{values:n,split:a,indexes:r,types:i}}function AM(t){return Jc(t).values}function DM(t){const{split:e,types:n}=Jc(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===OM?s+=rc(i[o]):a===jM?s+=It.transform(i[o]):s+=i[o]}return s}}const b5=t=>typeof t=="number"?0:t;function k5(t){const e=AM(t);return DM(t)(e.map(b5))}const us={test:y5,parse:AM,createTransformer:DM,getAnimatableNone:k5},S5=new Set(["brightness","contrast","saturate","opacity"]);function C5(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(aw)||[];if(!r)return t;const i=n.replace(r,"");let s=S5.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const E5=/\b([a-z-]*)\(.*?\)/gu,w0={...us,getAnimatableNone:t=>{const e=t.match(E5);return e?e.map(C5).join(" "):t}},T5={...Hx,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:w0,WebkitFilter:w0},cw=t=>T5[t];function RM(t,e){let n=cw(t);return n!==w0&&(n=us),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const N5=new Set(["auto","none","0"]);function M5(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!N5.has(s)&&Jc(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=RM(n,i)}const bk=t=>t===Qa||t===ie,kk=(t,e)=>parseFloat(t.split(", ")[e]),Sk=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return kk(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?kk(s[1],t):0}},P5=new Set(["x","y","z"]),O5=Xa.filter(t=>!P5.has(t));function j5(t){const e=[];return O5.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Da={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Sk(4,13),y:Sk(5,14)};Da.translateX=Da.x;Da.translateY=Da.y;const Ys=new Set;let b0=!1,k0=!1;function _M(){if(k0){const t=Array.from(Ys).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=j5(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}k0=!1,b0=!1,Ys.forEach(t=>t.complete()),Ys.clear()}function IM(){Ys.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(k0=!0)})}function A5(){IM(),_M()}class uw{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ys.add(this),b0||(b0=!0,Ae.read(IM),Ae.resolveKeyframes(_M))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ys.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ys.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const LM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),D5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function R5(t){const e=D5.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function $M(t,e,n=1){const[r,i]=R5(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return LM(o)?parseFloat(o):o}return Ux(i)?$M(i,e,n+1):i}const FM=t=>e=>e.test(t),_5={test:t=>t==="auto",parse:t=>t},BM=[Qa,ie,jr,ki,bF,wF,_5],Ck=t=>BM.find(FM(t));class VM extends uw{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Ux(c))){const u=$M(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!yM.has(r)||e.length!==2)return;const[i,s]=e,o=Ck(i),a=Ck(s);if(o!==a)if(bk(o)&&bk(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)d5(e[i])&&r.push(i);r.length&&M5(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Da[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Da[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const Ek=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(us.test(t)||t==="0")&&!t.startsWith("url("));function I5(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function L5(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Ek(i,e),a=Ek(s,e);return!o||!a?!1:I5(t)||(n==="spring"||Zx(n))&&r}const $5=t=>t!==null;function Rp(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter($5),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const F5=40;class zM{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ar.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>F5?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&A5(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Ar.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!L5(e,r,i,s))if(o)this.options.duration=0;else{l&&l(Rp(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Fe=(t,e,n)=>t+(e-t)*n;function ng(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function B5({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=ng(l,a,t+1/3),s=ng(l,a,t),o=ng(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Jf(t,e){return n=>n>0?e:t}const rg=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},V5=[x0,Vs,Zo],z5=t=>V5.find(e=>e.test(t));function Tk(t){const e=z5(t);if(!e)return!1;let n=e.parse(t);return e===Zo&&(n=B5(n)),n}const Nk=(t,e)=>{const n=Tk(t),r=Tk(e);if(!n||!r)return Jf(t,e);const i={...n};return s=>(i.red=rg(n.red,r.red,s),i.green=rg(n.green,r.green,s),i.blue=rg(n.blue,r.blue,s),i.alpha=Fe(n.alpha,r.alpha,s),Vs.transform(i))},U5=(t,e)=>n=>e(t(n)),Eu=(...t)=>t.reduce(U5),S0=new Set(["none","hidden"]);function H5(t,e){return S0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function W5(t,e){return n=>Fe(t,e,n)}function dw(t){return typeof t=="number"?W5:typeof t=="string"?Ux(t)?Jf:It.test(t)?Nk:q5:Array.isArray(t)?UM:typeof t=="object"?It.test(t)?Nk:K5:Jf}function UM(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>dw(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function K5(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=dw(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function G5(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const q5=(t,e)=>{const n=us.createTransformer(e),r=Jc(t),i=Jc(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?S0.has(t)&&!i.values.length||S0.has(e)&&!r.values.length?H5(t,e):Eu(UM(G5(r,i),i.values),n):Jf(t,e)};function HM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Fe(t,e,n):dw(t)(t,e)}const J5=5;function WM(t,e,n){const r=Math.max(e-J5,0);return vM(n-t(r),e-r)}const Ke={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ig=.001;function Y5({duration:t=Ke.duration,bounce:e=Ke.bounce,velocity:n=Ke.velocity,mass:r=Ke.mass}){let i,s,o=1-e;o=li(Ke.minDamping,Ke.maxDamping,o),t=li(Ke.minDuration,Ke.maxDuration,ei(t)),o<1?(i=c=>{const u=c*o,d=u*t,f=u-n,h=C0(c,o),m=Math.exp(-d);return ig-f/h*m},s=c=>{const d=c*o*t,f=d*n+n,h=Math.pow(o,2)*Math.pow(c,2)*t,m=Math.exp(-d),y=C0(Math.pow(c,2),o);return(-i(c)+ig>0?-1:1)*((f-h)*m)/y}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-ig+u*d},s=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=Q5(i,s,a);if(t=Zr(t),isNaN(l))return{stiffness:Ke.stiffness,damping:Ke.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const X5=12;function Q5(t,e,n){let r=n;for(let i=1;i<X5;i++)r=r-t(r)/e(r);return r}function C0(t,e){return t*Math.sqrt(1-e*e)}const Z5=["duration","bounce"],eB=["stiffness","damping","mass"];function Mk(t,e){return e.some(n=>t[n]!==void 0)}function tB(t){let e={velocity:Ke.velocity,stiffness:Ke.stiffness,damping:Ke.damping,mass:Ke.mass,isResolvedFromDuration:!1,...t};if(!Mk(t,eB)&&Mk(t,Z5))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*li(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ke.mass,stiffness:i,damping:s}}else{const n=Y5(t);e={...e,...n,mass:Ke.mass},e.isResolvedFromDuration=!0}return e}function KM(t=Ke.visualDuration,e=Ke.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:h}=tB({...n,velocity:-ei(n.velocity||0)}),m=f||0,y=c/(2*Math.sqrt(l*u)),x=o-s,v=ei(Math.sqrt(l/u)),w=Math.abs(x)<5;r||(r=w?Ke.restSpeed.granular:Ke.restSpeed.default),i||(i=w?Ke.restDelta.granular:Ke.restDelta.default);let b;if(y<1){const S=C0(v,y);b=C=>{const E=Math.exp(-y*v*C);return o-E*((m+y*v*x)/S*Math.sin(S*C)+x*Math.cos(S*C))}}else if(y===1)b=S=>o-Math.exp(-v*S)*(x+(m+v*x)*S);else{const S=v*Math.sqrt(y*y-1);b=C=>{const E=Math.exp(-y*v*C),T=Math.min(S*C,300);return o-E*((m+y*v*x)*Math.sinh(T)+S*x*Math.cosh(T))/S}}const k={calculatedDuration:h&&d||null,next:S=>{const C=b(S);if(h)a.done=S>=d;else{let E=0;y<1&&(E=S===0?Zr(m):WM(b,S,C));const T=Math.abs(E)<=r,P=Math.abs(o-C)<=i;a.done=T&&P}return a.value=a.done?o:C,a},toString:()=>{const S=Math.min(uM(k),g0),C=dM(E=>k.next(S*E).value,S,30);return S+"ms "+C}};return k}function Pk({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],f={done:!1,value:d},h=T=>a!==void 0&&T<a||l!==void 0&&T>l,m=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let y=n*e;const x=d+y,v=o===void 0?x:o(x);v!==x&&(y=v-d);const w=T=>-y*Math.exp(-T/r),b=T=>v+w(T),k=T=>{const P=w(T),N=b(T);f.done=Math.abs(P)<=c,f.value=f.done?v:N};let S,C;const E=T=>{h(f.value)&&(S=T,C=KM({keyframes:[f.value,m(f.value)],velocity:WM(b,T,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return E(0),{calculatedDuration:null,next:T=>{let P=!1;return!C&&S===void 0&&(P=!0,k(T),E(T)),S!==void 0&&T>=S?C.next(T-S):(!P&&k(T),f)}}}const nB=Cu(.42,0,1,1),rB=Cu(0,0,.58,1),GM=Cu(.42,0,.58,1),iB=t=>Array.isArray(t)&&typeof t[0]!="number",Ok={linear:En,easeIn:nB,easeInOut:GM,easeOut:rB,circIn:ow,circInOut:NM,circOut:TM,backIn:sw,backInOut:CM,backOut:SM,anticipate:EM},jk=t=>{if(ew(t)){p0(t.length===4);const[e,n,r,i]=t;return Cu(e,n,r,i)}else if(typeof t=="string")return p0(Ok[t]!==void 0),Ok[t];return t};function sB(t,e,n){const r=[],i=n||HM,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||En:e;a=Eu(l,a)}r.push(a)}return r}function oB(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(p0(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=sB(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const f=ja(t[d],t[d+1],u);return a[d](f)};return n?u=>c(li(t[0],t[s-1],u)):c}function aB(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ja(0,e,r);t.push(Fe(n,1,i))}}function lB(t){const e=[0];return aB(e,t.length-1),e}function cB(t,e){return t.map(n=>n*e)}function uB(t,e){return t.map(()=>e||GM).splice(0,t.length-1)}function Yf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=iB(r)?r.map(jk):jk(r),s={done:!1,value:e[0]},o=cB(n&&n.length===e.length?n:lB(e),t),a=oB(o,e,{ease:Array.isArray(i)?i:uB(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const dB=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ae.update(e,!0),stop:()=>cs(e),now:()=>Tt.isProcessing?Tt.timestamp:Ar.now()}},fB={decay:Pk,inertia:Pk,tween:Yf,keyframes:Yf,spring:KM},hB=t=>t/100;class fw extends zM{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||uw,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=Zx(n)?n:fB[n]||Yf;let l,c;a!==Yf&&typeof e[0]!="number"&&(l=Eu(hB,HM(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=uM(u));const{calculatedDuration:d}=u,f=d+i,h=f*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:h}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:f,repeat:h,repeatType:m,repeatDelay:y,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-f*(this.speed>=0?1:-1),w=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let b=this.currentTime,k=s;if(h){const T=Math.min(this.currentTime,u)/d;let P=Math.floor(T),N=T%1;!N&&T>=1&&(N=1),N===1&&P--,P=Math.min(P,h+1),!!(P%2)&&(m==="reverse"?(N=1-N,y&&(N-=y/d)):m==="mirror"&&(k=o)),b=li(0,1,N)*d}const S=w?{done:!1,value:l[0]}:k.next(b);a&&(S.value=a(S.value));let{done:C}=S;!w&&c!==null&&(C=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return E&&i!==void 0&&(S.value=Rp(l,this.options,i)),x&&x(S.value),E&&this.finish(),S}get duration(){const{resolved:e}=this;return e?ei(e.calculatedDuration):0}get time(){return ei(this.currentTime)}set time(e){e=Zr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ei(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=dB,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const pB=new Set(["opacity","clipPath","filter","transform"]);function mB(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=hM(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const gB=Lx(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Xf=10,yB=2e4;function vB(t){return Zx(t.type)||t.type==="spring"||!fM(t.ease)}function xB(t,e){const n=new fw({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<yB;)r=n.sample(s),i.push(r.value),s+=Xf;return{times:void 0,keyframes:i,duration:s-Xf,ease:"linear"}}const qM={anticipate:EM,backInOut:CM,circInOut:NM};function wB(t){return t in qM}class Ak extends zM{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new VM(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&qf()&&wB(s)&&(s=qM[s]),vB(this.options)){const{onComplete:d,onUpdate:f,motionValue:h,element:m,...y}=this.options,x=xB(e,y);e=x.keyframes,e.length===1&&(e[1]=e[0]),r=x.duration,i=x.times,s=x.ease,o="keyframes"}const u=mB(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(mk(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;a.set(Rp(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ei(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ei(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Zr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return En;const{animation:r}=n;mk(r,e)}return En}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:f,...h}=this.options,m=new fw({...h,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),y=Zr(this.time);c.setWithVelocity(m.sample(y-Xf).value,m.sample(y).value,Xf)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return gB()&&r&&pB.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const bB={type:"spring",stiffness:500,damping:25,restSpeed:10},kB=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),SB={type:"keyframes",duration:.8},CB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},EB=(t,{keyframes:e})=>e.length>2?SB:To.has(t)?t.startsWith("scale")?kB(e[1]):bB:CB;function TB({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const hw=(t,e,n,r={},i,s)=>o=>{const a=Qx(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Zr(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};TB(a)||(u={...u,...EB(t,u)}),u.duration&&(u.duration=Zr(u.duration)),u.repeatDelay&&(u.repeatDelay=Zr(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const f=Rp(u.keyframes,a);if(f!==void 0)return Ae.update(()=>{u.onUpdate(f),u.onComplete()}),new KF([])}return!s&&Ak.supports(u)?new Ak(u):new fw(u)};function NB({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function JM(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const f=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),h=l[d];if(h===void 0||u&&NB(u,d))continue;const m={delay:n,...Qx(o||{},d)};let y=!1;if(window.MotionHandoffAnimation){const v=xM(t);if(v){const w=window.MotionHandoffAnimation(v,d,Ae);w!==null&&(m.startTime=w,y=!0)}}v0(t,d),f.start(hw(d,f,h,t.shouldReduceMotion&&yM.has(d)?{type:!1}:m,t,y));const x=f.animation;x&&c.push(x)}return a&&Promise.all(c).then(()=>{Ae.update(()=>{a&&o5(t,a)})}),c}function E0(t,e,n={}){var r;const i=Gc(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(JM(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return MB(t,e,u+c,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function MB(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(PB).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(E0(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function PB(t,e){return t.sortNodePosition(e)}function OB(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>E0(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=E0(t,e,n);else{const i=typeof e=="function"?Gc(t,e,n.custom):e;r=Promise.all(JM(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function YM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const jB=Fx.length;function XM(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?XM(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<jB;n++){const r=Fx[n],i=t.props[r];(Hc(i)||i===!1)&&(e[r]=i)}return e}const AB=[...$x].reverse(),DB=$x.length;function RB(t){return e=>Promise.all(e.map(({animation:n,options:r})=>OB(t,n,r)))}function _B(t){let e=RB(t),n=Dk(),r=!0;const i=l=>(c,u)=>{var d;const f=Gc(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:h,transitionEnd:m,...y}=f;c={...c,...y,...m}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=XM(t.parent)||{},d=[],f=new Set;let h={},m=1/0;for(let x=0;x<DB;x++){const v=AB[x],w=n[v],b=c[v]!==void 0?c[v]:u[v],k=Hc(b),S=v===l?w.isActive:null;S===!1&&(m=x);let C=b===u[v]&&b!==c[v]&&k;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),w.protectedKeys={...h},!w.isActive&&S===null||!b&&!w.prevProp||Ap(b)||typeof b=="boolean")continue;const E=IB(w.prevProp,b);let T=E||v===l&&w.isActive&&!C&&k||x>m&&k,P=!1;const N=Array.isArray(b)?b:[b];let M=N.reduce(i(v),{});S===!1&&(M={});const{prevResolvedValues:A={}}=w,B={...A,...M},Y=V=>{T=!0,f.has(V)&&(P=!0,f.delete(V)),w.needsAnimating[V]=!0;const O=t.getValue(V);O&&(O.liveStyle=!1)};for(const V in B){const O=M[V],j=A[V];if(h.hasOwnProperty(V))continue;let F=!1;m0(O)&&m0(j)?F=!YM(O,j):F=O!==j,F?O!=null?Y(V):f.add(V):O!==void 0&&f.has(V)?Y(V):w.protectedKeys[V]=!0}w.prevProp=b,w.prevResolvedValues=M,w.isActive&&(h={...h,...M}),r&&t.blockInitialAnimation&&(T=!1),T&&(!(C&&E)||P)&&d.push(...N.map(V=>({animation:V,options:{type:v}})))}if(f.size){const x={};if(typeof c.initial!="boolean"){const v=Gc(t,Array.isArray(c.initial)?c.initial[0]:c.initial);v&&v.transition&&(x.transition=v.transition)}f.forEach(v=>{const w=t.getBaseTarget(v),b=t.getValue(v);b&&(b.liveStyle=!0),x[v]=w??null}),d.push({animation:x})}let y=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var h;return(h=f.animationState)===null||h===void 0?void 0:h.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Dk(),r=!0}}}function IB(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!YM(e,t):!1}function Ts(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Dk(){return{animate:Ts(!0),whileInView:Ts(),whileHover:Ts(),whileTap:Ts(),whileDrag:Ts(),whileFocus:Ts(),exit:Ts()}}class xs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class LB extends xs{constructor(e){super(e),e.animationState||(e.animationState=_B(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ap(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let $B=0;class FB extends xs{constructor(){super(...arguments),this.id=$B++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const BB={animation:{Feature:LB},exit:{Feature:FB}};function Yc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Tu(t){return{point:{x:t.pageX,y:t.pageY}}}const VB=t=>e=>tw(e)&&t(e,Tu(e));function ic(t,e,n,r){return Yc(t,e,VB(n),r)}const Rk=(t,e)=>Math.abs(t-e);function zB(t,e){const n=Rk(t.x,e.x),r=Rk(t.y,e.y);return Math.sqrt(n**2+r**2)}class QM{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=og(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=zB(d.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:m}=d,{timestamp:y}=Tt;this.history.push({...m,timestamp:y});const{onStart:x,onMove:v}=this.handlers;f||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=sg(f,this.transformPagePoint),Ae.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:h,onSessionEnd:m,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=og(d.type==="pointercancel"?this.lastMoveEventInfo:sg(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(d,x),m&&m(d,x)},!tw(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Tu(e),a=sg(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Tt;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,og(a,this.history)),this.removeListeners=Eu(ic(this.contextWindow,"pointermove",this.handlePointerMove),ic(this.contextWindow,"pointerup",this.handlePointerUp),ic(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cs(this.updatePoint)}}function sg(t,e){return e?{point:e(t.point)}:t}function _k(t,e){return{x:t.x-e.x,y:t.y-e.y}}function og({point:t},e){return{point:t,delta:_k(t,ZM(e)),offset:_k(t,UB(e)),velocity:HB(e,.1)}}function UB(t){return t[0]}function ZM(t){return t[t.length-1]}function HB(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=ZM(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Zr(e)));)n--;if(!r)return{x:0,y:0};const s=ei(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const eP=1e-4,WB=1-eP,KB=1+eP,tP=.01,GB=0-tP,qB=0+tP;function Gt(t){return t.max-t.min}function JB(t,e,n){return Math.abs(t-e)<=n}function Ik(t,e,n,r=.5){t.origin=r,t.originPoint=Fe(e.min,e.max,t.origin),t.scale=Gt(n)/Gt(e),t.translate=Fe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=WB&&t.scale<=KB||isNaN(t.scale))&&(t.scale=1),(t.translate>=GB&&t.translate<=qB||isNaN(t.translate))&&(t.translate=0)}function sc(t,e,n,r){Ik(t.x,e.x,n.x,r?r.originX:void 0),Ik(t.y,e.y,n.y,r?r.originY:void 0)}function Lk(t,e,n){t.min=n.min+e.min,t.max=t.min+Gt(e)}function YB(t,e,n){Lk(t.x,e.x,n.x),Lk(t.y,e.y,n.y)}function $k(t,e,n){t.min=e.min-n.min,t.max=t.min+Gt(e)}function oc(t,e,n){$k(t.x,e.x,n.x),$k(t.y,e.y,n.y)}function XB(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Fe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Fe(n,t,r.max):Math.min(t,n)),t}function Fk(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function QB(t,{top:e,left:n,bottom:r,right:i}){return{x:Fk(t.x,n,i),y:Fk(t.y,e,r)}}function Bk(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function ZB(t,e){return{x:Bk(t.x,e.x),y:Bk(t.y,e.y)}}function eV(t,e){let n=.5;const r=Gt(t),i=Gt(e);return i>r?n=ja(e.min,e.max-r,t.min):r>i&&(n=ja(t.min,t.max-i,e.min)),li(0,1,n)}function tV(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const T0=.35;function nV(t=T0){return t===!1?t=0:t===!0&&(t=T0),{x:Vk(t,"left","right"),y:Vk(t,"top","bottom")}}function Vk(t,e,n){return{min:zk(t,e),max:zk(t,n)}}function zk(t,e){return typeof t=="number"?t:t[e]||0}const Uk=()=>({translate:0,scale:1,origin:0,originPoint:0}),ea=()=>({x:Uk(),y:Uk()}),Hk=()=>({min:0,max:0}),Ye=()=>({x:Hk(),y:Hk()});function Rn(t){return[t("x"),t("y")]}function nP({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function rV({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function iV(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ag(t){return t===void 0||t===1}function N0({scale:t,scaleX:e,scaleY:n}){return!ag(t)||!ag(e)||!ag(n)}function js(t){return N0(t)||rP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function rP(t){return Wk(t.x)||Wk(t.y)}function Wk(t){return t&&t!=="0%"}function Qf(t,e,n){const r=t-n,i=e*r;return n+i}function Kk(t,e,n,r,i){return i!==void 0&&(t=Qf(t,i,r)),Qf(t,n,r)+e}function M0(t,e=0,n=1,r,i){t.min=Kk(t.min,e,n,r,i),t.max=Kk(t.max,e,n,r,i)}function iP(t,{x:e,y:n}){M0(t.x,e.translate,e.scale,e.originPoint),M0(t.y,n.translate,n.scale,n.originPoint)}const Gk=.999999999999,qk=1.0000000000001;function sV(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&na(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,iP(t,o)),r&&js(s.latestValues)&&na(t,s.latestValues))}e.x<qk&&e.x>Gk&&(e.x=1),e.y<qk&&e.y>Gk&&(e.y=1)}function ta(t,e){t.min=t.min+e,t.max=t.max+e}function Jk(t,e,n,r,i=.5){const s=Fe(t.min,t.max,i);M0(t,e,n,s,r)}function na(t,e){Jk(t.x,e.x,e.scaleX,e.scale,e.originX),Jk(t.y,e.y,e.scaleY,e.scale,e.originY)}function sP(t,e){return nP(iV(t.getBoundingClientRect(),e))}function oV(t,e,n){const r=sP(t,n),{scroll:i}=e;return i&&(ta(r.x,i.offset.x),ta(r.y,i.offset.y)),r}const oP=({current:t})=>t?t.ownerDocument.defaultView:null,aV=new WeakMap;class lV{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ye(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Tu(u).point)},s=(u,d)=>{const{drag:f,dragPropagation:h,onDragStart:m}=this.getProps();if(f&&!h&&(this.openDragLock&&this.openDragLock(),this.openDragLock=t5(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Rn(x=>{let v=this.getAxisMotionValue(x).get()||0;if(jr.test(v)){const{projection:w}=this.visualElement;if(w&&w.layout){const b=w.layout.layoutBox[x];b&&(v=Gt(b)*(parseFloat(v)/100))}}this.originPoint[x]=v}),m&&Ae.postRender(()=>m(u,d)),v0(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:m,onDrag:y}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:x}=d;if(h&&this.currentDirection===null){this.currentDirection=cV(x),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),y&&y(u,d)},a=(u,d)=>this.stop(u,d),l=()=>Rn(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new QM(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:oP(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ae.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!yd(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=XB(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Qo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=QB(i.layoutBox,n):this.constraints=!1,this.elastic=nV(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Rn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=tV(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Qo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=oV(r,i.root,this.visualElement.getTransformPagePoint());let o=ZB(i.layout.layoutBox,s);if(n){const a=n(rV(o));this.hasMutatedConstraints=!!a,a&&(o=nP(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Rn(u=>{if(!yd(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const f=i?200:1e6,h=i?40:1e7,m={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,m)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return v0(this.visualElement,e),r.start(hw(e,r,0,n,this.visualElement,!1))}stopAnimation(){Rn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Rn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Rn(n=>{const{drag:r}=this.getProps();if(!yd(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Fe(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Qo(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Rn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=eV({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Rn(o=>{if(!yd(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Fe(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;aV.set(this.visualElement,this);const e=this.visualElement.current,n=ic(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Qo(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ae.read(r);const o=Yc(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Rn(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=T0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function yd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function cV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class uV extends xs{constructor(e){super(e),this.removeGroupControls=En,this.removeListeners=En,this.controls=new lV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||En}unmount(){this.removeGroupControls(),this.removeListeners()}}const Yk=t=>(e,n)=>{t&&Ae.postRender(()=>t(e,n))};class dV extends xs{constructor(){super(...arguments),this.removePointerDownListener=En}onPointerDown(e){this.session=new QM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:oP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Yk(e),onStart:Yk(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ae.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=ic(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ef={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Xk(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Tl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ie.test(t))t=parseFloat(t);else return t;const n=Xk(t,e.target.x),r=Xk(t,e.target.y);return`${n}% ${r}%`}},fV={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=us.parse(t);if(i.length>5)return r;const s=us.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Fe(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class hV extends g.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;xF(pV),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ef.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ae.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Vx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function aP(t){const[e,n]=H2(),r=g.useContext(Dx);return p.jsx(hV,{...t,layoutGroup:r,switchLayoutGroup:g.useContext(X2),isPresent:e,safeToRemove:n})}const pV={borderRadius:{...Tl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tl,borderTopRightRadius:Tl,borderBottomLeftRadius:Tl,borderBottomRightRadius:Tl,boxShadow:fV};function mV(t,e,n){const r=Vt(t)?t:qc(t);return r.start(hw("",r,e,n)),r.animation}function gV(t){return t instanceof SVGElement&&t.tagName!=="svg"}const yV=(t,e)=>t.depth-e.depth;class vV{constructor(){this.children=[],this.isDirty=!1}add(e){nw(this.children,e),this.isDirty=!0}remove(e){rw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(yV),this.isDirty=!1,this.children.forEach(e)}}function xV(t,e){const n=Ar.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(cs(r),t(s-e))};return Ae.read(r,!0),()=>cs(r)}const lP=["TopLeft","TopRight","BottomLeft","BottomRight"],wV=lP.length,Qk=t=>typeof t=="string"?parseFloat(t):t,Zk=t=>typeof t=="number"||ie.test(t);function bV(t,e,n,r,i,s){i?(t.opacity=Fe(0,n.opacity!==void 0?n.opacity:1,kV(r)),t.opacityExit=Fe(e.opacity!==void 0?e.opacity:1,0,SV(r))):s&&(t.opacity=Fe(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<wV;o++){const a=`border${lP[o]}Radius`;let l=eS(e,a),c=eS(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Zk(l)===Zk(c)?(t[a]=Math.max(Fe(Qk(l),Qk(c),r),0),(jr.test(c)||jr.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Fe(e.rotate||0,n.rotate||0,r))}function eS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const kV=cP(0,.5,TM),SV=cP(.5,.95,En);function cP(t,e,n){return r=>r<t?0:r>e?1:n(ja(t,e,r))}function tS(t,e){t.min=e.min,t.max=e.max}function An(t,e){tS(t.x,e.x),tS(t.y,e.y)}function nS(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function rS(t,e,n,r,i){return t-=e,t=Qf(t,1/n,r),i!==void 0&&(t=Qf(t,1/i,r)),t}function CV(t,e=0,n=1,r=.5,i,s=t,o=t){if(jr.test(e)&&(e=parseFloat(e),e=Fe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Fe(s.min,s.max,r);t===s&&(a-=e),t.min=rS(t.min,e,n,a,i),t.max=rS(t.max,e,n,a,i)}function iS(t,e,[n,r,i],s,o){CV(t,e[n],e[r],e[i],e.scale,s,o)}const EV=["x","scaleX","originX"],TV=["y","scaleY","originY"];function sS(t,e,n,r){iS(t.x,e,EV,n?n.x:void 0,r?r.x:void 0),iS(t.y,e,TV,n?n.y:void 0,r?r.y:void 0)}function oS(t){return t.translate===0&&t.scale===1}function uP(t){return oS(t.x)&&oS(t.y)}function aS(t,e){return t.min===e.min&&t.max===e.max}function NV(t,e){return aS(t.x,e.x)&&aS(t.y,e.y)}function lS(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function dP(t,e){return lS(t.x,e.x)&&lS(t.y,e.y)}function cS(t){return Gt(t.x)/Gt(t.y)}function uS(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class MV{constructor(){this.members=[]}add(e){nw(this.members,e),e.scheduleRender()}remove(e){if(rw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function PV(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:f,skewX:h,skewY:m}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),h&&(r+=`skewX(${h}deg) `),m&&(r+=`skewY(${m}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const lg=["","X","Y","Z"],OV={visibility:"hidden"},dS=1e3;let jV=0;function cg(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function fP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=xM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ae,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&fP(r)}function hP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=jV++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(RV),this.nodes.forEach(FV),this.nodes.forEach(BV),this.nodes.forEach(_V)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new vV)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new iw),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=gV(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=xV(f,250),ef.hasAnimatedSinceResize&&(ef.hasAnimatedSinceResize=!1,this.nodes.forEach(hS))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||WV,{onLayoutAnimationStart:x,onLayoutAnimationComplete:v}=u.getProps(),w=!this.targetLayout||!dP(this.targetLayout,m),b=!f&&h;if(this.options.layoutRoot||this.resumeFrom||b||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,b);const k={...Qx(y,"layout"),onPlay:x,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else f||hS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(VV),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&fP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(fS);return}this.isUpdating||this.nodes.forEach(LV),this.isUpdating=!1,this.nodes.forEach($V),this.nodes.forEach(AV),this.nodes.forEach(DV),this.clearAllSnapshots();const a=Ar.now();Tt.delta=li(0,1e3/60,a-Tt.timestamp),Tt.timestamp=a,Tt.isProcessing=!0,Zm.update.process(Tt),Zm.preRender.process(Tt),Zm.render.process(Tt),Tt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Vx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(IV),this.sharedNodes.forEach(zV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ae.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ae.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Gt(this.snapshot.measuredBox.x)&&!Gt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ye(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!uP(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||js(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),KV(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Ye();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(GV))){const{scroll:u}=this.root;u&&(ta(l.x,u.offset.x),ta(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Ye();if(An(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&An(l,o),ta(l.x,d.offset.x),ta(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=Ye();An(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&na(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),js(u.latestValues)&&na(l,u.latestValues)}return js(this.latestValues)&&na(l,this.latestValues),l}removeTransform(o){const a=Ye();An(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!js(c.latestValues))continue;N0(c.latestValues)&&c.updateSnapshot();const u=Ye(),d=c.measurePageBox();An(u,d),sS(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return js(this.latestValues)&&sS(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Tt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Tt.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ye(),this.relativeTargetOrigin=Ye(),oc(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),An(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ye(),this.targetWithTransforms=Ye()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),YB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):An(this.target,this.layout.layoutBox),iP(this.target,this.targetDelta)):An(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ye(),this.relativeTargetOrigin=Ye(),oc(this.relativeTargetOrigin,this.target,h.target),An(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||N0(this.parent.latestValues)||rP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Tt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;An(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;sV(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ye());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(nS(this.prevProjectionDelta.x,this.projectionDelta.x),nS(this.prevProjectionDelta.y,this.projectionDelta.y)),sc(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!uS(this.projectionDelta.x,this.prevProjectionDelta.x)||!uS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ea(),this.projectionDelta=ea(),this.projectionDeltaWithTransform=ea()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=ea();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Ye(),h=l?l.source:void 0,m=this.layout?this.layout.source:void 0,y=h!==m,x=this.getStack(),v=!x||x.members.length<=1,w=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(HV));this.animationProgress=0;let b;this.mixTargetDelta=k=>{const S=k/1e3;pS(d.x,o.x,S),pS(d.y,o.y,S),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(oc(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),UV(this.relativeTarget,this.relativeTargetOrigin,f,S),b&&NV(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Ye()),An(b,this.relativeTarget)),y&&(this.animationValues=u,bV(u,c,this.latestValues,S,w,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ae.update(()=>{ef.hasAnimatedSinceResize=!0,this.currentAnimation=mV(0,dS,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(dS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&pP(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ye();const d=Gt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=Gt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}An(a,l),na(a,u),sc(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new MV),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&cg("z",o,c,this.animationValues);for(let u=0;u<lg.length;u++)cg(`rotate${lg[u]}`,o,c,this.animationValues),cg(`skew${lg[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return OV;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Qd(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Qd(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!js(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=PV(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:h,y:m}=this.projectionDelta;c.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const y in Wc){if(f[y]===void 0)continue;const{correct:x,applyTo:v,isCSSVariable:w}=Wc[y],b=c.transform==="none"?f[y]:x(f[y],d);if(v){const k=v.length;for(let S=0;S<k;S++)c[v[S]]=b}else w?this.options.visualElement.renderState.vars[y]=b:c[y]=b}return this.options.layoutId&&(c.pointerEvents=d===this?Qd(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(fS),this.root.sharedNodes.clear()}}}function AV(t){t.updateLayout()}function DV(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Rn(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],h=Gt(f);f.min=r[d].min,f.max=f.min+h}):pP(s,n.layoutBox,r)&&Rn(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],h=Gt(r[d]);f.max=f.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+h)});const a=ea();sc(a,r,n.layoutBox);const l=ea();o?sc(l,t.applyTransform(i,!0),n.measuredBox):sc(l,r,n.layoutBox);const c=!uP(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const m=Ye();oc(m,n.layoutBox,f.layoutBox);const y=Ye();oc(y,r,h.layoutBox),dP(m,y)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=m,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function RV(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function _V(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function IV(t){t.clearSnapshot()}function fS(t){t.clearMeasurements()}function LV(t){t.isLayoutDirty=!1}function $V(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function hS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function FV(t){t.resolveTargetDelta()}function BV(t){t.calcProjection()}function VV(t){t.resetSkewAndRotation()}function zV(t){t.removeLeadSnapshot()}function pS(t,e,n){t.translate=Fe(e.translate,0,n),t.scale=Fe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function mS(t,e,n,r){t.min=Fe(e.min,n.min,r),t.max=Fe(e.max,n.max,r)}function UV(t,e,n,r){mS(t.x,e.x,n.x,r),mS(t.y,e.y,n.y,r)}function HV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const WV={duration:.45,ease:[.4,0,.1,1]},gS=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),yS=gS("applewebkit/")&&!gS("chrome/")?Math.round:En;function vS(t){t.min=yS(t.min),t.max=yS(t.max)}function KV(t){vS(t.x),vS(t.y)}function pP(t,e,n){return t==="position"||t==="preserve-aspect"&&!JB(cS(e),cS(n),.2)}function GV(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const qV=hP({attachResizeListener:(t,e)=>Yc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ug={current:void 0},mP=hP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ug.current){const t=new qV({});t.mount(window),t.setOptions({layoutScroll:!0}),ug.current=t}return ug.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),JV={pan:{Feature:dV},drag:{Feature:uV,ProjectionNode:mP,MeasureLayout:aP}};function xS(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ae.postRender(()=>s(e,Tu(e)))}class YV extends xs{mount(){const{current:e}=this.node;e&&(this.unmount=YF(e,(n,r)=>(xS(this.node,r,"Start"),i=>xS(this.node,i,"End"))))}unmount(){}}class XV extends xs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Eu(Yc(this.node.current,"focus",()=>this.onFocus()),Yc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function wS(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ae.postRender(()=>s(e,Tu(e)))}class QV extends xs{mount(){const{current:e}=this.node;e&&(this.unmount=e5(e,(n,r)=>(wS(this.node,r,"Start"),(i,{success:s})=>wS(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const P0=new WeakMap,dg=new WeakMap,ZV=t=>{const e=P0.get(t.target);e&&e(t)},ez=t=>{t.forEach(ZV)};function tz({root:t,...e}){const n=t||document;dg.has(n)||dg.set(n,{});const r=dg.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(ez,{root:t,...e})),r[i]}function nz(t,e,n){const r=tz(e);return P0.set(t,n),r.observe(t),()=>{P0.delete(t),r.unobserve(t)}}const rz={some:0,all:1};class iz extends xs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:rz[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return nz(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(sz(e,n))&&this.startObserver()}unmount(){}}function sz({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const oz={inView:{Feature:iz},tap:{Feature:QV},focus:{Feature:XV},hover:{Feature:YV}},az={layout:{ProjectionNode:mP,MeasureLayout:aP}},O0={current:null},gP={current:!1};function lz(){if(gP.current=!0,!!Ix)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>O0.current=t.matches;t.addListener(e),e()}else O0.current=!1}const cz=[...BM,It,us],uz=t=>cz.find(FM(t)),dz=new WeakMap;function fz(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Vt(i))t.addValue(r,i);else if(Vt(s))t.addValue(r,qc(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,qc(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const bS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hz{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=uw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Ar.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Ae.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Dp(n),this.isVariantNode=J2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const m=f[h];l[h]!==void 0&&Vt(m)&&m.set(l[h],!1)}}mount(e){this.current=e,dz.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),gP.current||lz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:O0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cs(this.notifyUpdate),cs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=To.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ae.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Aa){const n=Aa[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ye()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<bS.length;r++){const i=bS[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=fz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=qc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(LM(i)||MM(i))?i=parseFloat(i):!uz(i)&&us.test(n)&&(i=RM(e,n)),this.setBaseTarget(e,Vt(i)?i.get():i)),Vt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=Yx(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Vt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new iw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class yP extends hz{constructor(){super(...arguments),this.KeyframeResolver=VM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function pz(t){return window.getComputedStyle(t)}class mz extends yP{constructor(){super(...arguments),this.type="html",this.renderInstance=oM}readValueFromInstance(e,n){if(To.has(n)){const r=cw(n);return r&&r.default||0}else{const r=pz(e),i=(zx(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return sP(e,n)}build(e,n,r){Wx(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Xx(e,n,r)}}class gz extends yP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ye,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&sM(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(To.has(n)){const r=cw(n);return r&&r.default||0}return n=aM.has(n)?n:Bx(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return cM(e,n,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&Ae.postRender(this.updateDimensions)}build(e,n,r){qx(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){lM(e,n,r,i)}mount(e){this.isSVGTag=Jx(e.tagName),super.mount(e)}}const yz=(t,e)=>Gx(t)?new gz(e):new mz(e,{allowProjection:t!==g.Fragment}),vz=UF({...BB,...oz,...JV,...az},yz),U=sF(vz);function Kt({text:t,children:e,position:n="top"}){return t?p.jsxs("div",{className:"relative inline-block group/tooltip",children:[e,p.jsx("div",{className:`
          absolute z-50 hidden group-hover/tooltip:block
          pointer-events-none
          ${xz(n)}
        `,children:p.jsxs("div",{className:"relative w-max px-2 py-1 text-sm font-medium text-white bg-gray-800 rounded-md",children:[t,p.jsx("div",{className:`
              absolute w-0 h-0 border-solid border-transparent
              ${wz(n)}
            `,style:{borderWidth:"5px"}})]})})]}):e}function xz(t){switch(t){case"right":return"left-[calc(100%+8px)] top-1/2 -translate-y-1/2";case"left":return"right-[calc(100%+8px)] top-1/2 -translate-y-1/2";case"bottom":return"top-[calc(100%+8px)] left-1/2 -translate-x-1/2";case"top":default:return"bottom-[calc(100%+8px)] left-1/2 -translate-x-1/2"}}function wz(t){switch(t){case"right":return"left-[-10px] top-1/2 -translate-y-1/2 border-r-gray-800 border-l-0 border-[5px]";case"left":return"right-[-10px] top-1/2 -translate-y-1/2 border-l-gray-800 border-r-0 border-[5px]";case"bottom":return"top-[-10px] left-1/2 -translate-x-1/2 border-b-gray-800 border-t-0 border-[5px]";case"top":default:return"bottom-[-10px] left-1/2 -translate-x-1/2 border-t-gray-800 border-b-0 border-[5px]"}}async function bz(t,e,n,r,i){return await(await fetch("http://localhost:5000/api/email/sendMentioningEmail",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({mentionedUsers:t,currentUserName:e,cardTitle:n,boardId:r,comment:i}),credentials:"include"})).json()}async function kz(t,e,n,r,i){return await(await fetch("http://localhost:5000/api/email/sendAssigneeEmail",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({assignedUsers:t,currentUserName:e,cardTitle:n,boardId:r,boardTitle:i}),credentials:"include"})).json()}async function Sz(t,e,n,r){return await(await fetch("http://localhost:5000/api/email/sendBoardSharedEmail",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({sharedUsers:t,currentUserName:e,boardTitle:n,boardId:r}),credentials:"include"})).json()}async function vP(){const{data:t,error:e}=await ne.from("boards").select("*").order("created_at",{ascending:!0});if(e)throw e;return await Promise.all(t.map(async r=>{const{data:i,error:s}=await ne.from("columns").select("*").eq("board_id",r.id).order("position",{ascending:!0});if(s)throw s;const o=await Promise.all(i.map(async a=>{const{data:l,error:c}=await ne.from("cards").select("*").eq("column_id",a.id).order("position",{ascending:!0});if(c)throw c;const u=await Promise.all(l.map(async d=>{const[{data:f,error:h}]=await Promise.all([ne.from("comments").select("*").eq("card_id",d.id).order("created_at",{ascending:!1})]);if(h)throw h;return{id:d.id,title:d.title,description:d.description,priority:d.priority,labels:d.labels||[],due_date:d.due_date,assignee:d.assignee,checklist:d.checklist,completed:d.completed,attachments:d.attachments||[],comments:f||[],archived:d.archived}}));return{id:a.id,title:a.title,cards:u}}));return{id:r.id,title:r.title,columns:o,team_id:r.team_id,shared_users:r.shared_users,account_id:r.account_id,created_by:r.created_by,created_at:r.created_at,updated_at:r.updated_at}}))}async function Cz(t,e,n){const{data:r,error:i}=await ne.from("boards").insert([{title:t,account_id:e,created_by:n}]).select().single();if(i)throw i;const s=[{title:"To Do",position:0,account_id:e},{title:"In Progress",position:1,account_id:e},{title:"Done",position:2,account_id:e}],{data:o,error:a}=await ne.from("columns").insert(s.map(l=>({board_id:r.id,title:l.title,account_id:l.account_id,position:l.position}))).select();if(a)throw a;return{id:r.id,title:r.title,account_id:r.account_id,created_by:r.created_by,columns:o.map(l=>({id:l.id,title:l.title,cards:[]}))}}async function Ez(t,e){console.log("boardId: ",t,e);const{data:n,error:r}=await ne.from("boards").update({team_id:e}).eq("id",t).select("*",{count:"exact"});if(r)throw r}async function Tz(t){const{data:e,error:n,count:r}=await ne.from("boards").update({team_id:null}).eq("id",t).select("*",{count:"exact"});if(n)throw n}async function Nz(t,e){const{error:n}=await ne.from("boards").update({title:e.title,updated_at:new Date().toISOString()}).eq("id",t);if(n)throw n}async function Mz(t){const{error:e}=await ne.from("boards").delete().eq("id",t);if(e)throw e}async function Pz(t){const{data:e,error:n}=await ne.from("board_logs").select("*").eq("board_id",t).order("created_at",{ascending:!1});if(n)throw n;return e}async function Oz(t,e,n,r){const{data:i,error:s}=await ne.from("boards").select("shared_users").eq("id",t).single();if(s)throw s;const o=i.shared_users||[],a=[...new Set([...o,...e])],l=e.filter(d=>!o.includes(d));Sz(l,n,r,t);const{data:c,error:u}=await ne.from("boards").update({shared_users:a}).eq("id",t).select();if(u)throw u;return c}async function jz(t,e){const{data:n,error:r}=await ne.from("boards").select("shared_users").eq("id",t).single();if(r)throw r;const i=(n.shared_users||[]).filter(a=>!e.includes(a)),{data:s,error:o}=await ne.from("boards").update({shared_users:i}).eq("id",t).select();if(o)throw o;return s}const xP=g.createContext(),Az=({children:t})=>{const[e,n]=g.useState([]),[r,i]=g.useState(!0),s=async()=>{try{i(!0);const u=await vP();n(u)}catch(u){console.error("Error loading initial boards:",u)}finally{i(!1)}},o=u=>{n(u)},a=async(u,d,f)=>{try{const h=await Cz(u,d,f);return n(m=>[...m,h]),h}catch(h){throw console.error("Error adding board:",h),h}},l=async(u,d)=>{try{await Nz(u,d),n(f=>f.map(h=>h.id===u?{...h,...d}:h))}catch(f){throw console.error("Error updating board:",f),f}},c=async u=>{try{await Mz(u),n(d=>d.filter(f=>f.id!==u))}catch(d){throw console.error("Error removing board:",d),d}};return p.jsx(xP.Provider,{value:{boardsList:e,updateBoardsList:o,loadInitialBoards:s,isLoading:r,addBoard:a,updateBoardInList:l,removeBoardFromList:c},children:t})},_p=()=>{const t=g.useContext(xP);if(!t)throw new Error("useBoards must be used within a BoardProvider");return t},wP=g.createContext();function Dz({children:t}){const[e,n]=g.useState(!0);return p.jsx(wP.Provider,{value:{isExpanded:e,setIsExpanded:n},children:t})}function pw(){const t=g.useContext(wP);if(!t)throw new Error("useSidebar must be used within a SidebarProvider");return t}const bP=typeof document<"u"?D.useLayoutEffect:()=>{};function Rz(t){const e=g.useRef(null);return bP(()=>{e.current=t},[t]),g.useCallback((...n)=>{const r=e.current;return r==null?void 0:r(...n)},[])}const Nu=t=>{var e;return(e=t==null?void 0:t.ownerDocument)!==null&&e!==void 0?e:document},zs=t=>t&&"window"in t&&t.window===t?t:Nu(t).defaultView||window;function _z(t){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(n=>t.test(n.brand)))||t.test(window.navigator.userAgent)}function Iz(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function kP(t){let e=null;return()=>(e==null&&(e=t()),e)}const Lz=kP(function(){return Iz(/^Mac/i)}),$z=kP(function(){return _z(/Android/i)});function Fz(t){return t.mozInputSource===0&&t.isTrusted?!0:$z()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}class Bz{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=e}}function SP(t){let e=g.useRef({isFocused:!1,observer:null});bP(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=Rz(r=>{t==null||t(r)});return g.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=r.target,s=o=>{e.current.isFocused=!1,i.disabled&&n(new Bz("blur",o)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var o;(o=e.current.observer)===null||o===void 0||o.disconnect();let a=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}function Vz(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:i}=t;const s=g.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),i&&i(!1),!0},[r,i]),o=SP(s),a=g.useCallback(l=>{const c=Nu(l.target);l.target===l.currentTarget&&c.activeElement===l.target&&(n&&n(l),i&&i(!0),o(l))},[i,n,o]);return{focusProps:{onFocus:!e&&(n||i||r)?a:void 0,onBlur:!e&&(r||i)?s:void 0}}}let Mu=null,j0=new Set,ac=new Map,lo=!1,A0=!1;const zz={Tab:!0,Escape:!0};function mw(t,e){for(let n of j0)n(t,e)}function Uz(t){return!(t.metaKey||!Lz()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function Zf(t){lo=!0,Uz(t)&&(Mu="keyboard",mw("keyboard",t))}function Bn(t){Mu="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(lo=!0,mw("pointer",t))}function CP(t){Fz(t)&&(lo=!0,Mu="virtual")}function EP(t){t.target===window||t.target===document||(!lo&&!A0&&(Mu="virtual",mw("virtual",t)),lo=!1,A0=!1)}function TP(){lo=!1,A0=!0}function D0(t){if(typeof window>"u"||ac.get(zs(t)))return;const e=zs(t),n=Nu(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){lo=!0,r.apply(this,arguments)},n.addEventListener("keydown",Zf,!0),n.addEventListener("keyup",Zf,!0),n.addEventListener("click",CP,!0),e.addEventListener("focus",EP,!0),e.addEventListener("blur",TP,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",Bn,!0),n.addEventListener("pointermove",Bn,!0),n.addEventListener("pointerup",Bn,!0)):(n.addEventListener("mousedown",Bn,!0),n.addEventListener("mousemove",Bn,!0),n.addEventListener("mouseup",Bn,!0)),e.addEventListener("beforeunload",()=>{NP(t)},{once:!0}),ac.set(e,{focus:r})}const NP=(t,e)=>{const n=zs(t),r=Nu(t);e&&r.removeEventListener("DOMContentLoaded",e),ac.has(n)&&(n.HTMLElement.prototype.focus=ac.get(n).focus,r.removeEventListener("keydown",Zf,!0),r.removeEventListener("keyup",Zf,!0),r.removeEventListener("click",CP,!0),n.removeEventListener("focus",EP,!0),n.removeEventListener("blur",TP,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",Bn,!0),r.removeEventListener("pointermove",Bn,!0),r.removeEventListener("pointerup",Bn,!0)):(r.removeEventListener("mousedown",Bn,!0),r.removeEventListener("mousemove",Bn,!0),r.removeEventListener("mouseup",Bn,!0)),ac.delete(n))};function Hz(t){const e=Nu(t);let n;return e.readyState!=="loading"?D0(t):(n=()=>{D0(t)},e.addEventListener("DOMContentLoaded",n)),()=>NP(t,n)}typeof document<"u"&&Hz();function MP(){return Mu!=="pointer"}const Wz=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Kz(t,e,n){var r;const i=typeof window<"u"?zs(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?zs(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<"u"?zs(n==null?void 0:n.target).HTMLElement:HTMLElement,a=typeof window<"u"?zs(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return t=t||(n==null?void 0:n.target)instanceof i&&!Wz.has(n==null||(r=n.target)===null||r===void 0?void 0:r.type)||(n==null?void 0:n.target)instanceof s||(n==null?void 0:n.target)instanceof o&&(n==null?void 0:n.target.isContentEditable),!(t&&e==="keyboard"&&n instanceof a&&!zz[n.key])}function Gz(t,e,n){D0(),g.useEffect(()=>{let r=(i,s)=>{Kz(!!(n!=null&&n.isTextInput),i,s)&&t(MP())};return j0.add(r),()=>{j0.delete(r)}},e)}function qz(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=t,s=g.useRef({isFocusWithin:!1}),o=g.useCallback(c=>{s.current.isFocusWithin&&!c.currentTarget.contains(c.relatedTarget)&&(s.current.isFocusWithin=!1,n&&n(c),i&&i(!1))},[n,i,s]),a=SP(o),l=g.useCallback(c=>{!s.current.isFocusWithin&&document.activeElement===c.target&&(r&&r(c),i&&i(!0),s.current.isFocusWithin=!0,a(c))},[r,i,a]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:l,onBlur:o}}}let eh=!1,fg=0;function R0(){eh=!0,setTimeout(()=>{eh=!1},50)}function kS(t){t.pointerType==="touch"&&R0()}function Jz(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",kS):document.addEventListener("touchend",R0),fg++,()=>{fg--,!(fg>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",kS):document.removeEventListener("touchend",R0))}}function PP(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:i}=t,[s,o]=g.useState(!1),a=g.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;g.useEffect(Jz,[]);let{hoverProps:l,triggerHoverEnd:c}=g.useMemo(()=>{let u=(h,m)=>{if(a.pointerType=m,i||m==="touch"||a.isHovered||!h.currentTarget.contains(h.target))return;a.isHovered=!0;let y=h.currentTarget;a.target=y,e&&e({type:"hoverstart",target:y,pointerType:m}),n&&n(!0),o(!0)},d=(h,m)=>{if(a.pointerType="",a.target=null,m==="touch"||!a.isHovered)return;a.isHovered=!1;let y=h.currentTarget;r&&r({type:"hoverend",target:y,pointerType:m}),n&&n(!1),o(!1)},f={};return typeof PointerEvent<"u"?(f.onPointerEnter=h=>{eh&&h.pointerType==="mouse"||u(h,h.pointerType)},f.onPointerLeave=h=>{!i&&h.currentTarget.contains(h.target)&&d(h,h.pointerType)}):(f.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},f.onMouseEnter=h=>{!a.ignoreEmulatedMouseEvents&&!eh&&u(h,"mouse"),a.ignoreEmulatedMouseEvents=!1},f.onMouseLeave=h=>{!i&&h.currentTarget.contains(h.target)&&d(h,"mouse")}),{hoverProps:f,triggerHoverEnd:d}},[e,n,r,i,a]);return g.useEffect(()=>{i&&c({currentTarget:a.target},a.pointerType)},[i]),{hoverProps:l,isHovered:s}}function OP(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,i=g.useRef({isFocused:!1,isFocusVisible:e||MP()}),[s,o]=g.useState(!1),[a,l]=g.useState(()=>i.current.isFocused&&i.current.isFocusVisible),c=g.useCallback(()=>l(i.current.isFocused&&i.current.isFocusVisible),[]),u=g.useCallback(h=>{i.current.isFocused=h,o(h),c()},[c]);Gz(h=>{i.current.isFocusVisible=h,c()},[],{isTextInput:n});let{focusProps:d}=Vz({isDisabled:r,onFocusChange:u}),{focusWithinProps:f}=qz({isDisabled:!r,onFocusWithinChange:u});return{isFocused:s,isFocusVisible:a,focusProps:r?f:d}}var Yz=Object.defineProperty,Xz=(t,e,n)=>e in t?Yz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hg=(t,e,n)=>(Xz(t,typeof e!="symbol"?e+"":e,n),n);let Qz=class{constructor(){hg(this,"current",this.detect()),hg(this,"handoffState","pending"),hg(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Xs=new Qz;function Za(t){return Xs.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}function Ip(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function fi(){let t=[],e={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),e.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Ip(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=fi();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let i of t.splice(r,1))i()}},dispose(){for(let n of t.splice(0))n()}};return e}function hi(){let[t]=g.useState(fi);return g.useEffect(()=>()=>t.dispose(),[t]),t}let Ie=(t,e)=>{Xs.isServer?g.useEffect(t,e):g.useLayoutEffect(t,e)};function ws(t){let e=g.useRef(t);return Ie(()=>{e.current=t},[t]),e}let te=function(t){let e=ws(t);return D.useCallback((...n)=>e.current(...n),[e])};function Zz(t){let e=t.width/2,n=t.height/2;return{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function eU(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function jP({disabled:t=!1}={}){let e=g.useRef(null),[n,r]=g.useState(!1),i=hi(),s=te(()=>{e.current=null,r(!1),i.dispose()}),o=te(a=>{if(i.dispose(),e.current===null){e.current=a.currentTarget,r(!0);{let l=Za(a.currentTarget);i.addEventListener(l,"pointerup",s,!1),i.addEventListener(l,"pointermove",c=>{if(e.current){let u=Zz(c);r(eU(u,e.current.getBoundingClientRect()))}},!1),i.addEventListener(l,"pointercancel",s,!1)}}});return{pressed:n,pressProps:t?{}:{onPointerDown:o,onPointerUp:s,onClick:s}}}let tU=g.createContext(void 0);function Lp(){return g.useContext(tU)}function _0(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function mn(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,mn),r}var Ra=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Ra||{}),zi=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(zi||{});function it(){let t=rU();return g.useCallback(e=>nU({mergeRefs:t,...e}),[t])}function nU({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:i,visible:s=!0,name:o,mergeRefs:a}){a=a??iU;let l=AP(e,t);if(s)return vd(l,n,r,o,a);let c=i??0;if(c&2){let{static:u=!1,...d}=l;if(u)return vd(d,n,r,o,a)}if(c&1){let{unmount:u=!0,...d}=l;return mn(u?0:1,{0(){return null},1(){return vd({...d,hidden:!0,style:{display:"none"}},n,r,o,a)}})}return vd(l,n,r,o,a)}function vd(t,e={},n,r,i){let{as:s=n,children:o,refName:a="ref",...l}=pg(t,["unmount","static"]),c=t.ref!==void 0?{[a]:t.ref}:{},u=typeof o=="function"?o(e):o;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let d={};if(e){let f=!1,h=[];for(let[m,y]of Object.entries(e))typeof y=="boolean"&&(f=!0),y===!0&&h.push(m.replace(/([A-Z])/g,x=>`-${x.toLowerCase()}`));if(f){d["data-headlessui-state"]=h.join(" ");for(let m of h)d[`data-${m}`]=""}}if(s===g.Fragment&&(Object.keys(Ni(l)).length>0||Object.keys(Ni(d)).length>0))if(!g.isValidElement(u)||Array.isArray(u)&&u.length>1){if(Object.keys(Ni(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Ni(l)).concat(Object.keys(Ni(d))).map(f=>`  - ${f}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(f=>`  - ${f}`).join(`
`)].join(`
`))}else{let f=u.props,h=f==null?void 0:f.className,m=typeof h=="function"?(...v)=>_0(h(...v),l.className):_0(h,l.className),y=m?{className:m}:{},x=AP(u.props,Ni(pg(l,["ref"])));for(let v in d)v in x&&delete d[v];return g.cloneElement(u,Object.assign({},x,d,c,{ref:i(sU(u),c.ref)},y))}return g.createElement(s,Object.assign({},pg(l,["ref"]),s!==g.Fragment&&c,s!==g.Fragment&&d),u)}function rU(){let t=g.useRef([]),e=g.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function iU(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function AP(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var s;return(s=i==null?void 0:i.preventDefault)==null?void 0:s.call(i)}]);for(let r in n)Object.assign(e,{[r](i,...s){let o=n[r];for(let a of o){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;a(i,...s)}}});return e}function gw(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];for(let r in n)Object.assign(e,{[r](...i){let s=n[r];for(let o of s)o==null||o(...i)}});return e}function Ze(t){var e;return Object.assign(g.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function Ni(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function pg(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function sU(t){return D.version.split(".")[0]>="19"?t.props.ref:t.ref}function DP(t,e,n){let[r,i]=g.useState(n),s=t!==void 0,o=g.useRef(s),a=g.useRef(!1),l=g.useRef(!1);return s&&!o.current&&!a.current?(a.current=!0,o.current=s,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!s&&o.current&&!l.current&&(l.current=!0,o.current=s,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[s?t:r,te(c=>(s||i(c),e==null?void 0:e(c)))]}function RP(t){let[e]=g.useState(t);return e}function _P(t={},e=null,n=[]){for(let[r,i]of Object.entries(t))LP(n,IP(e,r),i);return n}function IP(t,e){return t?t+"["+e+"]":e}function LP(t,e,n){if(Array.isArray(n))for(let[r,i]of n.entries())LP(t,IP(e,r.toString()),i);else n instanceof Date?t.push([e,n.toISOString()]):typeof n=="boolean"?t.push([e,n?"1":"0"]):typeof n=="string"?t.push([e,n]):typeof n=="number"?t.push([e,`${n}`]):n==null?t.push([e,""]):_P(n,e,t)}function $P(t){var e,n;let r=(e=t==null?void 0:t.form)!=null?e:t.closest("form");if(r){for(let i of r.elements)if(i!==t&&(i.tagName==="INPUT"&&i.type==="submit"||i.tagName==="BUTTON"&&i.type==="submit"||i.nodeName==="INPUT"&&i.type==="image")){i.click();return}(n=r.requestSubmit)==null||n.call(r)}}let oU="span";var _a=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(_a||{});function aU(t,e){var n;let{features:r=1,...i}=t,s={ref:e,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return it()({ourProps:s,theirProps:i,slot:{},defaultTag:oU,name:"Hidden"})}let Xc=Ze(aU),lU=g.createContext(null);function cU({children:t}){let e=g.useContext(lU);if(!e)return D.createElement(D.Fragment,null,t);let{target:n}=e;return n?tt.createPortal(D.createElement(D.Fragment,null,t),n):null}function FP({data:t,form:e,disabled:n,onReset:r,overrides:i}){let[s,o]=g.useState(null),a=hi();return g.useEffect(()=>{if(r&&s)return a.addEventListener(s,"reset",r)},[s,e,r]),D.createElement(cU,null,D.createElement(uU,{setForm:o,formId:e}),_P(t).map(([l,c])=>D.createElement(Xc,{features:_a.Hidden,...Ni({key:l,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:e,disabled:n,name:l,value:c,...i})})))}function uU({setForm:t,formId:e}){return g.useEffect(()=>{if(e){let n=document.getElementById(e);n&&t(n)}},[t,e]),e?null:D.createElement(Xc,{features:_a.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:n=>{if(!n)return;let r=n.closest("form");r&&t(r)}})}let dU=g.createContext(void 0);function yw(){return g.useContext(dU)}function BP(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&fU(n)?!1:r}function fU(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}let VP=Symbol();function hU(t,e=!0){return Object.assign(t,{[VP]:e})}function jt(...t){let e=g.useRef(t);g.useEffect(()=>{e.current=t},[t]);let n=te(r=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return t.every(r=>r==null||(r==null?void 0:r[VP]))?void 0:n}let $p=g.createContext(null);$p.displayName="DescriptionContext";function zP(){let t=g.useContext($p);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,zP),e}return t}function UP(){var t,e;return(e=(t=g.useContext($p))==null?void 0:t.value)!=null?e:void 0}function HP(){let[t,e]=g.useState([]);return[t.length>0?t.join(" "):void 0,g.useMemo(()=>function(n){let r=te(s=>(e(o=>[...o,s]),()=>e(o=>{let a=o.slice(),l=a.indexOf(s);return l!==-1&&a.splice(l,1),a}))),i=g.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return D.createElement($p.Provider,{value:i},n.children)},[e])]}let pU="p";function mU(t,e){let n=g.useId(),r=Lp(),{id:i=`headlessui-description-${n}`,...s}=t,o=zP(),a=jt(e);Ie(()=>o.register(i),[i,o.register]);let l=r||!1,c=g.useMemo(()=>({...o.slot,disabled:l}),[o.slot,l]),u={ref:a,...o.props,id:i};return it()({ourProps:u,theirProps:s,slot:c,defaultTag:pU,name:o.name||"Description"})}let gU=Ze(mU),WP=Object.assign(gU,{});var Xe=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Xe||{});let Fp=g.createContext(null);Fp.displayName="LabelContext";function KP(){let t=g.useContext(Fp);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,KP),e}return t}function vw(t){var e,n,r;let i=(n=(e=g.useContext(Fp))==null?void 0:e.value)!=null?n:void 0;return((r=t==null?void 0:t.length)!=null?r:0)>0?[i,...t].filter(Boolean).join(" "):i}function GP({inherit:t=!1}={}){let e=vw(),[n,r]=g.useState([]),i=t?[e,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,g.useMemo(()=>function(s){let o=te(l=>(r(c=>[...c,l]),()=>r(c=>{let u=c.slice(),d=u.indexOf(l);return d!==-1&&u.splice(d,1),u}))),a=g.useMemo(()=>({register:o,slot:s.slot,name:s.name,props:s.props,value:s.value}),[o,s.slot,s.name,s.props,s.value]);return D.createElement(Fp.Provider,{value:a},s.children)},[r])]}let yU="label";function vU(t,e){var n;let r=g.useId(),i=KP(),s=yw(),o=Lp(),{id:a=`headlessui-label-${r}`,htmlFor:l=s??((n=i.props)==null?void 0:n.htmlFor),passive:c=!1,...u}=t,d=jt(e);Ie(()=>i.register(a),[a,i.register]);let f=te(x=>{let v=x.currentTarget;if(v instanceof HTMLLabelElement&&x.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(x),v instanceof HTMLLabelElement){let w=document.getElementById(v.htmlFor);if(w){let b=w.getAttribute("disabled");if(b==="true"||b==="")return;let k=w.getAttribute("aria-disabled");if(k==="true"||k==="")return;(w instanceof HTMLInputElement&&(w.type==="radio"||w.type==="checkbox")||w.role==="radio"||w.role==="checkbox"||w.role==="switch")&&w.click(),w.focus({preventScroll:!0})}}}),h=o||!1,m=g.useMemo(()=>({...i.slot,disabled:h}),[i.slot,h]),y={ref:d,...i.props,id:a,htmlFor:l,onClick:f};return c&&("onClick"in y&&(delete y.htmlFor,delete y.onClick),"onClick"in u&&delete u.onClick),it()({ourProps:y,theirProps:u,slot:m,defaultTag:l?yU:"div",name:i.name||"Label"})}let xU=Ze(vU),qP=Object.assign(xU,{}),wU=g.createContext(()=>{});function bU({value:t,children:e}){return D.createElement(wU.Provider,{value:t},e)}function kU(t,e){return t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"&&"id"in t&&"id"in e?t.id===e.id:t===e}function SU(t=kU){return g.useCallback((e,n)=>{if(typeof t=="string"){let r=t;return(e==null?void 0:e[r])===(n==null?void 0:n[r])}return t(e,n)},[t])}function CU(t){if(t===null)return{width:0,height:0};let{width:e,height:n}=t.getBoundingClientRect();return{width:e,height:n}}function EU(t,e=!1){let[n,r]=g.useReducer(()=>({}),{}),i=g.useMemo(()=>CU(t),[t,n]);return Ie(()=>{if(!t)return;let s=new ResizeObserver(r);return s.observe(t),()=>{s.disconnect()}},[t]),e?{width:`${i.width}px`,height:`${i.height}px`}:i}let TU=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};function JP(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...s){let o=e[i].call(n,...s);o&&(n=o,r.forEach(a=>a()))}}}function YP(t){return g.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}let NU=new TU(()=>JP(()=>[],{ADD(t){return this.includes(t)?this:[...this,t]},REMOVE(t){let e=this.indexOf(t);if(e===-1)return this;let n=this.slice();return n.splice(e,1),n}}));function el(t,e){let n=NU.get(e),r=g.useId(),i=YP(n);if(Ie(()=>{if(t)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,t]),!t)return!1;let s=i.indexOf(r),o=i.length;return s===-1&&(s=o,o+=1),s===o-1}let I0=new Map,lc=new Map;function SS(t){var e;let n=(e=lc.get(t))!=null?e:0;return lc.set(t,n+1),n!==0?()=>CS(t):(I0.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>CS(t))}function CS(t){var e;let n=(e=lc.get(t))!=null?e:1;if(n===1?lc.delete(t):lc.set(t,n-1),n!==1)return;let r=I0.get(t);r&&(r["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",r["aria-hidden"]),t.inert=r.inert,I0.delete(t))}function XP(t,{allowed:e,disallowed:n}={}){let r=el(t,"inert-others");Ie(()=>{var i,s;if(!r)return;let o=fi();for(let l of(i=n==null?void 0:n())!=null?i:[])l&&o.add(SS(l));let a=(s=e==null?void 0:e())!=null?s:[];for(let l of a){if(!l)continue;let c=Za(l);if(!c)continue;let u=l.parentElement;for(;u&&u!==c.body;){for(let d of u.children)a.some(f=>d.contains(f))||o.add(SS(d));u=u.parentElement}}return o.dispose},[r,e,n])}function QP(t,e,n){let r=ws(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&n()});g.useEffect(()=>{if(!t)return;let i=e===null?null:e instanceof HTMLElement?e:e.current;if(!i)return;let s=fi();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(i));o.observe(i),s.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(i));o.observe(i),s.add(()=>o.disconnect())}return()=>s.dispose()},[e,r,t])}let th=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),MU=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var sr=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(sr||{}),L0=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(L0||{}),PU=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(PU||{});function ZP(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(th)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function OU(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(MU)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var xw=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(xw||{});function eO(t,e=0){var n;return t===((n=Za(t))==null?void 0:n.body)?!1:mn(e,{0(){return t.matches(th)},1(){let r=t;for(;r!==null;){if(r.matches(th))return!0;r=r.parentElement}return!1}})}var jU=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(jU||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ti(t){t==null||t.focus({preventScroll:!0})}let AU=["textarea","input"].join(",");function DU(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,AU))!=null?n:!1}function tO(t,e=n=>n){return t.slice().sort((n,r)=>{let i=e(n),s=e(r);if(i===null||s===null)return 0;let o=i.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function RU(t,e){return fa(ZP(),e,{relativeTo:t})}function fa(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let s=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?tO(t):t:e&64?OU(t):ZP(t);i.length>0&&o.length>1&&(o=o.filter(h=>!i.some(m=>m!=null&&"current"in m?(m==null?void 0:m.current)===h:m===h))),r=r??s.activeElement;let a=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(r))-1;if(e&4)return Math.max(0,o.indexOf(r))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},u=0,d=o.length,f;do{if(u>=d||u+d<=0)return 0;let h=l+u;if(e&16)h=(h+d)%d;else{if(h<0)return 3;if(h>=d)return 1}f=o[h],f==null||f.focus(c),u+=a}while(f!==s.activeElement);return e&6&&DU(f)&&f.select(),2}function nO(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function _U(){return/Android/gi.test(window.navigator.userAgent)}function IU(){return nO()||_U()}function Nl(t,e,n,r){let i=ws(n);g.useEffect(()=>{if(!t)return;function s(o){i.current(o)}return document.addEventListener(e,s,r),()=>document.removeEventListener(e,s,r)},[t,e,r])}function rO(t,e,n,r){let i=ws(n);g.useEffect(()=>{if(!t)return;function s(o){i.current(o)}return window.addEventListener(e,s,r),()=>window.removeEventListener(e,s,r)},[t,e,r])}const ES=30;function iO(t,e,n){let r=el(t,"outside-click"),i=ws(n),s=g.useCallback(function(l,c){if(l.defaultPrevented)return;let u=c(l);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let d=function f(h){return typeof h=="function"?f(h()):Array.isArray(h)||h instanceof Set?h:[h]}(e);for(let f of d)if(f!==null&&(f.contains(u)||l.composed&&l.composedPath().includes(f)))return;return!eO(u,xw.Loose)&&u.tabIndex!==-1&&l.preventDefault(),i.current(l,u)},[i,e]),o=g.useRef(null);Nl(r,"pointerdown",l=>{var c,u;o.current=((u=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:u[0])||l.target},!0),Nl(r,"mousedown",l=>{var c,u;o.current=((u=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:u[0])||l.target},!0),Nl(r,"click",l=>{IU()||o.current&&(s(l,()=>o.current),o.current=null)},!0);let a=g.useRef({x:0,y:0});Nl(r,"touchstart",l=>{a.current.x=l.touches[0].clientX,a.current.y=l.touches[0].clientY},!0),Nl(r,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-a.current.x)>=ES||Math.abs(c.y-a.current.y)>=ES))return s(l,()=>l.target instanceof HTMLElement?l.target:null)},!0),rO(r,"blur",l=>s(l,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function tl(...t){return g.useMemo(()=>Za(...t),[...t])}function sO(t,e,n,r){let i=ws(n);g.useEffect(()=>{t=t??window;function s(o){i.current(o)}return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s,r)},[t,e,r])}function oO(t,e){return g.useMemo(()=>{var n;if(t.type)return t.type;let r=(n=t.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(e==null?void 0:e.tagName)==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function LU(){let t;return{before({doc:e}){var n;let r=e.documentElement,i=(n=e.defaultView)!=null?n:window;t=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),s=Math.max(0,t-i);n.style(r,"paddingRight",`${s}px`)}}}function $U(){return nO()?{before({doc:t,d:e,meta:n}){function r(i){return n.containers.flatMap(s=>s()).some(s=>s.contains(i))}e.microTask(()=>{var i;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let a=fi();a.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>a.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,o=null;e.addEventListener(t,"click",a=>{if(a.target instanceof HTMLElement)try{let l=a.target.closest("a");if(!l)return;let{hash:c}=new URL(l.href),u=t.querySelector(c);u&&!r(u)&&(o=u)}catch{}},!0),e.addEventListener(t,"touchstart",a=>{if(a.target instanceof HTMLElement)if(r(a.target)){let l=a.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(a.target,"touchAction","none")}),e.addEventListener(t,"touchmove",a=>{if(a.target instanceof HTMLElement){if(a.target.tagName==="INPUT")return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),e.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;s!==l&&window.scrollTo(0,s),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function FU(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function BU(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let Us=JP(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:fi(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:BU(n)},i=[$U(),LU(),FU()];i.forEach(({before:s})=>s==null?void 0:s(r)),i.forEach(({after:s})=>s==null?void 0:s(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Us.subscribe(()=>{let t=Us.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&Us.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Us.dispatch("TEARDOWN",n)}});function VU(t,e,n=()=>({containers:[]})){let r=YP(Us),i=e?r.get(e):void 0,s=i?i.count>0:!1;return Ie(()=>{if(!(!e||!t))return Us.dispatch("PUSH",e,n),()=>Us.dispatch("POP",e,n)},[t,e]),s}function aO(t,e,n=()=>[document.body]){let r=el(t,"scroll-lock");VU(r,e,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],n]}})}function TS(t){return[t.screenX,t.screenY]}function zU(){let t=g.useRef([-1,-1]);return{wasMoved(e){let n=TS(e);return t.current[0]===n[0]&&t.current[1]===n[1]?!1:(t.current=n,!0)},update(e){t.current=TS(e)}}}function UU(t=0){let[e,n]=g.useState(t),r=g.useCallback(l=>n(l),[e]),i=g.useCallback(l=>n(c=>c|l),[e]),s=g.useCallback(l=>(e&l)===l,[e]),o=g.useCallback(l=>n(c=>c&~l),[n]),a=g.useCallback(l=>n(c=>c^l),[n]);return{flags:e,setFlag:r,addFlag:i,hasFlag:s,removeFlag:o,toggleFlag:a}}var HU={},NS,MS;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((NS=process==null?void 0:HU)==null?void 0:NS.NODE_ENV)==="test"&&typeof((MS=Element==null?void 0:Element.prototype)==null?void 0:MS.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var WU=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(WU||{});function lO(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function cO(t,e,n,r){let[i,s]=g.useState(n),{hasFlag:o,addFlag:a,removeFlag:l}=UU(t&&i?3:0),c=g.useRef(!1),u=g.useRef(!1),d=hi();return Ie(()=>{var f;if(t){if(n&&s(!0),!e){n&&a(3);return}return(f=r==null?void 0:r.start)==null||f.call(r,n),KU(e,{inFlight:c,prepare(){u.current?u.current=!1:u.current=c.current,c.current=!0,!u.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){u.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var h;u.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(c.current=!1,l(7),n||s(!1),(h=r==null?void 0:r.end)==null||h.call(r,n))}})}},[t,n,e,d]),t?[i,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function KU(t,{prepare:e,run:n,done:r,inFlight:i}){let s=fi();return qU(t,{prepare:e,inFlight:i}),s.nextFrame(()=>{n(),s.requestAnimationFrame(()=>{s.add(GU(t,r))})}),s.dispose}function GU(t,e){var n,r;let i=fi();if(!t)return i.dispose;let s=!1;i.add(()=>{s=!0});let o=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(a=>a instanceof CSSTransition))!=null?r:[];return o.length===0?(e(),i.dispose):(Promise.allSettled(o.map(a=>a.finished)).then(()=>{s||e()}),i.dispose)}function qU(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function ww(t,e){let n=g.useRef([]),r=te(t);g.useEffect(()=>{let i=[...n.current];for(let[s,o]of e.entries())if(n.current[s]!==o){let a=r(e,i);return n.current=e,a}},[r,...e])}function Bp(){return typeof window<"u"}function nl(t){return uO(t)?(t.nodeName||"").toLowerCase():"#document"}function Tn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Fr(t){var e;return(e=(uO(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function uO(t){return Bp()?t instanceof Node||t instanceof Tn(t).Node:!1}function qt(t){return Bp()?t instanceof Element||t instanceof Tn(t).Element:!1}function Rr(t){return Bp()?t instanceof HTMLElement||t instanceof Tn(t).HTMLElement:!1}function PS(t){return!Bp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Tn(t).ShadowRoot}function Pu(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=dr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function JU(t){return["table","td","th"].includes(nl(t))}function Vp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function bw(t){const e=kw(),n=qt(t)?dr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function YU(t){let e=ds(t);for(;Rr(e)&&!Ia(e);){if(bw(e))return e;if(Vp(e))return null;e=ds(e)}return null}function kw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ia(t){return["html","body","#document"].includes(nl(t))}function dr(t){return Tn(t).getComputedStyle(t)}function zp(t){return qt(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ds(t){if(nl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||PS(t)&&t.host||Fr(t);return PS(e)?e.host:e}function dO(t){const e=ds(t);return Ia(e)?t.ownerDocument?t.ownerDocument.body:t.body:Rr(e)&&Pu(e)?e:dO(e)}function Qc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=dO(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Tn(i);if(s){const a=$0(o);return e.concat(o,o.visualViewport||[],Pu(i)?i:[],a&&n?Qc(a):[])}return e.concat(i,Qc(i,[],n))}function $0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function XU(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}const co=Math.min,Ft=Math.max,Zc=Math.round,xd=Math.floor,Dr=t=>({x:t,y:t}),QU={left:"right",right:"left",bottom:"top",top:"bottom"},ZU={start:"end",end:"start"};function OS(t,e,n){return Ft(t,co(e,n))}function rl(t,e){return typeof t=="function"?t(e):t}function fs(t){return t.split("-")[0]}function Ou(t){return t.split("-")[1]}function fO(t){return t==="x"?"y":"x"}function hO(t){return t==="y"?"height":"width"}function uo(t){return["top","bottom"].includes(fs(t))?"y":"x"}function pO(t){return fO(uo(t))}function e6(t,e,n){n===void 0&&(n=!1);const r=Ou(t),i=pO(t),s=hO(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=nh(o)),[o,nh(o)]}function t6(t){const e=nh(t);return[F0(t),e,F0(e)]}function F0(t){return t.replace(/start|end/g,e=>ZU[e])}function n6(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function r6(t,e,n,r){const i=Ou(t);let s=n6(fs(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(F0)))),s}function nh(t){return t.replace(/left|right|bottom|top/g,e=>QU[e])}function i6(t){return{top:0,right:0,bottom:0,left:0,...t}}function s6(t){return typeof t!="number"?i6(t):{top:t,right:t,bottom:t,left:t}}function rh(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function jS(t,e,n){let{reference:r,floating:i}=t;const s=uo(e),o=pO(e),a=hO(o),l=fs(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Ou(e)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const o6=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=jS(c,r,l),f=r,h={},m=0;for(let y=0;y<a.length;y++){const{name:x,fn:v}=a[y],{x:w,y:b,data:k,reset:S}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:e}});u=w??u,d=b??d,h={...h,[x]:{...h[x],...k}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:u,y:d}=jS(c,f,l)),y=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};async function Up(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=rl(e,t),m=s6(h),x=a[f?d==="floating"?"reference":"floating":d],v=rh(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(x)))==null||n?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},S=rh(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:b,strategy:l}):w);return{top:(v.top-S.top+m.top)/k.y,bottom:(S.bottom-v.bottom+m.bottom)/k.y,left:(v.left-S.left+m.left)/k.x,right:(S.right-v.right+m.right)/k.x}}const a6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:y=!0,...x}=rl(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=fs(i),w=uo(a),b=fs(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=f||(b||!y?[nh(a)]:t6(a)),C=m!=="none";!f&&C&&S.push(...r6(a,y,m,k));const E=[a,...S],T=await Up(e,x),P=[];let N=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&P.push(T[v]),d){const Y=e6(i,o,k);P.push(T[Y[0]],T[Y[1]])}if(N=[...N,{placement:i,overflows:P}],!P.every(Y=>Y<=0)){var M,A;const Y=(((M=s.flip)==null?void 0:M.index)||0)+1,R=E[Y];if(R)return{data:{index:Y,overflows:N},reset:{placement:R}};let X=(A=N.filter(V=>V.overflows[0]<=0).sort((V,O)=>V.overflows[1]-O.overflows[1])[0])==null?void 0:A.placement;if(!X)switch(h){case"bestFit":{var B;const V=(B=N.filter(O=>{if(C){const j=uo(O.placement);return j===w||j==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(j=>j>0).reduce((j,F)=>j+F,0)]).sort((O,j)=>O[1]-j[1])[0])==null?void 0:B[0];V&&(X=V);break}case"initialPlacement":X=a;break}if(i!==X)return{reset:{placement:X}}}return{}}}};async function l6(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=fs(n),a=Ou(n),l=uo(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=rl(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const c6=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await l6(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},u6=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:v,y:w}=x;return{x:v,y:w}}},...l}=rl(t,e),c={x:n,y:r},u=await Up(e,l),d=uo(fs(i)),f=fO(d);let h=c[f],m=c[d];if(s){const x=f==="y"?"top":"left",v=f==="y"?"bottom":"right",w=h+u[x],b=h-u[v];h=OS(w,h,b)}if(o){const x=d==="y"?"top":"left",v=d==="y"?"bottom":"right",w=m+u[x],b=m-u[v];m=OS(w,m,b)}const y=a.fn({...e,[f]:h,[d]:m});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[f]:s,[d]:o}}}}}},d6=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=rl(t,e),u=await Up(e,c),d=fs(i),f=Ou(i),h=uo(i)==="y",{width:m,height:y}=s.floating;let x,v;d==="top"||d==="bottom"?(x=d,v=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,x=f==="end"?"top":"bottom");const w=y-u.top-u.bottom,b=m-u.left-u.right,k=co(y-u[x],w),S=co(m-u[v],b),C=!e.middlewareData.shift;let E=k,T=S;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=w),C&&!f){const N=Ft(u.left,0),M=Ft(u.right,0),A=Ft(u.top,0),B=Ft(u.bottom,0);h?T=m-2*(N!==0||M!==0?N+M:Ft(u.left,u.right)):E=y-2*(A!==0||B!==0?A+B:Ft(u.top,u.bottom))}await l({...e,availableWidth:T,availableHeight:E});const P=await o.getDimensions(a.floating);return m!==P.width||y!==P.height?{reset:{rects:!0}}:{}}}};function mO(t){const e=dr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Rr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Zc(n)!==s||Zc(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Sw(t){return qt(t)?t:t.contextElement}function ha(t){const e=Sw(t);if(!Rr(e))return Dr(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=mO(e);let o=(s?Zc(n.width):n.width)/r,a=(s?Zc(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const f6=Dr(0);function gO(t){const e=Tn(t);return!kw()||!e.visualViewport?f6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function h6(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Tn(t)?!1:e}function fo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Sw(t);let o=Dr(1);e&&(r?qt(r)&&(o=ha(r)):o=ha(t));const a=h6(s,n,r)?gO(s):Dr(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const f=Tn(s),h=r&&qt(r)?Tn(r):r;let m=f,y=$0(m);for(;y&&r&&h!==m;){const x=ha(y),v=y.getBoundingClientRect(),w=dr(y),b=v.left+(y.clientLeft+parseFloat(w.paddingLeft))*x.x,k=v.top+(y.clientTop+parseFloat(w.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,d*=x.y,l+=b,c+=k,m=Tn(y),y=$0(m)}}return rh({width:u,height:d,x:l,y:c})}function Cw(t,e){const n=zp(t).scrollLeft;return e?e.left+n:fo(Fr(t)).left+n}function yO(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:Cw(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function p6(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Fr(r),a=e?Vp(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Dr(1);const u=Dr(0),d=Rr(r);if((d||!d&&!s)&&((nl(r)!=="body"||Pu(o))&&(l=zp(r)),Rr(r))){const h=fo(r);c=ha(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const f=o&&!d&&!s?yO(o,l,!0):Dr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function m6(t){return Array.from(t.getClientRects())}function g6(t){const e=Fr(t),n=zp(t),r=t.ownerDocument.body,i=Ft(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ft(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Cw(t);const a=-n.scrollTop;return dr(r).direction==="rtl"&&(o+=Ft(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function y6(t,e){const n=Tn(t),r=Fr(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=kw();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function v6(t,e){const n=fo(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Rr(t)?ha(t):Dr(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function AS(t,e,n){let r;if(e==="viewport")r=y6(t,n);else if(e==="document")r=g6(Fr(t));else if(qt(e))r=v6(e,n);else{const i=gO(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return rh(r)}function vO(t,e){const n=ds(t);return n===e||!qt(n)||Ia(n)?!1:dr(n).position==="fixed"||vO(n,e)}function x6(t,e){const n=e.get(t);if(n)return n;let r=Qc(t,[],!1).filter(a=>qt(a)&&nl(a)!=="body"),i=null;const s=dr(t).position==="fixed";let o=s?ds(t):t;for(;qt(o)&&!Ia(o);){const a=dr(o),l=bw(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Pu(o)&&!l&&vO(t,o))?r=r.filter(u=>u!==o):i=a,o=ds(o)}return e.set(t,r),r}function w6(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Vp(e)?[]:x6(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=AS(e,u,i);return c.top=Ft(d.top,c.top),c.right=co(d.right,c.right),c.bottom=co(d.bottom,c.bottom),c.left=Ft(d.left,c.left),c},AS(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function b6(t){const{width:e,height:n}=mO(t);return{width:e,height:n}}function k6(t,e,n){const r=Rr(e),i=Fr(e),s=n==="fixed",o=fo(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Dr(0);if(r||!r&&!s)if((nl(e)!=="body"||Pu(i))&&(a=zp(e)),r){const f=fo(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=Cw(i));const c=i&&!r&&!s?yO(i,a):Dr(0),u=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:o.width,height:o.height}}function mg(t){return dr(t).position==="static"}function DS(t,e){if(!Rr(t)||dr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Fr(t)===n&&(n=n.ownerDocument.body),n}function xO(t,e){const n=Tn(t);if(Vp(t))return n;if(!Rr(t)){let i=ds(t);for(;i&&!Ia(i);){if(qt(i)&&!mg(i))return i;i=ds(i)}return n}let r=DS(t,e);for(;r&&JU(r)&&mg(r);)r=DS(r,e);return r&&Ia(r)&&mg(r)&&!bw(r)?n:r||YU(t)||n}const S6=async function(t){const e=this.getOffsetParent||xO,n=this.getDimensions,r=await n(t.floating);return{reference:k6(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function C6(t){return dr(t).direction==="rtl"}const E6={convertOffsetParentRelativeRectToViewportRelativeRect:p6,getDocumentElement:Fr,getClippingRect:w6,getOffsetParent:xO,getElementRects:S6,getClientRects:m6,getDimensions:b6,getScale:ha,isElement:qt,isRTL:C6};function wO(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function T6(t,e){let n=null,r;const i=Fr(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||e(),!f||!h)return;const m=xd(d),y=xd(i.clientWidth-(u+f)),x=xd(i.clientHeight-(d+h)),v=xd(u),b={rootMargin:-m+"px "+-y+"px "+-x+"px "+-v+"px",threshold:Ft(0,co(1,l))||1};let k=!0;function S(C){const E=C[0].intersectionRatio;if(E!==l){if(!k)return o();E?o(!1,E):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!wO(c,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(S,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(S,b)}n.observe(t)}return o(!0),s}function N6(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Sw(t),u=i||s?[...c?Qc(c):[],...Qc(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=c&&a?T6(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(v=>{let[w]=v;w&&w.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let m,y=l?fo(t):null;l&&x();function x(){const v=fo(t);y&&!wO(y,v)&&n(),y=v,m=requestAnimationFrame(x)}return n(),()=>{var v;u.forEach(w=>{i&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d==null||d(),(v=h)==null||v.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const gg=Up,M6=c6,P6=u6,O6=a6,j6=d6,A6=(t,e,n)=>{const r=new Map,i={platform:E6,...n},s={...i.platform,_c:r};return o6(t,e,{...i,platform:s})};var tf=typeof document<"u"?g.useLayoutEffect:g.useEffect;function ih(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!ih(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!ih(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function bO(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function RS(t,e){const n=bO(t);return Math.round(e*n)/n}function yg(t){const e=g.useRef(t);return tf(()=>{e.current=t}),e}function D6(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=g.useState(r);ih(f,r)||h(r);const[m,y]=g.useState(null),[x,v]=g.useState(null),w=g.useCallback(O=>{O!==C.current&&(C.current=O,y(O))},[]),b=g.useCallback(O=>{O!==E.current&&(E.current=O,v(O))},[]),k=s||m,S=o||x,C=g.useRef(null),E=g.useRef(null),T=g.useRef(u),P=l!=null,N=yg(l),M=yg(i),A=yg(c),B=g.useCallback(()=>{if(!C.current||!E.current)return;const O={placement:e,strategy:n,middleware:f};M.current&&(O.platform=M.current),A6(C.current,E.current,O).then(j=>{const F={...j,isPositioned:A.current!==!1};Y.current&&!ih(T.current,F)&&(T.current=F,tt.flushSync(()=>{d(F)}))})},[f,e,n,M,A]);tf(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(O=>({...O,isPositioned:!1})))},[c]);const Y=g.useRef(!1);tf(()=>(Y.current=!0,()=>{Y.current=!1}),[]),tf(()=>{if(k&&(C.current=k),S&&(E.current=S),k&&S){if(N.current)return N.current(k,S,B);B()}},[k,S,B,N,P]);const R=g.useMemo(()=>({reference:C,floating:E,setReference:w,setFloating:b}),[w,b]),X=g.useMemo(()=>({reference:k,floating:S}),[k,S]),V=g.useMemo(()=>{const O={position:n,left:0,top:0};if(!X.floating)return O;const j=RS(X.floating,u.x),F=RS(X.floating,u.y);return a?{...O,transform:"translate("+j+"px, "+F+"px)",...bO(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:j,top:F}},[n,a,X.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:B,refs:R,elements:X,floatingStyles:V}),[u,B,R,X,V])}const kO=(t,e)=>({...M6(t),options:[t,e]}),R6=(t,e)=>({...P6(t),options:[t,e]}),_6=(t,e)=>({...O6(t),options:[t,e]}),I6=(t,e)=>({...j6(t),options:[t,e]}),SO={...df},L6=SO.useInsertionEffect,$6=L6||(t=>t());function CO(t){const e=g.useRef(()=>{});return $6(()=>{e.current=t}),g.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}var B0=typeof document<"u"?g.useLayoutEffect:g.useEffect;let _S=!1,F6=0;const IS=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+F6++;function B6(){const[t,e]=g.useState(()=>_S?IS():void 0);return B0(()=>{t==null&&e(IS())},[]),g.useEffect(()=>{_S=!0},[]),t}const V6=SO.useId,z6=V6||B6;function U6(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const H6=g.createContext(null),W6=g.createContext(null),K6=()=>{var t;return((t=g.useContext(H6))==null?void 0:t.id)||null},G6=()=>g.useContext(W6),q6="data-floating-ui-focusable";function J6(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=z6(),s=g.useRef({}),[o]=g.useState(()=>U6()),a=K6()!=null,[l,c]=g.useState(r.reference),u=CO((h,m,y)=>{s.current.openEvent=h?m:void 0,o.emit("openchange",{open:h,event:m,reason:y,nested:a}),n==null||n(h,m,y)}),d=g.useMemo(()=>({setPositionReference:c}),[]),f=g.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return g.useMemo(()=>({dataRef:s,open:e,onOpenChange:u,elements:f,events:o,floatingId:i,refs:d}),[e,u,f,o,i,d])}function Y6(t){t===void 0&&(t={});const{nodeId:e}=t,n=J6({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,o]=g.useState(null),[a,l]=g.useState(null),u=(i==null?void 0:i.domReference)||s,d=g.useRef(null),f=G6();B0(()=>{u&&(d.current=u)},[u]);const h=D6({...t,elements:{...i,...a&&{reference:a}}}),m=g.useCallback(b=>{const k=qt(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;l(k),h.refs.setReference(k)},[h.refs]),y=g.useCallback(b=>{(qt(b)||b===null)&&(d.current=b,o(b)),(qt(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!qt(b))&&h.refs.setReference(b)},[h.refs]),x=g.useMemo(()=>({...h.refs,setReference:y,setPositionReference:m,domReference:d}),[h.refs,y,m]),v=g.useMemo(()=>({...h.elements,domReference:u}),[h.elements,u]),w=g.useMemo(()=>({...h,...r,refs:x,elements:v,nodeId:e}),[h,x,v,e,r]);return B0(()=>{r.dataRef.current.floatingContext=w;const b=f==null?void 0:f.nodesRef.current.find(k=>k.id===e);b&&(b.context=w)}),g.useMemo(()=>({...h,context:w,refs:x,elements:v}),[h,x,v,w])}const LS="active",$S="selected";function vg(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[LS]:o,[$S]:a,...l}=t;s=l}return{...n==="floating"&&{tabIndex:-1,[q6]:""},...s,...e.map(o=>{const a=o?o[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[c,u]=l;if(!(i&&[LS,$S].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof u=="function"){var d;(d=r.get(c))==null||d.push(u),o[c]=function(){for(var f,h=arguments.length,m=new Array(h),y=0;y<h;y++)m[y]=arguments[y];return(f=r.get(c))==null?void 0:f.map(x=>x(...m)).find(x=>x!==void 0)}}}else o[c]=u}),o),{})}}function X6(t){t===void 0&&(t=[]);const e=t.map(a=>a==null?void 0:a.reference),n=t.map(a=>a==null?void 0:a.floating),r=t.map(a=>a==null?void 0:a.item),i=g.useCallback(a=>vg(a,t,"reference"),e),s=g.useCallback(a=>vg(a,t,"floating"),n),o=g.useCallback(a=>vg(a,t,"item"),r);return g.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}function FS(t,e){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:e}}}}const Q6=t=>({name:"inner",options:t,async fn(e){const{listRef:n,overflowRef:r,onFallbackChange:i,offset:s=0,index:o=0,minItemsVisible:a=4,referenceOverflowThreshold:l=0,scrollRef:c,...u}=rl(t,e),{rects:d,elements:{floating:f}}=e,h=n.current[o],m=(c==null?void 0:c.current)||f,y=f.clientTop||m.clientTop,x=f.clientTop!==0,v=m.clientTop!==0,w=f===m;if(!h)return{};const b={...e,...await kO(-h.offsetTop-f.clientTop-d.reference.height/2-h.offsetHeight/2-s).fn(e)},k=await gg(FS(b,m.scrollHeight+y+f.clientTop),u),S=await gg(b,{...u,elementContext:"reference"}),C=Ft(0,k.top),E=b.y+C,N=(m.scrollHeight>m.clientHeight?M=>M:Zc)(Ft(0,m.scrollHeight+(x&&w||v?y*2:0)-C-Ft(0,k.bottom)));if(m.style.maxHeight=N+"px",m.scrollTop=C,i){const M=m.offsetHeight<h.offsetHeight*co(a,n.current.length)-1||S.top>=-l||S.bottom>=-l;tt.flushSync(()=>i(M))}return r&&(r.current=await gg(FS({...b,y:E},m.offsetHeight+y+f.clientTop),u)),{y:E}}});function Z6(t,e){const{open:n,elements:r}=t,{enabled:i=!0,overflowRef:s,scrollRef:o,onChange:a}=e,l=CO(a),c=g.useRef(!1),u=g.useRef(null),d=g.useRef(null);g.useEffect(()=>{if(!i)return;function h(y){if(y.ctrlKey||!m||s.current==null)return;const x=y.deltaY,v=s.current.top>=-.5,w=s.current.bottom>=-.5,b=m.scrollHeight-m.clientHeight,k=x<0?-1:1,S=x<0?"max":"min";m.scrollHeight<=m.clientHeight||(!v&&x>0||!w&&x<0?(y.preventDefault(),tt.flushSync(()=>{l(C=>C+Math[S](x,b*k))})):/firefox/i.test(XU())&&(m.scrollTop+=x))}const m=(o==null?void 0:o.current)||r.floating;if(n&&m)return m.addEventListener("wheel",h),requestAnimationFrame(()=>{u.current=m.scrollTop,s.current!=null&&(d.current={...s.current})}),()=>{u.current=null,d.current=null,m.removeEventListener("wheel",h)}},[i,n,r.floating,s,o,l]);const f=g.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const h=(o==null?void 0:o.current)||r.floating;if(!(!s.current||!h||!c.current)){if(u.current!==null){const m=h.scrollTop-u.current;(s.current.bottom<-.5&&m<-1||s.current.top<-.5&&m>1)&&tt.flushSync(()=>l(y=>y+m))}requestAnimationFrame(()=>{u.current=h.scrollTop})}}}),[r.floating,l,s,o]);return g.useMemo(()=>i?{floating:f}:{},[i,f])}let il=g.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});il.displayName="FloatingContext";let Ew=g.createContext(null);Ew.displayName="PlacementContext";function eH(t){return g.useMemo(()=>t?typeof t=="string"?{to:t}:t:null,[t])}function tH(){return g.useContext(il).setReference}function nH(){return g.useContext(il).getReferenceProps}function rH(){let{getFloatingProps:t,slot:e}=g.useContext(il);return g.useCallback((...n)=>Object.assign({},t(...n),{"data-anchor":e.anchor}),[t,e])}function iH(t=null){t===!1&&(t=null),typeof t=="string"&&(t={to:t});let e=g.useContext(Ew),n=g.useMemo(()=>t,[JSON.stringify(t,(i,s)=>{var o;return(o=s==null?void 0:s.outerHTML)!=null?o:s})]);Ie(()=>{e==null||e(n??null)},[e,n]);let r=g.useContext(il);return g.useMemo(()=>[r.setFloating,t?r.styles:{}],[r.setFloating,t,r.styles])}let BS=4;function sH({children:t,enabled:e=!0}){let[n,r]=g.useState(null),[i,s]=g.useState(0),o=g.useRef(null),[a,l]=g.useState(null);oH(a);let c=e&&n!==null&&a!==null,{to:u="bottom",gap:d=0,offset:f=0,padding:h=0,inner:m}=aH(n,a),[y,x="center"]=u.split(" ");Ie(()=>{c&&s(0)},[c]);let{refs:v,floatingStyles:w,context:b}=Y6({open:c,placement:y==="selection"?x==="center"?"bottom":`bottom-${x}`:x==="center"?`${y}`:`${y}-${x}`,strategy:"absolute",transform:!1,middleware:[kO({mainAxis:y==="selection"?0:d,crossAxis:f}),R6({padding:h}),y!=="selection"&&_6({padding:h}),y==="selection"&&m?Q6({...m,padding:h,overflowRef:o,offset:i,minItemsVisible:BS,referenceOverflowThreshold:h,onFallbackChange(M){var A,B;if(!M)return;let Y=b.elements.floating;if(!Y)return;let R=parseFloat(getComputedStyle(Y).scrollPaddingBottom)||0,X=Math.min(BS,Y.childElementCount),V=0,O=0;for(let j of(B=(A=b.elements.floating)==null?void 0:A.childNodes)!=null?B:[])if(j instanceof HTMLElement){let F=j.offsetTop,H=F+j.clientHeight+R,Z=Y.scrollTop,z=Z+Y.clientHeight;if(F>=Z&&H<=z)X--;else{O=Math.max(0,Math.min(H,z)-Math.max(F,Z)),V=j.clientHeight;break}}X>=1&&s(j=>{let F=V*X-O+R;return j>=F?j:F})}}):null,I6({padding:h,apply({availableWidth:M,availableHeight:A,elements:B}){Object.assign(B.floating.style,{overflow:"auto",maxWidth:`${M}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${A}px)`})}})].filter(Boolean),whileElementsMounted:N6}),[k=y,S=x]=b.placement.split("-");y==="selection"&&(k="selection");let C=g.useMemo(()=>({anchor:[k,S].filter(Boolean).join(" ")}),[k,S]),E=Z6(b,{overflowRef:o,onChange:s}),{getReferenceProps:T,getFloatingProps:P}=X6([E]),N=te(M=>{l(M),v.setFloating(M)});return g.createElement(Ew.Provider,{value:r},g.createElement(il.Provider,{value:{setFloating:N,setReference:v.setReference,styles:w,getReferenceProps:T,getFloatingProps:P,slot:C}},t))}function oH(t){Ie(()=>{if(!t)return;let e=new MutationObserver(()=>{let n=window.getComputedStyle(t).maxHeight,r=parseFloat(n);if(isNaN(r))return;let i=parseInt(n);isNaN(i)||r!==i&&(t.style.maxHeight=`${Math.ceil(r)}px`)});return e.observe(t,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[t])}function aH(t,e){var n,r,i;let s=xg((n=t==null?void 0:t.gap)!=null?n:"var(--anchor-gap, 0)",e),o=xg((r=t==null?void 0:t.offset)!=null?r:"var(--anchor-offset, 0)",e),a=xg((i=t==null?void 0:t.padding)!=null?i:"var(--anchor-padding, 0)",e);return{...t,gap:s,offset:o,padding:a}}function xg(t,e,n=void 0){let r=hi(),i=te((l,c)=>{if(l==null)return[n,null];if(typeof l=="number")return[l,null];if(typeof l=="string"){if(!c)return[n,null];let u=VS(l,c);return[u,d=>{let f=EO(l);{let h=f.map(m=>window.getComputedStyle(c).getPropertyValue(m));r.requestAnimationFrame(function m(){r.nextFrame(m);let y=!1;for(let[v,w]of f.entries()){let b=window.getComputedStyle(c).getPropertyValue(w);if(h[v]!==b){h[v]=b,y=!0;break}}if(!y)return;let x=VS(l,c);u!==x&&(d(x),u=x)})}return r.dispose}]}return[n,null]}),s=g.useMemo(()=>i(t,e)[0],[t,e]),[o=s,a]=g.useState();return Ie(()=>{let[l,c]=i(t,e);if(a(l),!!c)return c(a)},[t,e]),o}function EO(t){let e=/var\((.*)\)/.exec(t);if(e){let n=e[1].indexOf(",");if(n===-1)return[e[1]];let r=e[1].slice(0,n).trim(),i=e[1].slice(n+1).trim();return i?[r,...EO(i)]:[r]}return[]}function VS(t,e){let n=document.createElement("div");e.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",t,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return e.removeChild(n),r}function lH(t,e){let[n,r]=g.useState(e);return!t&&n!==e&&r(e),t?n:e}let Hp=g.createContext(null);Hp.displayName="OpenClosedContext";var Jt=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Jt||{});function ju(){return g.useContext(Hp)}function TO({value:t,children:e}){return D.createElement(Hp.Provider,{value:t},e)}function cH({children:t}){return D.createElement(Hp.Provider,{value:null},t)}function uH(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let Ii=[];uH(()=>{function t(e){if(!(e.target instanceof HTMLElement)||e.target===document.body||Ii[0]===e.target)return;let n=e.target;n=n.closest(th),Ii.unshift(n??e.target),Ii=Ii.filter(r=>r!=null&&r.isConnected),Ii.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function dH(t){throw new Error("Unexpected object: "+t)}var ut=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(ut||{});function wg(t,e){let n=e.resolveItems();if(n.length<=0)return null;let r=e.resolveActiveIndex(),i=r??-1;switch(t.focus){case 0:{for(let s=0;s<n.length;++s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 1:{i===-1&&(i=n.length);for(let s=i-1;s>=0;--s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 2:{for(let s=i+1;s<n.length;++s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 3:{for(let s=n.length-1;s>=0;--s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 4:{for(let s=0;s<n.length;++s)if(e.resolveId(n[s],s,n)===t.id)return s;return r}case 5:return null;default:dH(t)}}function NO(t){let e=te(t),n=g.useRef(!1);g.useEffect(()=>(n.current=!1,()=>{n.current=!0,Ip(()=>{n.current&&e()})}),[e])}function fH(){let t=typeof document>"u";return"useSyncExternalStore"in df?(e=>e.useSyncExternalStore)(df)(()=>()=>{},()=>!1,()=>!t):!1}function Au(){let t=fH(),[e,n]=g.useState(Xs.isHandoffComplete);return e&&Xs.isHandoffComplete===!1&&n(!1),g.useEffect(()=>{e!==!0&&n(!0)},[e]),g.useEffect(()=>Xs.handoff(),[]),t?!1:e}let MO=g.createContext(!1);function hH(){return g.useContext(MO)}function zS(t){return D.createElement(MO.Provider,{value:t.force},t.children)}function pH(t){let e=hH(),n=g.useContext(OO),r=tl(t),[i,s]=g.useState(()=>{var o;if(!e&&n!==null)return(o=n.current)!=null?o:null;if(Xs.isServer)return null;let a=r==null?void 0:r.getElementById("headlessui-portal-root");if(a)return a;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return g.useEffect(()=>{i!==null&&(r!=null&&r.body.contains(i)||r==null||r.body.appendChild(i))},[i,r]),g.useEffect(()=>{e||n!==null&&s(n.current)},[n,s,e]),i}let PO=g.Fragment,mH=Ze(function(t,e){let n=t,r=g.useRef(null),i=jt(hU(d=>{r.current=d}),e),s=tl(r),o=pH(r),[a]=g.useState(()=>{var d;return Xs.isServer?null:(d=s==null?void 0:s.createElement("div"))!=null?d:null}),l=g.useContext(V0),c=Au();Ie(()=>{!o||!a||o.contains(a)||(a.setAttribute("data-headlessui-portal",""),o.appendChild(a))},[o,a]),Ie(()=>{if(a&&l)return l.register(a)},[l,a]),NO(()=>{var d;!o||!a||(a instanceof Node&&o.contains(a)&&o.removeChild(a),o.childNodes.length<=0&&((d=o.parentElement)==null||d.removeChild(o)))});let u=it();return c?!o||!a?null:tt.createPortal(u({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:PO,name:"Portal"}),a):null});function gH(t,e){let n=jt(e),{enabled:r=!0,...i}=t,s=it();return r?D.createElement(mH,{...i,ref:n}):s({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:PO,name:"Portal"})}let yH=g.Fragment,OO=g.createContext(null);function vH(t,e){let{target:n,...r}=t,i={ref:jt(e)},s=it();return D.createElement(OO.Provider,{value:n},s({ourProps:i,theirProps:r,defaultTag:yH,name:"Popover.Group"}))}let V0=g.createContext(null);function xH(){let t=g.useContext(V0),e=g.useRef([]),n=te(s=>(e.current.push(s),t&&t.register(s),()=>r(s))),r=te(s=>{let o=e.current.indexOf(s);o!==-1&&e.current.splice(o,1),t&&t.unregister(s)}),i=g.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,g.useMemo(()=>function({children:s}){return D.createElement(V0.Provider,{value:i},s)},[i])]}let wH=Ze(gH),jO=Ze(vH),AO=Object.assign(wH,{Group:jO});function bH(t,e=typeof document<"u"?document.defaultView:null,n){let r=el(t,"escape");sO(e,"keydown",i=>{r&&(i.defaultPrevented||i.key===Xe.Escape&&n(i))})}function kH(){var t;let[e]=g.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=g.useState((t=e==null?void 0:e.matches)!=null?t:!1);return Ie(()=>{if(!e)return;function i(s){r(s.matches)}return e.addEventListener("change",i),()=>e.removeEventListener("change",i)},[e]),n}function SH({defaultContainers:t=[],portals:e,mainTreeNode:n}={}){let r=tl(n),i=te(()=>{var s,o;let a=[];for(let l of t)l!==null&&(l instanceof HTMLElement?a.push(l):"current"in l&&l.current instanceof HTMLElement&&a.push(l.current));if(e!=null&&e.current)for(let l of e.current)a.push(l);for(let l of(s=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?s:[])l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((o=n==null?void 0:n.getRootNode())==null?void 0:o.host))||a.some(c=>l.contains(c))||a.push(l));return a});return{resolveContainers:i,contains:te(s=>i().some(o=>o.contains(s)))}}let DO=g.createContext(null);function US({children:t,node:e}){let[n,r]=g.useState(null),i=RO(e??n);return D.createElement(DO.Provider,{value:i},t,i===null&&D.createElement(Xc,{features:_a.Hidden,ref:s=>{var o,a;if(s){for(let l of(a=(o=Za(s))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?a:[])if(l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l!=null&&l.contains(s)){r(l);break}}}}))}function RO(t=null){var e;return(e=g.useContext(DO))!=null?e:t}function Tw(){let t=g.useRef(!1);return Ie(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var Vl=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Vl||{});function CH(){let t=g.useRef(0);return rO(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function _O(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)n.current instanceof HTMLElement&&e.add(n.current);return e}let EH="div";var Rs=(t=>(t[t.None=0]="None",t[t.InitialFocus=1]="InitialFocus",t[t.TabLock=2]="TabLock",t[t.FocusLock=4]="FocusLock",t[t.RestoreFocus=8]="RestoreFocus",t[t.AutoFocus=16]="AutoFocus",t))(Rs||{});function TH(t,e){let n=g.useRef(null),r=jt(n,e),{initialFocus:i,initialFocusFallback:s,containers:o,features:a=15,...l}=t;Au()||(a=0);let c=tl(n);OH(a,{ownerDocument:c});let u=jH(a,{ownerDocument:c,container:n,initialFocus:i,initialFocusFallback:s});AH(a,{ownerDocument:c,container:n,containers:o,previousActiveElement:u});let d=CH(),f=te(w=>{let b=n.current;b&&(k=>k())(()=>{mn(d.current,{[Vl.Forwards]:()=>{fa(b,sr.First,{skipElements:[w.relatedTarget,s]})},[Vl.Backwards]:()=>{fa(b,sr.Last,{skipElements:[w.relatedTarget,s]})}})})}),h=el(!!(a&2),"focus-trap#tab-lock"),m=hi(),y=g.useRef(!1),x={ref:r,onKeyDown(w){w.key=="Tab"&&(y.current=!0,m.requestAnimationFrame(()=>{y.current=!1}))},onBlur(w){if(!(a&4))return;let b=_O(o);n.current instanceof HTMLElement&&b.add(n.current);let k=w.relatedTarget;k instanceof HTMLElement&&k.dataset.headlessuiFocusGuard!=="true"&&(IO(b,k)||(y.current?fa(n.current,mn(d.current,{[Vl.Forwards]:()=>sr.Next,[Vl.Backwards]:()=>sr.Previous})|sr.WrapAround,{relativeTo:w.target}):w.target instanceof HTMLElement&&ti(w.target)))}},v=it();return D.createElement(D.Fragment,null,h&&D.createElement(Xc,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:_a.Focusable}),v({ourProps:x,theirProps:l,defaultTag:EH,name:"FocusTrap"}),h&&D.createElement(Xc,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:_a.Focusable}))}let NH=Ze(TH),MH=Object.assign(NH,{features:Rs});function PH(t=!0){let e=g.useRef(Ii.slice());return ww(([n],[r])=>{r===!0&&n===!1&&Ip(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=Ii.slice())},[t,Ii,e]),te(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function OH(t,{ownerDocument:e}){let n=!!(t&8),r=PH(n);ww(()=>{n||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&ti(r())},[n]),NO(()=>{n&&ti(r())})}function jH(t,{ownerDocument:e,container:n,initialFocus:r,initialFocusFallback:i}){let s=g.useRef(null),o=el(!!(t&1),"focus-trap#initial-focus"),a=Tw();return ww(()=>{if(t===0)return;if(!o){i!=null&&i.current&&ti(i.current);return}let l=n.current;l&&Ip(()=>{if(!a.current)return;let c=e==null?void 0:e.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===c){s.current=c;return}}else if(l.contains(c)){s.current=c;return}if(r!=null&&r.current)ti(r.current);else{if(t&16){if(fa(l,sr.First|sr.AutoFocus)!==L0.Error)return}else if(fa(l,sr.First)!==L0.Error)return;if(i!=null&&i.current&&(ti(i.current),(e==null?void 0:e.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}s.current=e==null?void 0:e.activeElement})},[i,o,t]),s}function AH(t,{ownerDocument:e,container:n,containers:r,previousActiveElement:i}){let s=Tw(),o=!!(t&4);sO(e==null?void 0:e.defaultView,"focus",a=>{if(!o||!s.current)return;let l=_O(r);n.current instanceof HTMLElement&&l.add(n.current);let c=i.current;if(!c)return;let u=a.target;u&&u instanceof HTMLElement?IO(l,u)?(i.current=u,ti(u)):(a.preventDefault(),a.stopPropagation(),ti(c)):ti(i.current)},!0)}function IO(t,e){for(let n of t)if(n.contains(e))return!0;return!1}function LO(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:FO)!==g.Fragment||D.Children.count(t.children)===1}let Wp=g.createContext(null);Wp.displayName="TransitionContext";var DH=(t=>(t.Visible="visible",t.Hidden="hidden",t))(DH||{});function RH(){let t=g.useContext(Wp);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function _H(){let t=g.useContext(Kp);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let Kp=g.createContext(null);Kp.displayName="NestingContext";function Gp(t){return"children"in t?Gp(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function $O(t,e){let n=ws(t),r=g.useRef([]),i=Tw(),s=hi(),o=te((h,m=zi.Hidden)=>{let y=r.current.findIndex(({el:x})=>x===h);y!==-1&&(mn(m,{[zi.Unmount](){r.current.splice(y,1)},[zi.Hidden](){r.current[y].state="hidden"}}),s.microTask(()=>{var x;!Gp(r)&&i.current&&((x=n.current)==null||x.call(n))}))}),a=te(h=>{let m=r.current.find(({el:y})=>y===h);return m?m.state!=="visible"&&(m.state="visible"):r.current.push({el:h,state:"visible"}),()=>o(h,zi.Unmount)}),l=g.useRef([]),c=g.useRef(Promise.resolve()),u=g.useRef({enter:[],leave:[]}),d=te((h,m,y)=>{l.current.splice(0),e&&(e.chains.current[m]=e.chains.current[m].filter(([x])=>x!==h)),e==null||e.chains.current[m].push([h,new Promise(x=>{l.current.push(x)})]),e==null||e.chains.current[m].push([h,new Promise(x=>{Promise.all(u.current[m].map(([v,w])=>w)).then(()=>x())})]),m==="enter"?c.current=c.current.then(()=>e==null?void 0:e.wait.current).then(()=>y(m)):y(m)}),f=te((h,m,y)=>{Promise.all(u.current[m].splice(0).map(([x,v])=>v)).then(()=>{var x;(x=l.current.shift())==null||x()}).then(()=>y(m))});return g.useMemo(()=>({children:r,register:a,unregister:o,onStart:d,onStop:f,wait:c,chains:u}),[a,o,r,d,f,u,c])}let FO=g.Fragment,BO=Ra.RenderStrategy;function IH(t,e){var n,r;let{transition:i=!0,beforeEnter:s,afterEnter:o,beforeLeave:a,afterLeave:l,enter:c,enterFrom:u,enterTo:d,entered:f,leave:h,leaveFrom:m,leaveTo:y,...x}=t,[v,w]=g.useState(null),b=g.useRef(null),k=LO(t),S=jt(...k?[b,e,w]:e===null?[]:[e]),C=(n=x.unmount)==null||n?zi.Unmount:zi.Hidden,{show:E,appear:T,initial:P}=RH(),[N,M]=g.useState(E?"visible":"hidden"),A=_H(),{register:B,unregister:Y}=A;Ie(()=>B(b),[B,b]),Ie(()=>{if(C===zi.Hidden&&b.current){if(E&&N!=="visible"){M("visible");return}return mn(N,{hidden:()=>Y(b),visible:()=>B(b)})}},[N,b,B,Y,E,C]);let R=Au();Ie(()=>{if(k&&R&&N==="visible"&&b.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[b,N,R,k]);let X=P&&!T,V=T&&E&&P,O=g.useRef(!1),j=$O(()=>{O.current||(M("hidden"),Y(b))},A),F=te(Ne=>{O.current=!0;let kt=Ne?"enter":"leave";j.onStart(b,kt,st=>{st==="enter"?s==null||s():st==="leave"&&(a==null||a())})}),H=te(Ne=>{let kt=Ne?"enter":"leave";O.current=!1,j.onStop(b,kt,st=>{st==="enter"?o==null||o():st==="leave"&&(l==null||l())}),kt==="leave"&&!Gp(j)&&(M("hidden"),Y(b))});g.useEffect(()=>{k&&i||(F(E),H(E))},[E,k,i]);let Z=!(!i||!k||!R||X),[,z]=cO(Z,v,E,{start:F,end:H}),se=Ni({ref:S,className:((r=_0(x.className,V&&c,V&&u,z.enter&&c,z.enter&&z.closed&&u,z.enter&&!z.closed&&d,z.leave&&h,z.leave&&!z.closed&&m,z.leave&&z.closed&&y,!z.transition&&E&&f))==null?void 0:r.trim())||void 0,...lO(z)}),we=0;N==="visible"&&(we|=Jt.Open),N==="hidden"&&(we|=Jt.Closed),z.enter&&(we|=Jt.Opening),z.leave&&(we|=Jt.Closing);let Se=it();return D.createElement(Kp.Provider,{value:j},D.createElement(TO,{value:we},Se({ourProps:se,theirProps:x,defaultTag:FO,features:BO,visible:N==="visible",name:"Transition.Child"})))}function LH(t,e){let{show:n,appear:r=!1,unmount:i=!0,...s}=t,o=g.useRef(null),a=LO(t),l=jt(...a?[o,e]:e===null?[]:[e]);Au();let c=ju();if(n===void 0&&c!==null&&(n=(c&Jt.Open)===Jt.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=g.useState(n?"visible":"hidden"),f=$O(()=>{n||d("hidden")}),[h,m]=g.useState(!0),y=g.useRef([n]);Ie(()=>{h!==!1&&y.current[y.current.length-1]!==n&&(y.current.push(n),m(!1))},[y,n]);let x=g.useMemo(()=>({show:n,appear:r,initial:h}),[n,r,h]);Ie(()=>{n?d("visible"):!Gp(f)&&o.current!==null&&d("hidden")},[n,f]);let v={unmount:i},w=te(()=>{var S;h&&m(!1),(S=t.beforeEnter)==null||S.call(t)}),b=te(()=>{var S;h&&m(!1),(S=t.beforeLeave)==null||S.call(t)}),k=it();return D.createElement(Kp.Provider,{value:f},D.createElement(Wp.Provider,{value:x},k({ourProps:{...v,as:g.Fragment,children:D.createElement(VO,{ref:l,...v,...s,beforeEnter:w,beforeLeave:b})},theirProps:{},defaultTag:g.Fragment,features:BO,visible:u==="visible",name:"Transition"})))}function $H(t,e){let n=g.useContext(Wp)!==null,r=ju()!==null;return D.createElement(D.Fragment,null,!n&&r?D.createElement(z0,{ref:e,...t}):D.createElement(VO,{ref:e,...t}))}let z0=Ze(LH),VO=Ze(IH),Nw=Ze($H),nt=Object.assign(z0,{Child:Nw,Root:z0});var FH=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(FH||{}),BH=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(BH||{});let VH={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},Mw=g.createContext(null);Mw.displayName="DialogContext";function qp(t){let e=g.useContext(Mw);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,qp),n}return e}function zH(t,e){return mn(e.type,VH,t,e)}let HS=Ze(function(t,e){let n=g.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:s,initialFocus:o,role:a="dialog",autoFocus:l=!0,__demoMode:c=!1,unmount:u=!1,...d}=t,f=g.useRef(!1);a=function(){return a==="dialog"||a==="alertdialog"?a:(f.current||(f.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let h=ju();i===void 0&&h!==null&&(i=(h&Jt.Open)===Jt.Open);let m=g.useRef(null),y=jt(m,e),x=tl(m),v=i?0:1,[w,b]=g.useReducer(zH,{titleId:null,descriptionId:null,panelRef:g.createRef()}),k=te(()=>s(!1)),S=te(H=>b({type:0,id:H})),C=Au()?v===0:!1,[E,T]=xH(),P={get current(){var H;return(H=w.panelRef.current)!=null?H:m.current}},N=RO(),{resolveContainers:M}=SH({mainTreeNode:N,portals:E,defaultContainers:[P]}),A=h!==null?(h&Jt.Closing)===Jt.Closing:!1;XP(c||A?!1:C,{allowed:te(()=>{var H,Z;return[(Z=(H=m.current)==null?void 0:H.closest("[data-headlessui-portal]"))!=null?Z:null]}),disallowed:te(()=>{var H;return[(H=N==null?void 0:N.closest("body > *:not(#headlessui-portal-root)"))!=null?H:null]})}),iO(C,M,H=>{H.preventDefault(),k()}),bH(C,x==null?void 0:x.defaultView,H=>{H.preventDefault(),H.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),k()}),aO(c||A?!1:C,x,M),QP(C,m,k);let[B,Y]=HP(),R=g.useMemo(()=>[{dialogState:v,close:k,setTitleId:S,unmount:u},w],[v,w,k,S,u]),X=g.useMemo(()=>({open:v===0}),[v]),V={ref:y,id:r,role:a,tabIndex:-1,"aria-modal":c?void 0:v===0?!0:void 0,"aria-labelledby":w.titleId,"aria-describedby":B,unmount:u},O=!kH(),j=Rs.None;C&&!c&&(j|=Rs.RestoreFocus,j|=Rs.TabLock,l&&(j|=Rs.AutoFocus),O&&(j|=Rs.InitialFocus));let F=it();return D.createElement(cH,null,D.createElement(zS,{force:!0},D.createElement(AO,null,D.createElement(Mw.Provider,{value:R},D.createElement(jO,{target:m},D.createElement(zS,{force:!1},D.createElement(Y,{slot:X},D.createElement(T,null,D.createElement(MH,{initialFocus:o,initialFocusFallback:m,containers:M,features:j},D.createElement(bU,{value:k},F({ourProps:V,theirProps:d,slot:X,defaultTag:UH,features:HH,visible:v===0,name:"Dialog"})))))))))))}),UH="div",HH=Ra.RenderStrategy|Ra.Static;function WH(t,e){let{transition:n=!1,open:r,...i}=t,s=ju(),o=t.hasOwnProperty("open")||s!==null,a=t.hasOwnProperty("onClose");if(!o&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!s&&typeof t.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t.open}`);if(typeof t.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${t.onClose}`);return(r!==void 0||n)&&!i.static?D.createElement(US,null,D.createElement(nt,{show:r,transition:n,unmount:i.unmount},D.createElement(HS,{ref:e,...i}))):D.createElement(US,null,D.createElement(HS,{ref:e,open:r,...i}))}let KH="div";function GH(t,e){let n=g.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...s}=t,[{dialogState:o,unmount:a},l]=qp("Dialog.Panel"),c=jt(e,l.panelRef),u=g.useMemo(()=>({open:o===0}),[o]),d=te(x=>{x.stopPropagation()}),f={ref:c,id:r,onClick:d},h=i?Nw:g.Fragment,m=i?{unmount:a}:{},y=it();return D.createElement(h,{...m},y({ourProps:f,theirProps:s,slot:u,defaultTag:KH,name:"Dialog.Panel"}))}let qH="div";function JH(t,e){let{transition:n=!1,...r}=t,[{dialogState:i,unmount:s}]=qp("Dialog.Backdrop"),o=g.useMemo(()=>({open:i===0}),[i]),a={ref:e,"aria-hidden":!0},l=n?Nw:g.Fragment,c=n?{unmount:s}:{},u=it();return D.createElement(l,{...c},u({ourProps:a,theirProps:r,slot:o,defaultTag:qH,name:"Dialog.Backdrop"}))}let YH="h2";function XH(t,e){let n=g.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=t,[{dialogState:s,setTitleId:o}]=qp("Dialog.Title"),a=jt(e);g.useEffect(()=>(o(r),()=>o(null)),[r,o]);let l=g.useMemo(()=>({open:s===0}),[s]),c={ref:a,id:r};return it()({ourProps:c,theirProps:i,slot:l,defaultTag:YH,name:"Dialog.Title"})}let QH=Ze(WH),ZH=Ze(GH);Ze(JH);let e8=Ze(XH),yt=Object.assign(QH,{Panel:ZH,Title:e8,Description:WP});function t8(t,e){let n=g.useRef({left:0,top:0});if(Ie(()=>{if(!e)return;let i=e.getBoundingClientRect();i&&(n.current=i)},[t,e]),e==null||!t||e===document.activeElement)return!1;let r=e.getBoundingClientRect();return r.top!==n.current.top||r.left!==n.current.left}let WS=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function KS(t){var e,n;let r=(e=t.innerText)!=null?e:"",i=t.cloneNode(!0);if(!(i instanceof HTMLElement))return r;let s=!1;for(let a of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),s=!0;let o=s?(n=i.innerText)!=null?n:"":r;return WS.test(o)&&(o=o.replace(WS,"")),o}function n8(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let n=t.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(i=>{let s=document.getElementById(i);if(s){let o=s.getAttribute("aria-label");return typeof o=="string"?o.trim():KS(s).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return KS(t).trim()}function r8(t){let e=g.useRef(""),n=g.useRef("");return te(()=>{let r=t.current;if(!r)return"";let i=r.innerText;if(e.current===i)return n.current;let s=n8(r).trim().toLowerCase();return e.current=i,n.current=s,s})}var i8=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(i8||{}),s8=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(s8||{}),o8=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(o8||{}),a8=(t=>(t[t.OpenListbox=0]="OpenListbox",t[t.CloseListbox=1]="CloseListbox",t[t.GoToOption=2]="GoToOption",t[t.Search=3]="Search",t[t.ClearSearch=4]="ClearSearch",t[t.RegisterOption=5]="RegisterOption",t[t.UnregisterOption=6]="UnregisterOption",t[t.SetButtonElement=7]="SetButtonElement",t[t.SetOptionsElement=8]="SetOptionsElement",t))(a8||{});function bg(t,e=n=>n){let n=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,r=tO(e(t.options.slice()),s=>s.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{options:r,activeOptionIndex:i}}let l8={1(t){return t.dataRef.current.disabled||t.listboxState===1?t:{...t,activeOptionIndex:null,listboxState:1,__demoMode:!1}},0(t){if(t.dataRef.current.disabled||t.listboxState===0)return t;let e=t.activeOptionIndex,{isSelected:n}=t.dataRef.current,r=t.options.findIndex(i=>n(i.dataRef.current.value));return r!==-1&&(e=r),{...t,listboxState:0,activeOptionIndex:e,__demoMode:!1}},2(t,e){var n,r,i,s,o;if(t.dataRef.current.disabled||t.listboxState===1)return t;let a={...t,searchQuery:"",activationTrigger:(n=e.trigger)!=null?n:1,__demoMode:!1};if(e.focus===ut.Nothing)return{...a,activeOptionIndex:null};if(e.focus===ut.Specific)return{...a,activeOptionIndex:t.options.findIndex(u=>u.id===e.id)};if(e.focus===ut.Previous){let u=t.activeOptionIndex;if(u!==null){let d=t.options[u].dataRef.current.domRef,f=wg(e,{resolveItems:()=>t.options,resolveActiveIndex:()=>t.activeOptionIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});if(f!==null){let h=t.options[f].dataRef.current.domRef;if(((r=d.current)==null?void 0:r.previousElementSibling)===h.current||((i=h.current)==null?void 0:i.previousElementSibling)===null)return{...a,activeOptionIndex:f}}}}else if(e.focus===ut.Next){let u=t.activeOptionIndex;if(u!==null){let d=t.options[u].dataRef.current.domRef,f=wg(e,{resolveItems:()=>t.options,resolveActiveIndex:()=>t.activeOptionIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});if(f!==null){let h=t.options[f].dataRef.current.domRef;if(((s=d.current)==null?void 0:s.nextElementSibling)===h.current||((o=h.current)==null?void 0:o.nextElementSibling)===null)return{...a,activeOptionIndex:f}}}}let l=bg(t),c=wg(e,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});return{...a,...l,activeOptionIndex:c}},3:(t,e)=>{if(t.dataRef.current.disabled||t.listboxState===1)return t;let n=t.searchQuery!==""?0:1,r=t.searchQuery+e.value.toLowerCase(),i=(t.activeOptionIndex!==null?t.options.slice(t.activeOptionIndex+n).concat(t.options.slice(0,t.activeOptionIndex+n)):t.options).find(o=>{var a;return!o.dataRef.current.disabled&&((a=o.dataRef.current.textValue)==null?void 0:a.startsWith(r))}),s=i?t.options.indexOf(i):-1;return s===-1||s===t.activeOptionIndex?{...t,searchQuery:r}:{...t,searchQuery:r,activeOptionIndex:s,activationTrigger:1}},4(t){return t.dataRef.current.disabled||t.listboxState===1||t.searchQuery===""?t:{...t,searchQuery:""}},5:(t,e)=>{let n={id:e.id,dataRef:e.dataRef},r=bg(t,i=>[...i,n]);return t.activeOptionIndex===null&&t.dataRef.current.isSelected(e.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(n)),{...t,...r}},6:(t,e)=>{let n=bg(t,r=>{let i=r.findIndex(s=>s.id===e.id);return i!==-1&&r.splice(i,1),r});return{...t,...n,activationTrigger:1}},7:(t,e)=>t.buttonElement===e.element?t:{...t,buttonElement:e.element},8:(t,e)=>t.optionsElement===e.element?t:{...t,optionsElement:e.element}},Pw=g.createContext(null);Pw.displayName="ListboxActionsContext";function Jp(t){let e=g.useContext(Pw);if(e===null){let n=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Jp),n}return e}let Yp=g.createContext(null);Yp.displayName="ListboxDataContext";function Du(t){let e=g.useContext(Yp);if(e===null){let n=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Du),n}return e}function c8(t,e){return mn(e.type,l8,t,e)}let u8=g.Fragment;function d8(t,e){var n;let r=Lp(),{value:i,defaultValue:s,form:o,name:a,onChange:l,by:c,invalid:u=!1,disabled:d=r||!1,horizontal:f=!1,multiple:h=!1,__demoMode:m=!1,...y}=t;const x=f?"horizontal":"vertical";let v=jt(e),w=RP(s),[b=h?[]:void 0,k]=DP(i,l,w),[S,C]=g.useReducer(c8,{dataRef:g.createRef(),listboxState:m?0:1,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1,optionsVisible:!1,buttonElement:null,optionsElement:null,__demoMode:m}),E=g.useRef({static:!1,hold:!1}),T=g.useRef(new Map),P=SU(c),N=g.useCallback(he=>mn(M.mode,{1:()=>b.some(Me=>P(Me,he)),0:()=>P(b,he)}),[b]),M=g.useMemo(()=>({...S,value:b,disabled:d,invalid:u,mode:h?1:0,orientation:x,compare:P,isSelected:N,optionsPropsRef:E,listRef:T}),[b,d,u,h,S,T]);Ie(()=>{S.dataRef.current=M},[M]);let A=M.listboxState===0;iO(A,[M.buttonElement,M.optionsElement],(he,Me)=>{var Ue;C({type:1}),eO(Me,xw.Loose)||(he.preventDefault(),(Ue=M.buttonElement)==null||Ue.focus())});let B=g.useMemo(()=>({open:M.listboxState===0,disabled:d,invalid:u,value:b}),[M,d,b,u]),Y=te(he=>{let Me=M.options.find(Ue=>Ue.id===he);Me&&H(Me.dataRef.current.value)}),R=te(()=>{if(M.activeOptionIndex!==null){let{dataRef:he,id:Me}=M.options[M.activeOptionIndex];H(he.current.value),C({type:2,focus:ut.Specific,id:Me})}}),X=te(()=>C({type:0})),V=te(()=>C({type:1})),O=hi(),j=te((he,Me,Ue)=>{O.dispose(),O.microTask(()=>he===ut.Specific?C({type:2,focus:ut.Specific,id:Me,trigger:Ue}):C({type:2,focus:he,trigger:Ue}))}),F=te((he,Me)=>(C({type:5,id:he,dataRef:Me}),()=>C({type:6,id:he}))),H=te(he=>mn(M.mode,{0(){return k==null?void 0:k(he)},1(){let Me=M.value.slice(),Ue=Me.findIndex(xr=>P(xr,he));return Ue===-1?Me.push(he):Me.splice(Ue,1),k==null?void 0:k(Me)}})),Z=te(he=>C({type:3,value:he})),z=te(()=>C({type:4})),se=te(he=>{C({type:7,element:he})}),we=te(he=>{C({type:8,element:he})}),Se=g.useMemo(()=>({onChange:H,registerOption:F,goToOption:j,closeListbox:V,openListbox:X,selectActiveOption:R,selectOption:Y,search:Z,clearSearch:z,setButtonElement:se,setOptionsElement:we}),[]),[Ne,kt]=GP({inherit:!0}),st={ref:v},ke=g.useCallback(()=>{if(w!==void 0)return k==null?void 0:k(w)},[k,w]),vr=it();return D.createElement(kt,{value:Ne,props:{htmlFor:(n=M.buttonElement)==null?void 0:n.id},slot:{open:M.listboxState===0,disabled:d}},D.createElement(sH,null,D.createElement(Pw.Provider,{value:Se},D.createElement(Yp.Provider,{value:M},D.createElement(TO,{value:mn(M.listboxState,{0:Jt.Open,1:Jt.Closed})},a!=null&&b!=null&&D.createElement(FP,{disabled:d,data:{[a]:b},form:o,onReset:ke}),vr({ourProps:st,theirProps:y,slot:B,defaultTag:u8,name:"Listbox"}))))))}let f8="button";function h8(t,e){var n;let r=Du("Listbox.Button"),i=Jp("Listbox.Button"),s=g.useId(),o=yw(),{id:a=o||`headlessui-listbox-button-${s}`,disabled:l=r.disabled||!1,autoFocus:c=!1,...u}=t,d=jt(e,tH(),i.setButtonElement),f=nH(),h=te(M=>{switch(M.key){case Xe.Enter:$P(M.currentTarget);break;case Xe.Space:case Xe.ArrowDown:M.preventDefault(),tt.flushSync(()=>i.openListbox()),r.value||i.goToOption(ut.First);break;case Xe.ArrowUp:M.preventDefault(),tt.flushSync(()=>i.openListbox()),r.value||i.goToOption(ut.Last);break}}),m=te(M=>{switch(M.key){case Xe.Space:M.preventDefault();break}}),y=te(M=>{var A;if(BP(M.currentTarget))return M.preventDefault();r.listboxState===0?(tt.flushSync(()=>i.closeListbox()),(A=r.buttonElement)==null||A.focus({preventScroll:!0})):(M.preventDefault(),i.openListbox())}),x=te(M=>M.preventDefault()),v=vw([a]),w=UP(),{isFocusVisible:b,focusProps:k}=OP({autoFocus:c}),{isHovered:S,hoverProps:C}=PP({isDisabled:l}),{pressed:E,pressProps:T}=jP({disabled:l}),P=g.useMemo(()=>({open:r.listboxState===0,active:E||r.listboxState===0,disabled:l,invalid:r.invalid,value:r.value,hover:S,focus:b,autofocus:c}),[r.listboxState,r.value,l,S,b,E,r.invalid,c]),N=gw(f(),{ref:d,id:a,type:oO(t,r.buttonElement),"aria-haspopup":"listbox","aria-controls":(n=r.optionsElement)==null?void 0:n.id,"aria-expanded":r.listboxState===0,"aria-labelledby":v,"aria-describedby":w,disabled:l||void 0,autoFocus:c,onKeyDown:h,onKeyUp:m,onKeyPress:x,onClick:y},k,C,T);return it()({ourProps:N,theirProps:u,slot:P,defaultTag:f8,name:"Listbox.Button"})}let zO=g.createContext(!1),p8="div",m8=Ra.RenderStrategy|Ra.Static;function g8(t,e){var n,r;let i=g.useId(),{id:s=`headlessui-listbox-options-${i}`,anchor:o,portal:a=!1,modal:l=!0,transition:c=!1,...u}=t,d=eH(o),[f,h]=g.useState(null);d&&(a=!0);let m=Du("Listbox.Options"),y=Jp("Listbox.Options"),x=tl(m.optionsElement),v=ju(),[w,b]=cO(c,f,v!==null?(v&Jt.Open)===Jt.Open:m.listboxState===0);QP(w,m.buttonElement,y.closeListbox);let k=m.__demoMode?!1:l&&m.listboxState===0;aO(k,x);let S=m.__demoMode?!1:l&&m.listboxState===0;XP(S,{allowed:g.useCallback(()=>[m.buttonElement,m.optionsElement],[m.buttonElement,m.optionsElement])});let C=m.listboxState!==0,E=t8(C,m.buttonElement)?!1:w,T=w&&m.listboxState===1,P=lH(T,m.value),N=te(z=>m.compare(P,z)),M=g.useMemo(()=>{var z;if(d==null||!((z=d==null?void 0:d.to)!=null&&z.includes("selection")))return null;let se=m.options.findIndex(we=>N(we.dataRef.current.value));return se===-1&&(se=0),se},[d,m.options]),A=(()=>{if(d==null)return;if(M===null)return{...d,inner:void 0};let z=Array.from(m.listRef.current.values());return{...d,inner:{listRef:{current:z},index:M}}})(),[B,Y]=iH(A),R=rH(),X=jt(e,d?B:null,y.setOptionsElement,h),V=hi();g.useEffect(()=>{var z;let se=m.optionsElement;se&&m.listboxState===0&&se!==((z=Za(se))==null?void 0:z.activeElement)&&(se==null||se.focus({preventScroll:!0}))},[m.listboxState,m.optionsElement]);let O=te(z=>{var se,we;switch(V.dispose(),z.key){case Xe.Space:if(m.searchQuery!=="")return z.preventDefault(),z.stopPropagation(),y.search(z.key);case Xe.Enter:if(z.preventDefault(),z.stopPropagation(),m.activeOptionIndex!==null){let{dataRef:Se}=m.options[m.activeOptionIndex];y.onChange(Se.current.value)}m.mode===0&&(tt.flushSync(()=>y.closeListbox()),(se=m.buttonElement)==null||se.focus({preventScroll:!0}));break;case mn(m.orientation,{vertical:Xe.ArrowDown,horizontal:Xe.ArrowRight}):return z.preventDefault(),z.stopPropagation(),y.goToOption(ut.Next);case mn(m.orientation,{vertical:Xe.ArrowUp,horizontal:Xe.ArrowLeft}):return z.preventDefault(),z.stopPropagation(),y.goToOption(ut.Previous);case Xe.Home:case Xe.PageUp:return z.preventDefault(),z.stopPropagation(),y.goToOption(ut.First);case Xe.End:case Xe.PageDown:return z.preventDefault(),z.stopPropagation(),y.goToOption(ut.Last);case Xe.Escape:z.preventDefault(),z.stopPropagation(),tt.flushSync(()=>y.closeListbox()),(we=m.buttonElement)==null||we.focus({preventScroll:!0});return;case Xe.Tab:z.preventDefault(),z.stopPropagation(),tt.flushSync(()=>y.closeListbox()),RU(m.buttonElement,z.shiftKey?sr.Previous:sr.Next);break;default:z.key.length===1&&(y.search(z.key),V.setTimeout(()=>y.clearSearch(),350));break}}),j=(n=m.buttonElement)==null?void 0:n.id,F=g.useMemo(()=>({open:m.listboxState===0}),[m.listboxState]),H=gw(d?R():{},{id:s,ref:X,"aria-activedescendant":m.activeOptionIndex===null||(r=m.options[m.activeOptionIndex])==null?void 0:r.id,"aria-multiselectable":m.mode===1?!0:void 0,"aria-labelledby":j,"aria-orientation":m.orientation,onKeyDown:O,role:"listbox",tabIndex:m.listboxState===0?0:void 0,style:{...u.style,...Y,"--button-width":EU(m.buttonElement,!0).width},...lO(b)}),Z=it();return D.createElement(AO,{enabled:a?t.static||w:!1},D.createElement(Yp.Provider,{value:m.mode===1?m:{...m,isSelected:N}},Z({ourProps:H,theirProps:u,slot:F,defaultTag:p8,features:m8,visible:E,name:"Listbox.Options"})))}let y8="div";function v8(t,e){let n=g.useId(),{id:r=`headlessui-listbox-option-${n}`,disabled:i=!1,value:s,...o}=t,a=g.useContext(zO)===!0,l=Du("Listbox.Option"),c=Jp("Listbox.Option"),u=l.activeOptionIndex!==null?l.options[l.activeOptionIndex].id===r:!1,d=l.isSelected(s),f=g.useRef(null),h=r8(f),m=ws({disabled:i,value:s,domRef:f,get textValue(){return h()}}),y=jt(e,f,P=>{P?l.listRef.current.set(r,P):l.listRef.current.delete(r)});Ie(()=>{if(!l.__demoMode&&l.listboxState===0&&u&&l.activationTrigger!==0)return fi().requestAnimationFrame(()=>{var P,N;(N=(P=f.current)==null?void 0:P.scrollIntoView)==null||N.call(P,{block:"nearest"})})},[f,u,l.__demoMode,l.listboxState,l.activationTrigger,l.activeOptionIndex]),Ie(()=>{if(!a)return c.registerOption(r,m)},[m,r,a]);let x=te(P=>{var N;if(i)return P.preventDefault();c.onChange(s),l.mode===0&&(tt.flushSync(()=>c.closeListbox()),(N=l.buttonElement)==null||N.focus({preventScroll:!0}))}),v=te(()=>{if(i)return c.goToOption(ut.Nothing);c.goToOption(ut.Specific,r)}),w=zU(),b=te(P=>{w.update(P),!i&&(u||c.goToOption(ut.Specific,r,0))}),k=te(P=>{w.wasMoved(P)&&(i||u||c.goToOption(ut.Specific,r,0))}),S=te(P=>{w.wasMoved(P)&&(i||u&&c.goToOption(ut.Nothing))}),C=g.useMemo(()=>({active:u,focus:u,selected:d,disabled:i,selectedOption:d&&a}),[u,d,i,a]),E=a?{}:{id:r,ref:y,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":d,disabled:void 0,onClick:x,onFocus:v,onPointerEnter:b,onMouseEnter:b,onPointerMove:k,onMouseMove:k,onPointerLeave:S,onMouseLeave:S},T=it();return!d&&a?null:T({ourProps:E,theirProps:o,slot:C,defaultTag:y8,name:"Listbox.Option"})}let x8=g.Fragment;function w8(t,e){let{options:n,placeholder:r,...i}=t,s={ref:jt(e)},o=Du("ListboxSelectedOption"),a=g.useMemo(()=>({}),[]),l=o.value===void 0||o.value===null||o.mode===1&&Array.isArray(o.value)&&o.value.length===0,c=it();return D.createElement(zO.Provider,{value:!0},c({ourProps:s,theirProps:{...i,children:D.createElement(D.Fragment,null,r&&l?r:n)},slot:a,defaultTag:x8,name:"ListboxSelectedOption"}))}let b8=Ze(d8),k8=Ze(h8),S8=qP,C8=Ze(g8),E8=Ze(v8),T8=Ze(w8),wd=Object.assign(b8,{Button:k8,Label:S8,Options:C8,Option:E8,SelectedOption:T8}),Ow=g.createContext(null);Ow.displayName="GroupContext";let N8=g.Fragment;function M8(t){var e;let[n,r]=g.useState(null),[i,s]=GP(),[o,a]=HP(),l=g.useMemo(()=>({switch:n,setSwitch:r}),[n,r]),c={},u=t,d=it();return D.createElement(a,{name:"Switch.Description",value:o},D.createElement(s,{name:"Switch.Label",value:i,props:{htmlFor:(e=l.switch)==null?void 0:e.id,onClick(f){n&&(f.currentTarget instanceof HTMLLabelElement&&f.preventDefault(),n.click(),n.focus({preventScroll:!0}))}}},D.createElement(Ow.Provider,{value:l},d({ourProps:c,theirProps:u,slot:{},defaultTag:N8,name:"Switch.Group"}))))}let P8="button";function O8(t,e){var n;let r=g.useId(),i=yw(),s=Lp(),{id:o=i||`headlessui-switch-${r}`,disabled:a=s||!1,checked:l,defaultChecked:c,onChange:u,name:d,value:f,form:h,autoFocus:m=!1,...y}=t,x=g.useContext(Ow),[v,w]=g.useState(null),b=g.useRef(null),k=jt(b,e,x===null?null:x.setSwitch,w),S=RP(c),[C,E]=DP(l,u,S??!1),T=hi(),[P,N]=g.useState(!1),M=te(()=>{N(!0),E==null||E(!C),T.nextFrame(()=>{N(!1)})}),A=te(Ne=>{if(BP(Ne.currentTarget))return Ne.preventDefault();Ne.preventDefault(),M()}),B=te(Ne=>{Ne.key===Xe.Space?(Ne.preventDefault(),M()):Ne.key===Xe.Enter&&$P(Ne.currentTarget)}),Y=te(Ne=>Ne.preventDefault()),R=vw(),X=UP(),{isFocusVisible:V,focusProps:O}=OP({autoFocus:m}),{isHovered:j,hoverProps:F}=PP({isDisabled:a}),{pressed:H,pressProps:Z}=jP({disabled:a}),z=g.useMemo(()=>({checked:C,disabled:a,hover:j,focus:V,active:H,autofocus:m,changing:P}),[C,j,V,H,a,P,m]),se=gw({id:o,ref:k,role:"switch",type:oO(t,v),tabIndex:t.tabIndex===-1?0:(n=t.tabIndex)!=null?n:0,"aria-checked":C,"aria-labelledby":R,"aria-describedby":X,disabled:a||void 0,autoFocus:m,onClick:A,onKeyUp:B,onKeyPress:Y},O,F,Z),we=g.useCallback(()=>{if(S!==void 0)return E==null?void 0:E(S)},[E,S]),Se=it();return D.createElement(D.Fragment,null,d!=null&&D.createElement(FP,{disabled:a,data:{[d]:f||"on"},overrides:{type:"checkbox",checked:C},form:h,onReset:we}),Se({ourProps:se,theirProps:y,slot:z,defaultTag:P8,name:"Switch"}))}let j8=Ze(O8),A8=M8,D8=qP,R8=WP,_8=Object.assign(j8,{Group:A8,Label:D8,Description:R8});const bd=({icon:t,label:e,value:n})=>p.jsxs("div",{className:"flex items-center gap-3 p-3 bg-design-greyBG/50 hover:bg-design-greyBG/70 rounded-xl transition-all",children:[p.jsx(t,{className:"w-5 h-5 text-design-primaryPurple"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-design-primaryGrey",children:e}),p.jsx("p",{className:"font-medium text-design-black dark:text-white",children:n})]})]});function I8({isOpen:t,onClose:e,user:n,userId:r}){const[i,s]=g.useState(n==null?void 0:n.email_preferance),o=async a=>{s(a),await l4(a,r)};return p.jsx(nt,{show:t,as:g.Fragment,children:p.jsxs(yt,{as:"div",className:"relative z-50",onClose:e,children:[p.jsx(nt.Child,{as:g.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),p.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:p.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:p.jsx(nt.Child,{as:g.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:p.jsxs(yt.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-design-black p-6 shadow-xl transition-all",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx(yt.Title,{className:"text-xl font-semibold text-design-black dark:text-white",children:"Settings"}),p.jsx("button",{onClick:e,className:"p-2 hover:bg-design-greyBG rounded-lg transition-colors",children:p.jsx(Xt,{className:"w-5 h-5 text-design-primaryGrey"})})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx(bd,{icon:Kf,label:"Full Name",value:`${n.firstName} ${n.lastName}`}),p.jsx(bd,{icon:F2,label:"Email",value:n.email}),p.jsx(bd,{icon:B4,label:"Role",value:n.role||"User"}),p.jsx(bd,{icon:E4,label:"User ID",value:n.userId}),p.jsxs("div",{className:"flex items-center justify-between p-3 bg-design-greyBG/50 hover:bg-design-greyBG/70 rounded-xl transition-all",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(I2,{className:"w-5 h-5 text-design-primaryPurple"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-design-black dark:text-white",children:"Email Notifications"}),p.jsx("p",{className:"text-sm text-design-primaryGrey",children:"Receive email updates"})]})]}),p.jsx(_8,{checked:i,onChange:o,className:`${i?"bg-design-primaryPurple":"bg-design-greyOutlines"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-design-primaryPurple focus:ring-offset-2`,children:p.jsx("span",{className:`${i?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]})]})]})})})})]})})}const L8=[{name:"Home",path:"/home",icon:N4},{name:"Ideation",path:"/ideation",icon:A4}],U0=D.memo(({title:t,boards:e,searchValue:n,onSearchChange:r,icon:i})=>{const s=$r();return p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-design-primaryGrey",children:[p.jsx(i,{className:"h-4 w-4"}),t]}),p.jsx("div",{className:"px-3",children:p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"text",placeholder:"Search boards...",value:n,onChange:o=>r(o.target.value),className:"w-full px-4 py-1.5 pl-8 text-sm bg-design-greyBG dark:bg-design-black border border-design-greyOutlines dark:border-design-greyOutlines/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-design-primaryPurple focus:border-transparent transition-all"}),p.jsx(Pp,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-design-primaryGrey"})]})}),p.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto scrollbar-hide",children:e.length>0?e.map(o=>p.jsx(U.button,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"flex items-center w-[90%]  px-3 py-1.5 text-sm break-all text-left text-design-primaryGrey hover:bg-design-primaryPurple/10 hover:text-design-primaryPurple rounded-lg transition-all duration-200 ml-3",onClick:()=>s(`/ideation/${o.id}`),children:o.title},o.id)):p.jsx("p",{className:"text-sm text-design-primaryGrey dark:text-design-greyOutlines px-3 py-2",children:"No boards found"})})]})});U0.displayName="BoardSection";function $8(){const{isExpanded:t,setIsExpanded:e}=pw(),[n,r]=g.useState(""),[i,s]=g.useState(""),[o,a]=g.useState(!1),{currentUser:l,authUser:c}=gr(),{boardsList:u,isLoading:d}=_p();$r();const[f,h]=g.useState(!1),m=u.filter(b=>b.created_by===c.id),y=u.filter(b=>b.created_by!==c.id),x=D.useMemo(()=>m.filter(b=>b.title.toLowerCase().includes(n.toLowerCase())),[m,n]),v=D.useMemo(()=>y.filter(b=>b.title.toLowerCase().includes(i.toLowerCase())),[y,i]),w=()=>{e(!0),a(!0)};return p.jsxs(p.Fragment,{children:[p.jsx(U.div,{className:"fixed inset-y-0 left-0 bg-white/60 dark:bg-design-black/60  backdrop-blur-xl border-r border-design-greyOutlines z-50 flex flex-col",animate:{width:t?"16rem":"4.5rem"},transition:{duration:.3,ease:[.4,0,.2,1]},children:p.jsxs("div",{className:"flex flex-col h-full relative",children:[p.jsx("button",{onClick:()=>e(!t),className:"absolute -right-3 top-6 bg-design-primaryPurple hover:bg-design-primaryPurple/90 rounded-full p-1.5 shadow-lg shadow-design-primaryPurple/20 transition-all duration-300",children:t?p.jsx(jx,{className:"h-4 w-4 text-white"}):p.jsx(Ax,{className:"h-4 w-4 text-white"})}),p.jsx("div",{className:"p-4 mb-2",children:p.jsx(ct,{children:t?p.jsx(U.h1,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-xl font-bold text-design-primaryPurple tracking-tight",children:p.jsx("img",{src:"/socialhub_wb_n_white_RGB 1.png",alt:"",className:"h-18 w-18"})}):p.jsx(U.h1,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-xl font-bold text-design-primaryPurple",children:p.jsx("img",{src:"/SocialHub.png",alt:"",className:"h-10 w-10"})})})}),p.jsxs("nav",{className:"flex-1 px-3 space-y-2",children:[L8.map(b=>{const k=b.icon;return p.jsx(Kt,{text:t?void 0:b.name,position:"right",children:p.jsxs(oL,{to:b.path,className:({isActive:S})=>`flex items-center px-3 py-2.5 rounded-xl transition-all duration-300 group ${S?"bg-design-primaryPurple text-white shadow-lg shadow-design-primaryPurple/20":"text-design-primaryGrey hover:bg-design-primaryPurple/10 hover:text-design-primaryPurple"}`,children:[p.jsx(k,{className:"h-[18px] w-[18px] flex-shrink-0"}),p.jsx(ct,{children:t&&p.jsx(U.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"ml-3 font-medium overflow-hidden whitespace-nowrap text-sm",children:b.name})})]})},b.name)}),p.jsxs("div",{className:"mt-6",children:[p.jsx(Kt,{text:t?void 0:"Boards",position:"right",children:p.jsxs("button",{onClick:()=>{t?a(!o):w()},className:"flex items-center justify-between w-full px-3 py-2.5 text-design-primaryGrey hover:bg-design-primaryPurple/10 hover:text-design-primaryPurple rounded-xl transition-all duration-300",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(j4,{className:"h-[18px] w-[18px] flex-shrink-0"}),p.jsx(ct,{children:t&&p.jsx(U.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"ml-3 font-medium text-sm",children:"Boards"})})]}),t&&p.jsx(Co,{className:`h-4 w-4 transition-transform duration-300 ${o?"rotate-180":""}`})]})}),p.jsx(ct,{children:o&&t&&p.jsxs(U.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"mt-2 space-y-4",children:[p.jsx(U0,{title:"My Boards",boards:x,searchValue:n,onSearchChange:r,icon:V4}),p.jsx(U0,{title:"Shared Boards",boards:v,searchValue:i,onSearchChange:s,icon:Oa})]})})]})]}),p.jsxs("div",{className:"p-3 mt-auto space-y-2",children:[p.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h(!0),className:`flex items-center ${t?"justify-start":"justify-center"} gap-3 w-full p-2 rounded-xl hover:bg-design-primaryPurple/10 text-design-primaryGrey hover:text-design-primaryPurple transition-colors`,children:[p.jsx(F4,{className:"h-[18px] w-[18px]"}),p.jsx(ct,{children:t&&p.jsx(U.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"text-sm font-medium",children:"Settings"})})]}),p.jsxs(U.div,{className:`flex items-center ${t?"justify-start":"justify-center"} gap-3 p-2 rounded-xl bg-design-greyBG/50 backdrop-blur-sm`,whileHover:{scale:1.02},transition:{duration:.2},children:[p.jsx("div",{className:"w-8 h-8 rounded-lg bg-design-primaryPurple/20 flex items-center justify-center flex-shrink-0",children:l.avatarUrl?p.jsx("img",{src:l.avatarUrl,className:"w-8 h-8 rounded-lg object-cover",alt:"User Avatar"}):p.jsx("span",{className:"text-design-primaryPurple font-medium",children:l.firstName.slice(0,1)})}),p.jsx(ct,{children:t&&p.jsxs(U.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"flex-1 overflow-hidden",children:[p.jsx("p",{className:"text-sm font-medium text-design-primaryGrey truncate",children:l.firstName}),p.jsx("p",{className:"text-xs text-design-primaryGrey/60 truncate",children:l.email})]})})]})]})]})}),p.jsx(I8,{isOpen:f,onClose:()=>h(!1),user:l,userId:c.id})]})}const F8={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADDON_NAME:"idea-board-mubashir",VITE_BACKEND_BASE_URL:"http://localhost:5000",VITE_ENVIORNMENT:"development",VITE_SOCIALHUB_API_URL:"https://app.socialhub.io",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im12bWZ3a2lnZG53aXV5c2psc2duIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA0OTA2ODcsImV4cCI6MjA1NjA2NjY4N30.jk3JQhfXS0W7vZI4icnWLWY3T4horTc37WM5J-jisLM",VITE_SUPABASE_URL:"https://mvmfwkigdnwiuysjlsgn.supabase.co"},GS=t=>{let e;const n=new Set,r=(u,d)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const h=e;e=d??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(m=>m(e,h))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(F8?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},B8=t=>t?GS(t):GS;var UO={exports:{}},HO={},WO={exports:{}},KO={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La=g;function V8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var z8=typeof Object.is=="function"?Object.is:V8,U8=La.useState,H8=La.useEffect,W8=La.useLayoutEffect,K8=La.useDebugValue;function G8(t,e){var n=e(),r=U8({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return W8(function(){i.value=n,i.getSnapshot=e,kg(i)&&s({inst:i})},[t,n,e]),H8(function(){return kg(i)&&s({inst:i}),t(function(){kg(i)&&s({inst:i})})},[t]),K8(n),n}function kg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!z8(t,n)}catch{return!0}}function q8(t,e){return e()}var J8=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?q8:G8;KO.useSyncExternalStore=La.useSyncExternalStore!==void 0?La.useSyncExternalStore:J8;WO.exports=KO;var Y8=WO.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp=g,X8=Y8;function Q8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Z8=typeof Object.is=="function"?Object.is:Q8,eW=X8.useSyncExternalStore,tW=Xp.useRef,nW=Xp.useEffect,rW=Xp.useMemo,iW=Xp.useDebugValue;HO.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=tW(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=rW(function(){function l(h){if(!c){if(c=!0,u=h,h=r(h),i!==void 0&&o.hasValue){var m=o.value;if(i(m,h))return d=m}return d=h}if(m=d,Z8(u,h))return m;var y=r(h);return i!==void 0&&i(m,y)?m:(u=h,d=y)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=eW(t,s[0],s[1]);return nW(function(){o.hasValue=!0,o.value=a},[a]),iW(a),a};UO.exports=HO;var sW=UO.exports;const oW=Ev(sW),GO={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADDON_NAME:"idea-board-mubashir",VITE_BACKEND_BASE_URL:"http://localhost:5000",VITE_ENVIORNMENT:"development",VITE_SOCIALHUB_API_URL:"https://app.socialhub.io",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im12bWZ3a2lnZG53aXV5c2psc2duIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA0OTA2ODcsImV4cCI6MjA1NjA2NjY4N30.jk3JQhfXS0W7vZI4icnWLWY3T4horTc37WM5J-jisLM",VITE_SUPABASE_URL:"https://mvmfwkigdnwiuysjlsgn.supabase.co"},{useDebugValue:aW}=D,{useSyncExternalStoreWithSelector:lW}=oW;let qS=!1;const cW=t=>t;function uW(t,e=cW,n){(GO?"production":void 0)!=="production"&&n&&!qS&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),qS=!0);const r=lW(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return aW(r),r}const JS=t=>{(GO?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?B8(t):t,n=(r,i)=>uW(e,r,i);return Object.assign(n,e),n},qO=t=>t?JS(t):JS,nf=qO(t=>({notifications:[],unreadCount:0,addNotification:e=>t(n=>({notifications:[e,...n.notifications],unreadCount:e.read?n.unreadCount:n.unreadCount+1})),markAsRead:e=>t(n=>({notifications:n.notifications.map(r=>r.id===e?{...r,read:!0}:r),unreadCount:n.unreadCount-1})),markAllAsRead:()=>t(e=>({notifications:e.notifications.map(n=>({...n,read:!0})),unreadCount:0}))}));async function dW(){const{data:t,error:e}=await ne.from("notifications").select("*").order("created_at",{ascending:!0});if(e)throw e;return t}async function fW(t){const{data:e,error:n}=await ne.from("notifications").update({read:!0}).eq("id",t).select().single();if(n)throw n;return e}async function hW(t){const{data:e,error:n}=await ne.from("notifications").update({read:!0}).eq("user_id",t).select();if(n)throw n;return e}function pW(){const{addNotification:t}=nf(),{currentUser:e}=gr();return g.useEffect(()=>{if(!(e!=null&&e.userId))return;(async()=>{try{(await dW()).forEach(a=>t(a))}catch(o){console.error("Error loading notifications:",o)}})();const s=ne.channel("notifications").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`user_id=eq.${e.userId}`},o=>{console.log("Notification event:",o),o.eventType==="INSERT"&&t(o.new)}).subscribe();return()=>{ne.removeChannel(s)}},[e,t]),{markAsRead:async i=>{try{await fW(i),nf.getState().markAsRead(i)}catch(s){console.error("Error marking notification as read:",s)}},markAllAsRead:async()=>{if(e.userId)try{await hW(e.userId),nf.getState().markAllAsRead()}catch(i){console.error("Error marking all notifications as read:",i)}}}}function fe(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function fr(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function mW(t,e){const n=fe(t);return isNaN(e)?fr(t,NaN):(n.setDate(n.getDate()+e),n)}function cc(t,e){const n=fe(t);if(isNaN(e))return fr(t,NaN);if(!e)return n;const r=n.getDate(),i=fr(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const s=i.getDate();return r>=s?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const JO=6048e5,gW=864e5,YO=6e4,XO=36e5,kd=43200,YS=1440;let yW={};function sl(){return yW}function $a(t,e){var a,l,c,u;const n=sl(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=fe(t),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function sh(t){return $a(t,{weekStartsOn:1})}function QO(t){const e=fe(t),n=e.getFullYear(),r=fr(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=sh(r),s=fr(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=sh(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function oh(t){const e=fe(t);return e.setHours(0,0,0,0),e}function ah(t){const e=fe(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function vW(t,e){const n=oh(t),r=oh(e),i=+n-ah(n),s=+r-ah(r);return Math.round((i-s)/gW)}function xW(t){const e=QO(t),n=fr(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),sh(n)}function rf(t,e){const n=fe(t),r=fe(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function jw(t){return fr(t,Date.now())}function Qp(t,e){const n=oh(t),r=oh(e);return+n==+r}function wW(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function bW(t){if(!wW(t)&&typeof t!="number")return!1;const e=fe(t);return!isNaN(Number(e))}function kW(t,e){const n=fe(t),r=fe(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function SW(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function CW(t,e){return+fe(t)-+fe(e)}function EW(t){const e=fe(t);return e.setHours(23,59,59,999),e}function lh(t){const e=fe(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function TW(t){const e=fe(t);return+EW(e)==+lh(e)}function NW(t,e){const n=fe(t),r=fe(e),i=rf(n,r),s=Math.abs(kW(n,r));let o;if(s<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*s);let a=rf(n,r)===-i;TW(fe(t))&&s===1&&rf(t,r)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function MW(t,e,n){const r=CW(t,e)/1e3;return SW(n==null?void 0:n.roundingMethod)(r)}function ZO(t,e){const n=fe(t.start),r=fe(t.end);let i=+n>+r;const s=i?+n:+r,o=i?r:n;o.setHours(0,0,0,0);let a=1;const l=[];for(;+o<=s;)l.push(fe(o)),o.setDate(o.getDate()+a),o.setHours(0,0,0,0);return i?l.reverse():l}function H0(t){const e=fe(t);return e.setDate(1),e.setHours(0,0,0,0),e}function PW(t){const e=fe(t),n=fr(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function OW(t,e){var a,l;const n=sl(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=fe(t),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}const jW={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},AW=(t,e,n)=>{let r;const i=jW[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Sg(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const DW={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},RW={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_W={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},IW={date:Sg({formats:DW,defaultWidth:"full"}),time:Sg({formats:RW,defaultWidth:"full"}),dateTime:Sg({formats:_W,defaultWidth:"full"})},LW={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$W=(t,e,n,r)=>LW[t];function Ml(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const FW={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},BW={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},VW={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zW={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},UW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},HW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},WW=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},KW={ordinalNumber:WW,era:Ml({values:FW,defaultWidth:"wide"}),quarter:Ml({values:BW,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ml({values:VW,defaultWidth:"wide"}),day:Ml({values:zW,defaultWidth:"wide"}),dayPeriod:Ml({values:UW,defaultWidth:"wide",formattingValues:HW,defaultFormattingWidth:"wide"})};function Pl(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?qW(a,d=>d.test(o)):GW(a,d=>d.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function GW(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function qW(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function JW(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const YW=/^(\d+)(th|st|nd|rd)?/i,XW=/\d+/i,QW={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ZW={any:[/^b/i,/^(a|c)/i]},e7={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},t7={any:[/1/i,/2/i,/3/i,/4/i]},n7={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},r7={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},i7={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},s7={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},o7={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},a7={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},l7={ordinalNumber:JW({matchPattern:YW,parsePattern:XW,valueCallback:t=>parseInt(t,10)}),era:Pl({matchPatterns:QW,defaultMatchWidth:"wide",parsePatterns:ZW,defaultParseWidth:"any"}),quarter:Pl({matchPatterns:e7,defaultMatchWidth:"wide",parsePatterns:t7,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Pl({matchPatterns:n7,defaultMatchWidth:"wide",parsePatterns:r7,defaultParseWidth:"any"}),day:Pl({matchPatterns:i7,defaultMatchWidth:"wide",parsePatterns:s7,defaultParseWidth:"any"}),dayPeriod:Pl({matchPatterns:o7,defaultMatchWidth:"any",parsePatterns:a7,defaultParseWidth:"any"})},ej={code:"en-US",formatDistance:AW,formatLong:IW,formatRelative:$W,localize:KW,match:l7,options:{weekStartsOn:0,firstWeekContainsDate:1}};function c7(t){const e=fe(t);return vW(e,PW(e))+1}function u7(t){const e=fe(t),n=+sh(e)-+xW(e);return Math.round(n/JO)+1}function tj(t,e){var u,d,f,h;const n=fe(t),r=n.getFullYear(),i=sl(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((h=(f=i.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,o=fr(t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=$a(o,e),l=fr(t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=$a(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function d7(t,e){var a,l,c,u;const n=sl(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=tj(t,e),s=fr(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),$a(s,e)}function f7(t,e){const n=fe(t),r=+$a(n,e)-+d7(n,e);return Math.round(r/JO)+1}function Ee(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const vi={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ee(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ee(n+1,2)},d(t,e){return Ee(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ee(t.getHours()%12||12,e.length)},H(t,e){return Ee(t.getHours(),e.length)},m(t,e){return Ee(t.getMinutes(),e.length)},s(t,e){return Ee(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Ee(i,e.length)}},Do={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},XS={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return vi.y(t,e)},Y:function(t,e,n,r){const i=tj(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Ee(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Ee(s,e.length)},R:function(t,e){const n=QO(t);return Ee(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ee(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ee(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ee(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return vi.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ee(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=f7(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Ee(i,e.length)},I:function(t,e,n){const r=u7(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ee(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):vi.d(t,e)},D:function(t,e,n){const r=c7(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ee(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Ee(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Ee(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Ee(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Do.noon:r===0?i=Do.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Do.evening:r>=12?i=Do.afternoon:r>=4?i=Do.morning:i=Do.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return vi.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):vi.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ee(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ee(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):vi.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):vi.s(t,e)},S:function(t,e){return vi.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return ZS(r);case"XXXX":case"XX":return As(r);case"XXXXX":case"XXX":default:return As(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return ZS(r);case"xxxx":case"xx":return As(r);case"xxxxx":case"xxx":default:return As(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+QS(r,":");case"OOOO":default:return"GMT"+As(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+QS(r,":");case"zzzz":default:return"GMT"+As(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Ee(r,e.length)},T:function(t,e,n){const r=t.getTime();return Ee(r,e.length)}};function QS(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Ee(s,2)}function ZS(t,e){return t%60===0?(t>0?"-":"+")+Ee(Math.abs(t)/60,2):As(t,e)}function As(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Ee(Math.trunc(r/60),2),s=Ee(r%60,2);return n+i+e+s}const eC=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},nj=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},h7=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return eC(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",eC(r,e)).replace("{{time}}",nj(i,e))},p7={p:nj,P:h7},m7=/^D+$/,g7=/^Y+$/,y7=["D","DD","YY","YYYY"];function v7(t){return m7.test(t)}function x7(t){return g7.test(t)}function w7(t,e,n){const r=b7(t,e,n);if(console.warn(r),y7.includes(t))throw new RangeError(r)}function b7(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const k7=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,S7=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,C7=/^'([^]*?)'?$/,E7=/''/g,T7=/[a-zA-Z]/;function ar(t,e,n){var u,d,f,h;const r=sl(),i=r.locale??ej,s=r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,o=r.weekStartsOn??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,a=fe(t);if(!bW(a))throw new RangeError("Invalid time value");let l=e.match(S7).map(m=>{const y=m[0];if(y==="p"||y==="P"){const x=p7[y];return x(m,i.formatLong)}return m}).join("").match(k7).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const y=m[0];if(y==="'")return{isToken:!1,value:N7(m)};if(XS[y])return{isToken:!0,value:m};if(y.match(T7))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const y=m.value;(x7(y)||v7(y))&&w7(y,e,String(t));const x=XS[y[0]];return x(a,y,i.localize,c)}).join("")}function N7(t){const e=t.match(C7);return e?e[1].replace(E7,"'"):t}function M7(t,e,n){const r=sl(),i=(n==null?void 0:n.locale)??r.locale??ej,s=2520,o=rf(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let l,c;o>0?(l=fe(e),c=fe(t)):(l=fe(t),c=fe(e));const u=MW(c,l),d=(ah(c)-ah(l))/1e3,f=Math.round((u-d)/60);let h;if(f<2)return n!=null&&n.includeSeconds?u<5?i.formatDistance("lessThanXSeconds",5,a):u<10?i.formatDistance("lessThanXSeconds",10,a):u<20?i.formatDistance("lessThanXSeconds",20,a):u<40?i.formatDistance("halfAMinute",0,a):u<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):f===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",f,a);if(f<45)return i.formatDistance("xMinutes",f,a);if(f<90)return i.formatDistance("aboutXHours",1,a);if(f<YS){const m=Math.round(f/60);return i.formatDistance("aboutXHours",m,a)}else{if(f<s)return i.formatDistance("xDays",1,a);if(f<kd){const m=Math.round(f/YS);return i.formatDistance("xDays",m,a)}else if(f<kd*2)return h=Math.round(f/kd),i.formatDistance("aboutXMonths",h,a)}if(h=NW(c,l),h<12){const m=Math.round(f/kd);return i.formatDistance("xMonths",m,a)}else{const m=h%12,y=Math.trunc(h/12);return m<3?i.formatDistance("aboutXYears",y,a):m<9?i.formatDistance("overXYears",y,a):i.formatDistance("almostXYears",y+1,a)}}function P7(t,e){return M7(t,jw(t),e)}function rj(t,e){const n=fe(t),r=fe(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Aw(t){return Qp(t,jw(t))}function O7(t){return Qp(t,mW(jw(t),1))}function j7(t,e){const n=+fe(t),[r,i]=[+fe(e.start),+fe(e.end)].sort((s,o)=>s-o);return n>=r&&n<=i}function uc(t,e){const r=_7(t);let i;if(r.date){const l=I7(r.date,2);i=L7(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,a;if(r.time&&(o=$7(r.time),isNaN(o)))return new Date(NaN);if(r.timezone){if(a=F7(r.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(s+o),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(s+o+a)}const Sd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},A7=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,D7=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,R7=/^([+-])(\d{2})(?::?(\d{2}))?$/;function _7(t){const e={},n=t.split(Sd.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Sd.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Sd.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=Sd.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function I7(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function L7(t,e){if(e===null)return new Date(NaN);const n=t.match(A7);if(!n)return new Date(NaN);const r=!!n[4],i=Ol(n[1]),s=Ol(n[2])-1,o=Ol(n[3]),a=Ol(n[4]),l=Ol(n[5])-1;if(r)return H7(e,a,l)?B7(e,a,l):new Date(NaN);{const c=new Date(0);return!z7(e,s,o)||!U7(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function Ol(t){return t?parseInt(t):1}function $7(t){const e=t.match(D7);if(!e)return NaN;const n=Cg(e[1]),r=Cg(e[2]),i=Cg(e[3]);return W7(n,r,i)?n*XO+r*YO+i*1e3:NaN}function Cg(t){return t&&parseFloat(t.replace(",","."))||0}function F7(t){if(t==="Z")return 0;const e=t.match(R7);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return K7(r,i)?n*(r*XO+i*YO):NaN}function B7(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const V7=[31,null,31,30,31,30,31,31,30,31,30,31];function ij(t){return t%400===0||t%4===0&&t%100!==0}function z7(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(V7[e]||(ij(t)?29:28))}function U7(t,e){return e>=1&&e<=(ij(t)?366:365)}function H7(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function W7(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function K7(t,e){return e>=0&&e<=59}function sj(t,e){return cc(t,-e)}const G7=t=>{switch(t){case"success":return p.jsx(y4,{className:"w-4 h-4 text-semantic-success"});case"error":return p.jsx(Pa,{className:"w-4 h-4 text-semantic-error"});case"warning":return p.jsx(Pa,{className:"w-4 h-4 text-semantic-warning"});default:return p.jsx(P4,{className:"w-4 h-4 text-primary"})}};function q7(){const[t,e]=D.useState(!1),{notifications:n,unreadCount:r}=nf(),{markAsRead:i,markAllAsRead:s}=pW(),o=g.useRef(null),a=$r();g.useEffect(()=>{const c=u=>{o.current&&!o.current.contains(u.target)&&e(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const l=c=>{c.read||i(c.id),c.board_id&&(a(`/ideation/${c.board_id}`),e(!1))};return p.jsxs("div",{className:"relative",ref:o,children:[p.jsxs(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e(!t),className:"relative p-2.5 text-design-primaryGrey hover:text-button-primary-cta transition-all duration-200 rounded-full hover:bg-button-tertiary-fill","aria-label":"Notifications",children:[p.jsx(I2,{className:"h-[18px] w-[18px]"}),p.jsx(ct,{children:r>0&&p.jsx(U.span,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},className:"absolute -top-0.5 -right-0.5 flex items-center justify-center min-w-[18px] h-[18px] text-xs font-semibold text-white bg-semantic-error px-1.5 rounded-full",children:r})})]}),p.jsx(ct,{children:t&&p.jsxs(U.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute right-0 mt-2 w-96 bg-white rounded-xl shadow-lg ring-1 ring-black/5 z-50 max-h-[80vh] flex flex-col overflow-hidden backdrop-blur-sm",children:[p.jsx("div",{className:"p-4 bg-design-greyBG/50 border-b border-design-greyOutlines",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h3",{className:"text-lg font-semibold text-design-black",children:"Notifications"}),r>0&&p.jsxs("span",{className:"text-xs font-medium text-design-primaryGrey bg-white px-2 py-1 rounded-full",children:[r," new"]})]}),r>0&&p.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:s,className:"text-sm font-medium text-button-primary-cta hover:text-button-primary-hover transition-colors px-3 py-1.5 rounded-full hover:bg-button-tertiary-fill flex items-center gap-1.5",children:[p.jsx(Ox,{className:"w-4 h-4"}),"Mark all read"]})]})}),p.jsx(U.div,{className:"overflow-y-auto flex-1 max-h-[60vh] scrollbar-thin",initial:{opacity:0},animate:{opacity:1},children:n.length===0?p.jsxs(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-8 text-center text-gray-500 flex flex-col items-center",children:[p.jsx(sk,{className:"h-12 w-12 text-design-primaryGrey mb-3"}),p.jsx("p",{className:"text-design-primaryGrey font-medium",children:"No notifications yet"}),p.jsx("p",{className:"text-sm text-design-primaryGrey/70 mt-1",children:"We'll notify you when something arrives"})]}):p.jsx("div",{className:"divide-y divide-design-greyOutlines",children:n.map(c=>p.jsx(U.div,{whileHover:{backgroundColor:"rgba(240, 238, 255, 0.5)"},onClick:()=>l(c),className:`p-4 cursor-pointer transition-all duration-200 ${c.read?"":"bg-button-tertiary-fill"}`,children:p.jsxs("div",{className:"flex items-start gap-3",children:[G7(c.type),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:`text-sm ${c.read?"text-design-primaryGrey":"text-design-black font-medium"}`,children:c.content}),p.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[p.jsx("p",{className:"text-xs text-design-primaryGrey",children:ar(new Date(c.created_at),"MMM d, HH:mm")}),c.read?p.jsx(sk,{className:"w-3 h-3 text-design-primaryGrey"}):p.jsx(F2,{className:"w-3 h-3 text-button-primary-cta"})]})]}),!c.read&&p.jsx(U.div,{initial:{scale:0},animate:{scale:1},className:"w-2 h-2 rounded-full bg-button-primary-cta shrink-0 mt-2"})]})},c.id))})})]})})]})}function J7(){$r();const{isExpanded:t}=pw(),e=()=>{window.location.href="https://socialhub.io/"};return p.jsx(U.div,{className:"fixed top-0 right-0 h-12 bg-white/80 backdrop-blur-sm border-b border-gray-200 z-40 shadow-sm",animate:{left:t?"16rem":"4.5rem"},transition:{duration:.3,ease:"easeInOut"},children:p.jsxs("div",{className:"h-full px-4 flex items-center justify-between",children:[p.jsx("h1",{className:"text-xl font-bold text-primary",children:"Ideation Board"}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(q7,{}),p.jsxs("button",{onClick:e,className:"btn-primary",children:[p.jsx($2,{className:"h-4 w-4 mr-2"}),"Social Hub"]})]})]})})}function Y7({children:t}){const{isExpanded:e}=pw();return p.jsx(U.div,{className:"min-h-screen",animate:{marginLeft:e?"16rem":"4.5rem"},transition:{duration:.3,ease:"easeInOut"},children:p.jsx("main",{className:"p-6 animate-in fade-in-50",children:t})})}function X7({children:t}){const{currentUser:e}=gr(),{loadInitialBoards:n}=_p();return g.useEffect(()=>{e!=null&&e.accountId&&n(e.accountId)},[e==null?void 0:e.accountId]),p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-light to-white",children:[p.jsx($8,{}),p.jsx(J7,{}),p.jsx(Y7,{children:t})]})}function Q7(){const[t,e]=g.useState(""),[n,r]=g.useState(""),[i,s]=g.useState(!1),[o,a]=g.useState(null),l=$r(),{login:c,isAuthenticated:u}=gr();g.useEffect(()=>{u&&l("/ideation")},[u,l]);const d=async f=>{f.preventDefault(),s(!0),a(null);try{await c(t,n)?(ge.success("Login successful!"),l("/ideation")):(a("Invalid credentials"),ge.error("Invalid credentials"))}catch(h){const m=h instanceof Error?h.message:"An error occurred during login";a(m),ge.error(m)}finally{s(!1)}};return p.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-50",children:p.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-lg",children:[p.jsx("div",{className:"text-center",children:p.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Sign in to SocialHub"})}),o&&p.jsx("div",{className:"rounded-md bg-red-50 p-4",children:p.jsxs("div",{className:"flex",children:[p.jsx("div",{className:"flex-shrink-0",children:p.jsx(Pa,{className:"h-5 w-5 text-red-400"})}),p.jsx("div",{className:"ml-3",children:p.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),p.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[p.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"SocialHub Username"}),p.jsx("input",{id:"email",name:"email",type:"text",autoComplete:"username",required:!0,value:t,onChange:f=>e(f.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"SocialHub username"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),p.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:f=>r(f.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Password"})]})]}),p.jsxs("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[p.jsx(I4,{className:`h-5 w-5 mr-2 ${i?"animate-spin":""}`}),i?"Signing in...":"Sign in"]})]})]})})}function Z7(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return g.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const Zp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ol(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Dw(t){return"nodeType"in t}function sn(t){var e,n;return t?ol(t)?t:Dw(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Rw(t){const{Document:e}=sn(t);return t instanceof e}function Ru(t){return ol(t)?!1:t instanceof sn(t).HTMLElement}function oj(t){return t instanceof sn(t).SVGElement}function al(t){return t?ol(t)?t.document:Dw(t)?Rw(t)?t:Ru(t)||oj(t)?t.ownerDocument:document:document:document}const hr=Zp?g.useLayoutEffect:g.useEffect;function em(t){const e=g.useRef(t);return hr(()=>{e.current=t}),g.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function e9(){const t=g.useRef(null),e=g.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=g.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function eu(t,e){e===void 0&&(e=[t]);const n=g.useRef(t);return hr(()=>{n.current!==t&&(n.current=t)},e),n}function _u(t,e){const n=g.useRef();return g.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function ch(t){const e=em(t),n=g.useRef(null),r=g.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function uh(t){const e=g.useRef();return g.useEffect(()=>{e.current=t},[t]),e.current}let Eg={};function Iu(t,e){return g.useMemo(()=>{if(e)return e;const n=Eg[t]==null?0:Eg[t]+1;return Eg[t]=n,t+"-"+n},[t,e])}function aj(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const a=Object.entries(o);for(const[l,c]of a){const u=s[l];u!=null&&(s[l]=u+t*c)}return s},{...e})}}const pa=aj(1),dh=aj(-1);function t9(t){return"clientX"in t&&"clientY"in t}function tm(t){if(!t)return!1;const{KeyboardEvent:e}=sn(t.target);return e&&t instanceof e}function n9(t){if(!t)return!1;const{TouchEvent:e}=sn(t.target);return e&&t instanceof e}function fh(t){if(n9(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return t9(t)?{x:t.clientX,y:t.clientY}:null}const hs=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[hs.Translate.toString(t),hs.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),tC="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function r9(t){return t.matches(tC)?t:t.querySelector(tC)}const i9={display:"none"};function s9(t){let{id:e,value:n}=t;return D.createElement("div",{id:e,style:i9},n)}function o9(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return D.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function a9(){const[t,e]=g.useState("");return{announce:g.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const lj=g.createContext(null);function l9(t){const e=g.useContext(lj);g.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function c9(){const[t]=g.useState(()=>new Set),e=g.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[g.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var a;return(a=o[i])==null?void 0:a.call(o,s)})},[t]),e]}const u9={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},d9={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function f9(t){let{announcements:e=d9,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=u9}=t;const{announce:s,announcement:o}=a9(),a=Iu("DndLiveRegion"),[l,c]=g.useState(!1);if(g.useEffect(()=>{c(!0)},[]),l9(g.useMemo(()=>({onDragStart(d){let{active:f}=d;s(e.onDragStart({active:f}))},onDragMove(d){let{active:f,over:h}=d;e.onDragMove&&s(e.onDragMove({active:f,over:h}))},onDragOver(d){let{active:f,over:h}=d;s(e.onDragOver({active:f,over:h}))},onDragEnd(d){let{active:f,over:h}=d;s(e.onDragEnd({active:f,over:h}))},onDragCancel(d){let{active:f,over:h}=d;s(e.onDragCancel({active:f,over:h}))}}),[s,e])),!l)return null;const u=D.createElement(D.Fragment,null,D.createElement(s9,{id:r,value:i.draggable}),D.createElement(o9,{id:a,announcement:o}));return n?tt.createPortal(u,n):u}var at;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(at||(at={}));function hh(){}function h9(t,e){return g.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function p9(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return g.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const pr=Object.freeze({x:0,y:0});function m9(t,e){const n=fh(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function g9(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function y9(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function v9(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,a=s-n;if(r<i&&n<s){const l=e.width*e.height,c=t.width*t.height,u=o*a,d=u/(l+c-u);return Number(d.toFixed(4))}return 0}const x9=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,a=n.get(o);if(a){const l=v9(a,e);l>0&&i.push({id:o,data:{droppableContainer:s,value:l}})}}return i.sort(g9)};function w9(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function cj(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:pr}function b9(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const k9=b9(1);function uj(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function S9(t,e,n){const r=uj(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=t.left-o-(1-i)*parseFloat(n),c=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?t.width/i:t.width,d=s?t.height/s:t.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}const C9={ignoreTransform:!1};function ll(t,e){e===void 0&&(e=C9);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:u}=sn(t).getComputedStyle(t);c&&(n=S9(n,c,u))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function nC(t){return ll(t,{ignoreTransform:!0})}function E9(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function T9(t,e){return e===void 0&&(e=sn(t).getComputedStyle(t)),e.position==="fixed"}function N9(t,e){e===void 0&&(e=sn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function _w(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(Rw(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Ru(i)||oj(i)||n.includes(i))return n;const s=sn(t).getComputedStyle(i);return i!==t&&N9(i,s)&&n.push(i),T9(i,s)?n:r(i.parentNode)}return t?r(t):n}function dj(t){const[e]=_w(t,1);return e??null}function Tg(t){return!Zp||!t?null:ol(t)?t:Dw(t)?Rw(t)||t===al(t).scrollingElement?window:Ru(t)?t:null:null}function fj(t){return ol(t)?t.scrollX:t.scrollLeft}function hj(t){return ol(t)?t.scrollY:t.scrollTop}function W0(t){return{x:fj(t),y:hj(t)}}var pt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(pt||(pt={}));function pj(t){return!Zp||!t?!1:t===document.scrollingElement}function mj(t){const e={x:0,y:0},n=pj(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const M9={x:.2,y:.2};function P9(t,e,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=M9);const{isTop:c,isBottom:u,isLeft:d,isRight:f}=mj(t),h={x:0,y:0},m={x:0,y:0},y={height:e.height*i.y,width:e.width*i.x};return!c&&s<=e.top+y.height?(h.y=pt.Backward,m.y=r*Math.abs((e.top+y.height-s)/y.height)):!u&&l>=e.bottom-y.height&&(h.y=pt.Forward,m.y=r*Math.abs((e.bottom-y.height-l)/y.height)),!f&&a>=e.right-y.width?(h.x=pt.Forward,m.x=r*Math.abs((e.right-y.width-a)/y.width)):!d&&o<=e.left+y.width&&(h.x=pt.Backward,m.x=r*Math.abs((e.left+y.width-o)/y.width)),{direction:h,speed:m}}function O9(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function gj(t){return t.reduce((e,n)=>pa(e,W0(n)),pr)}function j9(t){return t.reduce((e,n)=>e+fj(n),0)}function A9(t){return t.reduce((e,n)=>e+hj(n),0)}function yj(t,e){if(e===void 0&&(e=ll),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);dj(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const D9=[["x",["left","right"],j9],["y",["top","bottom"],A9]];class Iw{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=_w(n),i=gj(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,a]of D9)for(const l of o)Object.defineProperty(this,l,{get:()=>{const c=a(r),u=i[s]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class dc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function R9(t){const{EventTarget:e}=sn(t);return t instanceof e?t:al(t)}function Ng(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var In;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(In||(In={}));function rC(t){t.preventDefault()}function _9(t){t.stopPropagation()}var Ce;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter"})(Ce||(Ce={}));const vj={start:[Ce.Space,Ce.Enter],cancel:[Ce.Esc],end:[Ce.Space,Ce.Enter]},I9=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Ce.Right:return{...n,x:n.x+25};case Ce.Left:return{...n,x:n.x-25};case Ce.Down:return{...n,y:n.y+25};case Ce.Up:return{...n,y:n.y-25}}};class xj{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new dc(al(n)),this.windowListeners=new dc(sn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(In.Resize,this.handleCancel),this.windowListeners.add(In.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(In.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&yj(r),n(pr)}handleKeyDown(e){if(tm(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=vj,coordinateGetter:o=I9,scrollBehavior:a="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:pr;this.referenceCoordinates||(this.referenceCoordinates=u);const d=o(e,{active:n,context:r.current,currentCoordinates:u});if(d){const f=dh(d,u),h={x:0,y:0},{scrollableAncestors:m}=r.current;for(const y of m){const x=e.code,{isTop:v,isRight:w,isLeft:b,isBottom:k,maxScroll:S,minScroll:C}=mj(y),E=O9(y),T={x:Math.min(x===Ce.Right?E.right-E.width/2:E.right,Math.max(x===Ce.Right?E.left:E.left+E.width/2,d.x)),y:Math.min(x===Ce.Down?E.bottom-E.height/2:E.bottom,Math.max(x===Ce.Down?E.top:E.top+E.height/2,d.y))},P=x===Ce.Right&&!w||x===Ce.Left&&!b,N=x===Ce.Down&&!k||x===Ce.Up&&!v;if(P&&T.x!==d.x){const M=y.scrollLeft+f.x,A=x===Ce.Right&&M<=S.x||x===Ce.Left&&M>=C.x;if(A&&!f.y){y.scrollTo({left:M,behavior:a});return}A?h.x=y.scrollLeft-M:h.x=x===Ce.Right?y.scrollLeft-S.x:y.scrollLeft-C.x,h.x&&y.scrollBy({left:-h.x,behavior:a});break}else if(N&&T.y!==d.y){const M=y.scrollTop+f.y,A=x===Ce.Down&&M<=S.y||x===Ce.Up&&M>=C.y;if(A&&!f.x){y.scrollTo({top:M,behavior:a});return}A?h.y=y.scrollTop-M:h.y=x===Ce.Down?y.scrollTop-S.y:y.scrollTop-C.y,h.y&&y.scrollBy({top:-h.y,behavior:a});break}}this.handleMove(e,pa(dh(d,this.referenceCoordinates),h))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}xj.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=vj,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function iC(t){return!!(t&&"distance"in t)}function sC(t){return!!(t&&"delay"in t)}class Lw{constructor(e,n,r){var i;r===void 0&&(r=R9(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=al(o),this.documentListeners=new dc(this.document),this.listeners=new dc(r),this.windowListeners=new dc(sn(o)),this.initialCoordinates=(i=fh(s))!=null?i:pr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(In.Resize,this.handleCancel),this.windowListeners.add(In.DragStart,rC),this.windowListeners.add(In.VisibilityChange,this.handleCancel),this.windowListeners.add(In.ContextMenu,rC),this.documentListeners.add(In.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(sC(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(iC(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(In.Click,_9,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(In.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;const l=(n=fh(e))!=null?n:pr,c=dh(i,l);if(!r&&a){if(iC(a)){if(a.tolerance!=null&&Ng(c,a.tolerance))return this.handleCancel();if(Ng(c,a.distance))return this.handleStart()}return sC(a)&&Ng(c,a.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===Ce.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const L9={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class $w extends Lw{constructor(e){const{event:n}=e,r=al(n.target);super(e,L9,r)}}$w.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const $9={move:{name:"mousemove"},end:{name:"mouseup"}};var K0;(function(t){t[t.RightClick=2]="RightClick"})(K0||(K0={}));class F9 extends Lw{constructor(e){super(e,$9,al(e.event.target))}}F9.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===K0.RightClick?!1:(r==null||r({event:n}),!0)}}];const Mg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class B9 extends Lw{constructor(e){super(e,Mg)}static setup(){return window.addEventListener(Mg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Mg.move.name,e)};function e(){}}}B9.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var fc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(fc||(fc={}));var ph;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(ph||(ph={}));function V9(t){let{acceleration:e,activator:n=fc.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=ph.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:f}=t;const h=U9({delta:d,disabled:!s}),[m,y]=e9(),x=g.useRef({x:0,y:0}),v=g.useRef({x:0,y:0}),w=g.useMemo(()=>{switch(n){case fc.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case fc.DraggableRect:return i}},[n,i,l]),b=g.useRef(null),k=g.useCallback(()=>{const C=b.current;if(!C)return;const E=x.current.x*v.current.x,T=x.current.y*v.current.y;C.scrollBy(E,T)},[]),S=g.useMemo(()=>a===ph.TreeOrder?[...c].reverse():c,[a,c]);g.useEffect(()=>{if(!s||!c.length||!w){y();return}for(const C of S){if((r==null?void 0:r(C))===!1)continue;const E=c.indexOf(C),T=u[E];if(!T)continue;const{direction:P,speed:N}=P9(C,T,w,e,f);for(const M of["x","y"])h[M][P[M]]||(N[M]=0,P[M]=0);if(N.x>0||N.y>0){y(),b.current=C,m(k,o),x.current=N,v.current=P;return}}x.current={x:0,y:0},v.current={x:0,y:0},y()},[e,k,r,y,s,o,JSON.stringify(w),JSON.stringify(h),m,c,S,u,JSON.stringify(f)])}const z9={x:{[pt.Backward]:!1,[pt.Forward]:!1},y:{[pt.Backward]:!1,[pt.Forward]:!1}};function U9(t){let{delta:e,disabled:n}=t;const r=uh(e);return _u(i=>{if(n||!r||!i)return z9;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[pt.Backward]:i.x[pt.Backward]||s.x===-1,[pt.Forward]:i.x[pt.Forward]||s.x===1},y:{[pt.Backward]:i.y[pt.Backward]||s.y===-1,[pt.Forward]:i.y[pt.Forward]||s.y===1}}},[n,e,r])}function H9(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return _u(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function W9(t,e){return g.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var tu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(tu||(tu={}));var G0;(function(t){t.Optimized="optimized"})(G0||(G0={}));const oC=new Map;function K9(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=g.useState(null),{frequency:a,measure:l,strategy:c}=i,u=g.useRef(t),d=x(),f=eu(d),h=g.useCallback(function(v){v===void 0&&(v=[]),!f.current&&o(w=>w===null?v:w.concat(v.filter(b=>!w.includes(b))))},[f]),m=g.useRef(null),y=_u(v=>{if(d&&!n)return oC;if(!v||v===oC||u.current!==t||s!=null){const w=new Map;for(let b of t){if(!b)continue;if(s&&s.length>0&&!s.includes(b.id)&&b.rect.current){w.set(b.id,b.rect.current);continue}const k=b.node.current,S=k?new Iw(l(k),k):null;b.rect.current=S,S&&w.set(b.id,S)}return w}return v},[t,s,n,d,l]);return g.useEffect(()=>{u.current=t},[t]),g.useEffect(()=>{d||h()},[n,d]),g.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),g.useEffect(()=>{d||typeof a!="number"||m.current!==null||(m.current=setTimeout(()=>{h(),m.current=null},a))},[a,d,h,...r]),{droppableRects:y,measureDroppableContainers:h,measuringScheduled:s!=null};function x(){switch(c){case tu.Always:return!1;case tu.BeforeDragging:return n;default:return!n}}}function Fw(t,e){return _u(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function G9(t,e){return Fw(t,e)}function q9(t){let{callback:e,disabled:n}=t;const r=em(e),i=g.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return g.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function nm(t){let{callback:e,disabled:n}=t;const r=em(e),i=g.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return g.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function J9(t){return new Iw(ll(t),t)}function aC(t,e,n){e===void 0&&(e=J9);const[r,i]=g.useState(null);function s(){i(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l??n)!=null?c:null}const u=e(t);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const o=q9({callback(l){if(t)for(const c of l){const{type:u,target:d}=c;if(u==="childList"&&d instanceof HTMLElement&&d.contains(t)){s();break}}}}),a=nm({callback:s});return hr(()=>{s(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function Y9(t){const e=Fw(t);return cj(t,e)}const lC=[];function X9(t){const e=g.useRef(t),n=_u(r=>t?r&&r!==lC&&t&&e.current&&t.parentNode===e.current.parentNode?r:_w(t):lC,[t]);return g.useEffect(()=>{e.current=t},[t]),n}function Q9(t){const[e,n]=g.useState(null),r=g.useRef(t),i=g.useCallback(s=>{const o=Tg(s.target);o&&n(a=>a?(a.set(o,W0(o)),new Map(a)):null)},[]);return g.useEffect(()=>{const s=r.current;if(t!==s){o(s);const a=t.map(l=>{const c=Tg(l);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,W0(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(s)};function o(a){a.forEach(l=>{const c=Tg(l);c==null||c.removeEventListener("scroll",i)})}},[i,t]),g.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>pa(s,o),pr):gj(t):pr,[t,e])}function cC(t,e){e===void 0&&(e=[]);const n=g.useRef(null);return g.useEffect(()=>{n.current=null},e),g.useEffect(()=>{const r=t!==pr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?dh(t,n.current):pr}function Z9(t){g.useEffect(()=>{if(!Zp)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function eK(t,e){return g.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function wj(t){return g.useMemo(()=>t?E9(t):null,[t])}const uC=[];function tK(t,e){e===void 0&&(e=ll);const[n]=t,r=wj(n?sn(n):null),[i,s]=g.useState(uC);function o(){s(()=>t.length?t.map(l=>pj(l)?r:new Iw(e(l),l)):uC)}const a=nm({callback:o});return hr(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),i}function bj(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Ru(e)?e:t}function nK(t){let{measure:e}=t;const[n,r]=g.useState(null),i=g.useCallback(c=>{for(const{target:u}of c)if(Ru(u)){r(d=>{const f=e(u);return d?{...d,width:f.width,height:f.height}:f});break}},[e]),s=nm({callback:i}),o=g.useCallback(c=>{const u=bj(c);s==null||s.disconnect(),u&&(s==null||s.observe(u)),r(u?e(u):null)},[e,s]),[a,l]=ch(o);return g.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const rK=[{sensor:$w,options:{}},{sensor:xj,options:{}}],iK={current:{}},sf={draggable:{measure:nC},droppable:{measure:nC,strategy:tu.WhileDragging,frequency:G0.Optimized},dragOverlay:{measure:ll}};class hc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const sK={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new hc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:hh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:sf,measureDroppableContainers:hh,windowRect:null,measuringScheduled:!1},kj={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:hh,draggableNodes:new Map,over:null,measureDroppableContainers:hh},Lu=g.createContext(kj),Sj=g.createContext(sK);function oK(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new hc}}}function aK(t,e){switch(e.type){case at.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case at.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case at.DragEnd:case at.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case at.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new hc(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case at.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new hc(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case at.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new hc(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function lK(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=g.useContext(Lu),s=uh(r),o=uh(n==null?void 0:n.id);return g.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!tm(s)||document.activeElement===s.target)return;const a=i.get(o);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const d=r9(u);if(d){d.focus();break}}})}},[r,e,i,o,s]),null}function Cj(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function cK(t){return g.useMemo(()=>({draggable:{...sf.draggable,...t==null?void 0:t.draggable},droppable:{...sf.droppable,...t==null?void 0:t.droppable},dragOverlay:{...sf.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function uK(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=g.useRef(!1),{x:o,y:a}=typeof i=="boolean"?{x:i,y:i}:i;hr(()=>{if(!o&&!a||!e){s.current=!1;return}if(s.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const u=n(c),d=cj(u,r);if(o||(d.x=0),a||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const f=dj(c);f&&f.scrollBy({top:d.y,left:d.x})}},[e,o,a,r,n])}const rm=g.createContext({...pr,scaleX:1,scaleY:1});var Mi;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Mi||(Mi={}));const dK=g.memo(function(e){var n,r,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:c,sensors:u=rK,collisionDetection:d=x9,measuring:f,modifiers:h,...m}=e;const y=g.useReducer(aK,void 0,oK),[x,v]=y,[w,b]=c9(),[k,S]=g.useState(Mi.Uninitialized),C=k===Mi.Initialized,{draggable:{active:E,nodes:T,translate:P},droppable:{containers:N}}=x,M=E!=null?T.get(E):null,A=g.useRef({initial:null,translated:null}),B=g.useMemo(()=>{var Dt;return E!=null?{id:E,data:(Dt=M==null?void 0:M.data)!=null?Dt:iK,rect:A}:null},[E,M]),Y=g.useRef(null),[R,X]=g.useState(null),[V,O]=g.useState(null),j=eu(m,Object.values(m)),F=Iu("DndDescribedBy",o),H=g.useMemo(()=>N.getEnabled(),[N]),Z=cK(f),{droppableRects:z,measureDroppableContainers:se,measuringScheduled:we}=K9(H,{dragging:C,dependencies:[P.x,P.y],config:Z.droppable}),Se=H9(T,E),Ne=g.useMemo(()=>V?fh(V):null,[V]),kt=jD(),st=G9(Se,Z.draggable.measure);uK({activeNode:E!=null?T.get(E):null,config:kt.layoutShiftCompensation,initialRect:st,measure:Z.draggable.measure});const ke=aC(Se,Z.draggable.measure,st),vr=aC(Se?Se.parentElement:null),he=g.useRef({activatorEvent:null,active:null,activeNode:Se,collisionRect:null,collisions:null,droppableRects:z,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Me=N.getNodeFor((n=he.current.over)==null?void 0:n.id),Ue=nK({measure:Z.dragOverlay.measure}),xr=(r=Ue.nodeRef.current)!=null?r:Se,Br=C?(i=Ue.rect)!=null?i:ke:null,I=!!(Ue.nodeRef.current&&Ue.rect),ee=Y9(I?null:ke),K=wj(xr?sn(xr):null),J=X9(C?Me??Se:null),ae=tK(J),pe=Cj(h,{transform:{x:P.x-ee.x,y:P.y-ee.y,scaleX:1,scaleY:1},activatorEvent:V,active:B,activeNodeRect:ke,containerNodeRect:vr,draggingNodeRect:Br,over:he.current.over,overlayNodeRect:Ue.rect,scrollableAncestors:J,scrollableAncestorRects:ae,windowRect:K}),xe=Ne?pa(Ne,P):null,Je=Q9(J),St=cC(Je),me=cC(Je,[ke]),He=pa(pe,St),Cs=Br?k9(Br,pe):null,pi=B&&Cs?d({active:B,collisionRect:Cs,droppableRects:z,droppableContainers:H,pointerCoordinates:xe}):null,Yn=y9(pi,"id"),[on,Vu]=g.useState(null),mi=I?pe:pa(pe,me),ul=w9(mi,(s=on==null?void 0:on.rect)!=null?s:null,ke),dl=g.useRef(null),zu=g.useCallback((Dt,yn)=>{let{sensor:vn,options:gi}=yn;if(Y.current==null)return;const jn=T.get(Y.current);if(!jn)return;const xn=Dt.nativeEvent,wr=new vn({active:Y.current,activeNode:jn,event:xn,options:gi,context:he,onStart(Xn){const fl=Y.current;if(fl==null)return;const hl=T.get(fl);if(!hl)return;const{onDragStart:Uu}=j.current,Hu={activatorEvent:xn,active:{id:fl,data:hl.data,rect:A}};tt.unstable_batchedUpdates(()=>{Uu==null||Uu(Hu),S(Mi.Initializing),v({type:at.DragStart,initialCoordinates:Xn,active:fl}),w({type:"onDragStart",event:Hu}),X(dl.current),O(xn)})},onMove(Xn){v({type:at.DragMove,coordinates:Xn})},onEnd:Mo(at.DragEnd),onCancel:Mo(at.DragCancel)});dl.current=wr;function Mo(Xn){return async function(){const{active:hl,collisions:Uu,over:Hu,scrollAdjustedTranslate:b1}=he.current;let pl=null;if(hl&&b1){const{cancelDrop:ml}=j.current;pl={activatorEvent:xn,active:hl,collisions:Uu,delta:b1,over:Hu},Xn===at.DragEnd&&typeof ml=="function"&&await Promise.resolve(ml(pl))&&(Xn=at.DragCancel)}Y.current=null,tt.unstable_batchedUpdates(()=>{v({type:Xn}),S(Mi.Uninitialized),Vu(null),X(null),O(null),dl.current=null;const ml=Xn===at.DragEnd?"onDragEnd":"onDragCancel";if(pl){const xm=j.current[ml];xm==null||xm(pl),w({type:ml,event:pl})}})}}},[T]),MD=g.useCallback((Dt,yn)=>(vn,gi)=>{const jn=vn.nativeEvent,xn=T.get(gi);if(Y.current!==null||!xn||jn.dndKit||jn.defaultPrevented)return;const wr={active:xn};Dt(vn,yn.options,wr)===!0&&(jn.dndKit={capturedBy:yn.sensor},Y.current=gi,zu(vn,yn))},[T,zu]),w1=W9(u,MD);Z9(u),hr(()=>{ke&&k===Mi.Initializing&&S(Mi.Initialized)},[ke,k]),g.useEffect(()=>{const{onDragMove:Dt}=j.current,{active:yn,activatorEvent:vn,collisions:gi,over:jn}=he.current;if(!yn||!vn)return;const xn={active:yn,activatorEvent:vn,collisions:gi,delta:{x:He.x,y:He.y},over:jn};tt.unstable_batchedUpdates(()=>{Dt==null||Dt(xn),w({type:"onDragMove",event:xn})})},[He.x,He.y]),g.useEffect(()=>{const{active:Dt,activatorEvent:yn,collisions:vn,droppableContainers:gi,scrollAdjustedTranslate:jn}=he.current;if(!Dt||Y.current==null||!yn||!jn)return;const{onDragOver:xn}=j.current,wr=gi.get(Yn),Mo=wr&&wr.rect.current?{id:wr.id,rect:wr.rect.current,data:wr.data,disabled:wr.disabled}:null,Xn={active:Dt,activatorEvent:yn,collisions:vn,delta:{x:jn.x,y:jn.y},over:Mo};tt.unstable_batchedUpdates(()=>{Vu(Mo),xn==null||xn(Xn),w({type:"onDragOver",event:Xn})})},[Yn]),hr(()=>{he.current={activatorEvent:V,active:B,activeNode:Se,collisionRect:Cs,collisions:pi,droppableRects:z,draggableNodes:T,draggingNode:xr,draggingNodeRect:Br,droppableContainers:N,over:on,scrollableAncestors:J,scrollAdjustedTranslate:He},A.current={initial:Br,translated:Cs}},[B,Se,pi,Cs,T,xr,Br,z,N,on,J,He]),V9({...kt,delta:P,draggingRect:Cs,pointerCoordinates:xe,scrollableAncestors:J,scrollableAncestorRects:ae});const PD=g.useMemo(()=>({active:B,activeNode:Se,activeNodeRect:ke,activatorEvent:V,collisions:pi,containerNodeRect:vr,dragOverlay:Ue,draggableNodes:T,droppableContainers:N,droppableRects:z,over:on,measureDroppableContainers:se,scrollableAncestors:J,scrollableAncestorRects:ae,measuringConfiguration:Z,measuringScheduled:we,windowRect:K}),[B,Se,ke,V,pi,vr,Ue,T,N,z,on,se,J,ae,Z,we,K]),OD=g.useMemo(()=>({activatorEvent:V,activators:w1,active:B,activeNodeRect:ke,ariaDescribedById:{draggable:F},dispatch:v,draggableNodes:T,over:on,measureDroppableContainers:se}),[V,w1,B,ke,v,F,T,on,se]);return D.createElement(lj.Provider,{value:b},D.createElement(Lu.Provider,{value:OD},D.createElement(Sj.Provider,{value:PD},D.createElement(rm.Provider,{value:ul},c)),D.createElement(lK,{disabled:(a==null?void 0:a.restoreFocus)===!1})),D.createElement(f9,{...a,hiddenTextDescribedById:F}));function jD(){const Dt=(R==null?void 0:R.autoScrollEnabled)===!1,yn=typeof l=="object"?l.enabled===!1:l===!1,vn=C&&!Dt&&!yn;return typeof l=="object"?{...l,enabled:vn}:{enabled:vn}}}),fK=g.createContext(null),dC="button",hK="Draggable";function pK(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=Iu(hK),{activators:o,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:f}=g.useContext(Lu),{role:h=dC,roleDescription:m="draggable",tabIndex:y=0}=i??{},x=(l==null?void 0:l.id)===e,v=g.useContext(x?rm:fK),[w,b]=ch(),[k,S]=ch(),C=eK(o,e),E=eu(n);hr(()=>(d.set(e,{id:e,key:s,node:w,activatorNode:k,data:E}),()=>{const P=d.get(e);P&&P.key===s&&d.delete(e)}),[d,e]);const T=g.useMemo(()=>({role:h,tabIndex:y,"aria-disabled":r,"aria-pressed":x&&h===dC?!0:void 0,"aria-roledescription":m,"aria-describedby":u.draggable}),[r,h,y,x,m,u.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:T,isDragging:x,listeners:r?void 0:C,node:w,over:f,setNodeRef:b,setActivatorNodeRef:S,transform:v}}function Ej(){return g.useContext(Sj)}const mK="Droppable",gK={timeout:25};function Tj(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=Iu(mK),{active:o,dispatch:a,over:l,measureDroppableContainers:c}=g.useContext(Lu),u=g.useRef({disabled:n}),d=g.useRef(!1),f=g.useRef(null),h=g.useRef(null),{disabled:m,updateMeasurementsFor:y,timeout:x}={...gK,...i},v=eu(y??r),w=g.useCallback(()=>{if(!d.current){d.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{c(Array.isArray(v.current)?v.current:[v.current]),h.current=null},x)},[x]),b=nm({callback:w,disabled:m||!o}),k=g.useCallback((T,P)=>{b&&(P&&(b.unobserve(P),d.current=!1),T&&b.observe(T))},[b]),[S,C]=ch(k),E=eu(e);return g.useEffect(()=>{!b||!S.current||(b.disconnect(),d.current=!1,b.observe(S.current))},[S,b]),g.useEffect(()=>(a({type:at.RegisterDroppable,element:{id:r,key:s,disabled:n,node:S,rect:f,data:E}}),()=>a({type:at.UnregisterDroppable,key:s,id:r})),[r]),g.useEffect(()=>{n!==u.current.disabled&&(a({type:at.SetDroppableDisabled,id:r,key:s,disabled:n}),u.current.disabled=n)},[r,s,n,a]),{active:o,rect:f,isOver:(l==null?void 0:l.id)===r,node:S,over:l,setNodeRef:C}}function yK(t){let{animation:e,children:n}=t;const[r,i]=g.useState(null),[s,o]=g.useState(null),a=uh(n);return!n&&!r&&a&&i(a),hr(()=>{if(!s)return;const l=r==null?void 0:r.key,c=r==null?void 0:r.props.id;if(l==null||c==null){i(null);return}Promise.resolve(e(c,s)).then(()=>{i(null)})},[e,r,s]),D.createElement(D.Fragment,null,n,r?g.cloneElement(r,{ref:o}):null)}const vK={x:0,y:0,scaleX:1,scaleY:1};function xK(t){let{children:e}=t;return D.createElement(Lu.Provider,{value:kj},D.createElement(rm.Provider,{value:vK},e))}const wK={position:"fixed",touchAction:"none"},bK=t=>tm(t)?"transform 250ms ease":void 0,kK=g.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:i,children:s,className:o,rect:a,style:l,transform:c,transition:u=bK}=t;if(!a)return null;const d=i?c:{...c,scaleX:1,scaleY:1},f={...wK,width:a.width,height:a.height,top:a.top,left:a.left,transform:hs.Transform.toString(d),transformOrigin:i&&r?m9(r,a):void 0,transition:typeof u=="function"?u(r):u,...l};return D.createElement(n,{className:o,style:f,ref:e},s)}),SK=t=>e=>{let{active:n,dragOverlay:r}=e;const i={},{styles:s,className:o}=t;if(s!=null&&s.active)for(const[a,l]of Object.entries(s.active))l!==void 0&&(i[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(s!=null&&s.dragOverlay)for(const[a,l]of Object.entries(s.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[l,c]of Object.entries(i))n.node.style.setProperty(l,c);o!=null&&o.active&&n.node.classList.remove(o.active)}},CK=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:hs.Transform.toString(e)},{transform:hs.Transform.toString(n)}]},EK={duration:250,easing:"ease",keyframes:CK,sideEffects:SK({styles:{active:{opacity:"0"}}})};function TK(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=t;return em((s,o)=>{if(e===null)return;const a=n.get(s);if(!a)return;const l=a.node.current;if(!l)return;const c=bj(o);if(!c)return;const{transform:u}=sn(o).getComputedStyle(o),d=uj(u);if(!d)return;const f=typeof e=="function"?e:NK(e);return yj(l,i.draggable.measure),f({active:{id:s,data:a.data,node:l,rect:i.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:o,rect:i.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:i,transform:d})})}function NK(t){const{duration:e,easing:n,sideEffects:r,keyframes:i}={...EK,...t};return s=>{let{active:o,dragOverlay:a,transform:l,...c}=s;if(!e)return;const u={x:a.rect.left-o.rect.left,y:a.rect.top-o.rect.top},d={scaleX:l.scaleX!==1?o.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?o.rect.height*l.scaleY/a.rect.height:1},f={x:l.x-u.x,y:l.y-u.y,...d},h=i({...c,active:o,dragOverlay:a,transform:{initial:l,final:f}}),[m]=h,y=h[h.length-1];if(JSON.stringify(m)===JSON.stringify(y))return;const x=r==null?void 0:r({active:o,dragOverlay:a,...c}),v=a.node.animate(h,{duration:e,easing:n,fill:"forwards"});return new Promise(w=>{v.onfinish=()=>{x==null||x(),w()}})}}let fC=0;function MK(t){return g.useMemo(()=>{if(t!=null)return fC++,fC},[t])}const PK=D.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:i,transition:s,modifiers:o,wrapperElement:a="div",className:l,zIndex:c=999}=t;const{activatorEvent:u,active:d,activeNodeRect:f,containerNodeRect:h,draggableNodes:m,droppableContainers:y,dragOverlay:x,over:v,measuringConfiguration:w,scrollableAncestors:b,scrollableAncestorRects:k,windowRect:S}=Ej(),C=g.useContext(rm),E=MK(d==null?void 0:d.id),T=Cj(o,{activatorEvent:u,active:d,activeNodeRect:f,containerNodeRect:h,draggingNodeRect:x.rect,over:v,overlayNodeRect:x.rect,scrollableAncestors:b,scrollableAncestorRects:k,transform:C,windowRect:S}),P=Fw(f),N=TK({config:r,draggableNodes:m,droppableContainers:y,measuringConfiguration:w}),M=P?x.setRef:void 0;return D.createElement(xK,null,D.createElement(yK,{animation:N},d&&E?D.createElement(kK,{key:E,id:d.id,ref:M,as:a,activatorEvent:u,adjustScale:e,className:l,transition:s,rect:P,style:{zIndex:c,...i},transform:T},n):null))});function Nj(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function OK(t,e){return t.reduce((n,r,i)=>{const s=e.get(r);return s&&(n[i]=s),n},Array(t.length))}function Cd(t){return t!==null&&t>=0}function jK(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function AK(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Mj=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const s=Nj(e,r,n),o=e[i],a=s[i];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},Pj="Sortable",Oj=D.createContext({activeIndex:-1,containerId:Pj,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Mj,disabled:{draggable:!1,droppable:!1}});function jj(t){let{children:e,id:n,items:r,strategy:i=Mj,disabled:s=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:u}=Ej(),d=Iu(Pj,n),f=a.rect!==null,h=g.useMemo(()=>r.map(C=>typeof C=="object"&&"id"in C?C.id:C),[r]),m=o!=null,y=o?h.indexOf(o.id):-1,x=c?h.indexOf(c.id):-1,v=g.useRef(h),w=!jK(h,v.current),b=x!==-1&&y===-1||w,k=AK(s);hr(()=>{w&&m&&u(h)},[w,h,m,u]),g.useEffect(()=>{v.current=h},[h]);const S=g.useMemo(()=>({activeIndex:y,containerId:d,disabled:k,disableTransforms:b,items:h,overIndex:x,useDragOverlay:f,sortedRects:OK(h,l),strategy:i}),[y,d,k.draggable,k.droppable,b,h,x,l,f,i]);return D.createElement(Oj.Provider,{value:S},e)}const DK=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return Nj(n,r,i).indexOf(e)},RK=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:a,previousContainerId:l,transition:c}=t;return!c||!r||a!==s&&i===o?!1:n?!0:o!==i&&e===l},_K={duration:200,easing:"ease"},Aj="transform",IK=hs.Transition.toString({property:Aj,duration:0,easing:"linear"}),LK={roleDescription:"sortable"};function $K(t){let{disabled:e,index:n,node:r,rect:i}=t;const[s,o]=g.useState(null),a=g.useRef(n);return hr(()=>{if(!e&&n!==a.current&&r.current){const l=i.current;if(l){const c=ll(r.current,{ignoreTransform:!0}),u={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(u.x||u.y)&&o(u)}}n!==a.current&&(a.current=n)},[e,n,r,i]),g.useEffect(()=>{s&&o(null)},[s]),s}function FK(t){let{animateLayoutChanges:e=RK,attributes:n,disabled:r,data:i,getNewIndex:s=DK,id:o,strategy:a,resizeObserverConfig:l,transition:c=_K}=t;const{items:u,containerId:d,activeIndex:f,disabled:h,disableTransforms:m,sortedRects:y,overIndex:x,useDragOverlay:v,strategy:w}=g.useContext(Oj),b=BK(r,h),k=u.indexOf(o),S=g.useMemo(()=>({sortable:{containerId:d,index:k,items:u},...i}),[d,i,k,u]),C=g.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:E,node:T,isOver:P,setNodeRef:N}=Tj({id:o,data:S,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...l}}),{active:M,activatorEvent:A,activeNodeRect:B,attributes:Y,setNodeRef:R,listeners:X,isDragging:V,over:O,setActivatorNodeRef:j,transform:F}=pK({id:o,data:S,attributes:{...LK,...n},disabled:b.draggable}),H=Z7(N,R),Z=!!M,z=Z&&!m&&Cd(f)&&Cd(x),se=!v&&V,we=se&&z?F:null,Ne=z?we??(a??w)({rects:y,activeNodeRect:B,activeIndex:f,overIndex:x,index:k}):null,kt=Cd(f)&&Cd(x)?s({id:o,items:u,activeIndex:f,overIndex:x}):k,st=M==null?void 0:M.id,ke=g.useRef({activeId:st,items:u,newIndex:kt,containerId:d}),vr=u!==ke.current.items,he=e({active:M,containerId:d,isDragging:V,isSorting:Z,id:o,index:k,items:u,newIndex:ke.current.newIndex,previousItems:ke.current.items,previousContainerId:ke.current.containerId,transition:c,wasDragging:ke.current.activeId!=null}),Me=$K({disabled:!he,index:k,node:T,rect:E});return g.useEffect(()=>{Z&&ke.current.newIndex!==kt&&(ke.current.newIndex=kt),d!==ke.current.containerId&&(ke.current.containerId=d),u!==ke.current.items&&(ke.current.items=u)},[Z,kt,d,u]),g.useEffect(()=>{if(st===ke.current.activeId)return;if(st&&!ke.current.activeId){ke.current.activeId=st;return}const xr=setTimeout(()=>{ke.current.activeId=st},50);return()=>clearTimeout(xr)},[st]),{active:M,activeIndex:f,attributes:Y,data:S,rect:E,index:k,newIndex:kt,items:u,isOver:P,isSorting:Z,isDragging:V,listeners:X,node:T,overIndex:x,over:O,setNodeRef:H,setActivatorNodeRef:j,setDroppableNodeRef:N,setDraggableNodeRef:R,transform:Me??Ne,transition:Ue()};function Ue(){if(Me||vr&&ke.current.newIndex===k)return IK;if(!(se&&!tm(A)||!c)&&(Z||he))return hs.Transition.toString({...c,property:Aj})}}function BK(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}Ce.Down,Ce.Right,Ce.Up,Ce.Left;const Ro={low:{bg:"bg-semantic-success-light",text:"text-semantic-success",hover:"hover:bg-semantic-success/20"},medium:{bg:"bg-semantic-warning-light",text:"text-semantic-warning",hover:"hover:bg-semantic-warning/20"},high:{bg:"bg-semantic-error-light",text:"text-semantic-error",hover:"hover:bg-semantic-error/20"}};function VK({value:t,onChange:e}){const[n,r]=D.useState(!1),i=s=>{e(s),r(!1)};return p.jsxs("div",{className:"relative",children:[p.jsxs(U.button,{onClick:()=>r(!n),className:`inline-flex items-center px-4 py-1 rounded-full text-sm font-medium transition-colors ${Ro[t].bg} ${Ro[t].text}`,whileHover:{scale:1.05},whileTap:{scale:.98},children:[t,p.jsx(U.div,{animate:{rotate:n?180:0},transition:{duration:.3},children:p.jsx(Co,{className:"ml-1 h-3 w-3"})})]}),p.jsx(ct,{children:n&&p.jsx(U.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute z-10 mt-1 w-24 rounded-md shadow-lg bg-white border border-design-greyOutlines overflow-hidden",children:p.jsx("div",{className:"py-1",role:"menu",children:Object.entries(Ro).map(([s,o])=>p.jsx(U.button,{onClick:()=>i(s),className:`block w-full text-left px-4 py-2 text-xs transition-colors ${Ro[s].bg} ${Ro[s].text} ${Ro[s].hover}`,role:"menuitem",whileHover:{scale:1.02},whileTap:{scale:.95},children:s},s))})})})]})}function im(t){g.useEffect(()=>(t?(document.body.style.overflow="hidden",document.body.style.paddingRight=`${window.innerWidth-document.documentElement.clientWidth}px`):(document.body.style.overflow="",document.body.style.paddingRight=""),()=>{document.body.style.overflow="",document.body.style.paddingRight=""}),[t])}const Ed={red:{bg:"bg-semantic-error/20",text:"text-semantic-error",button:"bg-semantic-error"},blue:{bg:"bg-blue-500/20",text:"text-blue-500",button:"bg-blue-500"},green:{bg:"bg-semantic-success/20",text:"text-semantic-success",button:"bg-semantic-success"},yellow:{bg:"bg-yellow-500/20",text:"text-yellow-500",button:"bg-yellow-500"},purple:{bg:"bg-button-primary-cta/20",text:"text-button-primary-cta",button:"bg-button-primary-cta"},gray:{bg:"bg-design-greyBG/20",text:"text-design-black",button:"bg-design-greyBG"}};function zK({isOpen:t,onClose:e,labels:n,onUpdate:r}){im(t);const[i,s]=g.useState(!1),[o,a]=g.useState(""),[l,c]=g.useState("blue");g.useEffect(()=>{t&&s(!0)},[t]);const u=()=>{s(!1),setTimeout(e,200)},d=()=>{o.trim()&&(r([...n,{text:o.trim(),color:l}]),a(""),c("blue"))},f=h=>{r(n.filter((m,y)=>y!==h))};return t?p.jsxs("div",{className:"fixed inset-x-0 top-48 flex items-start justify-center z-[200] mt-4",children:[p.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm",onClick:u,style:{animation:i?"fadeIn 0.2s ease-out forwards":"fadeOut 0.2s ease-out forwards"}}),p.jsxs("div",{className:"relative w-full max-w-md mx-4 bg-white rounded-2xl p-8 shadow-xl border border-gray-100",style:{animation:i?"slideIn 0.2s ease-out forwards":"slideOut 0.2s ease-out forwards"},children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h3",{className:"text-xl font-semibold text-design-black",children:"Labels"}),p.jsx("button",{onClick:u,className:"text-gray-400 hover:text-semantic-error rounded-full hover:bg-semantic-error-light transition-colors p-1",children:p.jsx(Xt,{className:"h-5 w-5"})})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((h,m)=>p.jsxs(U.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${Ed[h.color].bg} ${Ed[h.color].text}`,children:[h.text,p.jsx("button",{onClick:()=>f(m),className:"ml-2 hover:text-semantic-error focus:outline-none",children:p.jsx(Xt,{className:"h-3 w-3"})})]},m))}),p.jsx("div",{className:"mt-4",children:p.jsxs("div",{className:"flex flex-col space-y-3",children:[p.jsx("input",{type:"text",value:o,onChange:h=>a(h.target.value),placeholder:"Enter label text...",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary transition-all dark:bg-design-black/50 dark:border-design-greyOutlines/20",onKeyDown:h=>{h.key==="Enter"&&d()}}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(Ed).map(([h,m])=>p.jsx(U.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c(h),className:`w-8 h-8 rounded-full ${Ed[h].button} ${l===h?"ring-2 ring-offset-2 ring-button-primary-cta":""}`},h))}),p.jsx("button",{onClick:d,disabled:!o.trim(),className:"w-full px-4 py-2 bg-design-primaryPurple text-white rounded-lg hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-primary transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Label"})]})})]})]}),p.jsx("style",{jsx:!0,global:!0,children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }

        @keyframes fadeOut {
          from {
            opacity: 1;
          }
          to {
            opacity: 0;
          }
        }

        @keyframes slideIn {
          from {
            opacity: 0;
            transform: scale(0.95);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }

        @keyframes slideOut {
          from {
            opacity: 1;
            transform: scale(1);
          }
          to {
            opacity: 0;
            transform: scale(0.95);
          }
        }
      `})]}):null}const hC={red:{bg:"bg-semantic-error/20",text:"text-semantic-error",button:"bg-semantic-error"},blue:{bg:"bg-blue-500/20",text:"text-blue-500",button:"bg-blue-500"},green:{bg:"bg-semantic-success/20",text:"text-semantic-success",button:"bg-semantic-success"},yellow:{bg:"bg-yellow-500/20",text:"text-yellow-500",button:"bg-yellow-500"},purple:{bg:"bg-button-primary-cta/20",text:"text-button-primary-cta",button:"bg-button-primary-cta"},gray:{bg:"bg-design-greyBG/20",text:"text-design-black",button:"bg-design-greyBG"}};function UK({labels:t,onUpdate:e}){const[n,r]=g.useState(!1),i=s=>{e(t.filter((o,a)=>a!==s))};return p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex flex-wrap gap-1",children:[p.jsx(ct,{children:t&&t.map((s,o)=>p.jsxs(U.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${hC[s.color].bg} ${hC[s.color].text}`,children:[s.text,p.jsx(U.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(o),className:"ml-1.5 hover:text-semantic-error focus:outline-none",children:p.jsx(Xt,{className:"h-3 w-3"})})]},o))}),p.jsxs(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r(!0),className:"btn-ghost hover:text-design-primaryPurple btn-sm rounded-full",children:[p.jsx(Or,{className:"h-3 w-3 mr-1"}),"Add Label"]})]}),p.jsx(zK,{isOpen:n,onClose:()=>r(!1),labels:t,onUpdate:e})]})}const HK=({type:t,className:e="h-4 w-4"})=>{const n=l=>{if(!l)return"link";const c=l.split(".").pop().toLowerCase();return["pdf"].includes(c)?"pdf":["doc","docx"].includes(c)?"word":["jpg","jpeg","png","gif","webp"].includes(c)?"image":["mp4","mov","avi","webm"].includes(c)?"video":"file"},r=l=>l?l.split(".").pop().toLowerCase():"",i=n(t),s=r(t),o={pdf:"text-semantic-error hover:text-semantic-error-hover",word:"text-semantic-info hover:text-semantic-info-hover",image:"text-design-primaryPurple hover:text-button-primary-hover",video:"text-semantic-warning hover:text-semantic-warning-hover",link:"text-design-primaryPurple hover:text-button-primary-hover",file:"text-design-primaryGrey hover:text-gray-700"},a={pdf:p.jsx(ik,{className:`${e} ${o.pdf}`}),word:p.jsx(ik,{className:`${e} ${o.word}`}),image:p.jsx(M4,{className:`${e} ${o.image}`}),video:p.jsx(k4,{className:`${e} ${o.video}`}),link:p.jsx(D4,{className:`${e} ${o.link}`}),file:p.jsx(S4,{className:`${e} ${o.file}`})};return p.jsxs("div",{className:"relative flex flex-col items-center",children:[a[i]||a.file,s&&i!=="link"&&p.jsx("span",{className:"text-[10px] font-medium mt-1 uppercase",style:{color:o[i].split(" ")[0].replace("text-","")},children:s})]})};function WK({attachments:t,onAddAttachment:e,onDeleteAttachment:n,boardId:r,boardTitle:i}){const[s,o]=g.useState(!1),[a,l]=g.useState(""),[c,u]=g.useState(null),[d,f]=g.useState(!1),[h,m]=g.useState(!1),[y,x]=g.useState(!1),[v,w]=g.useState(null),b=M=>{try{const A=M.match(/^https?:\/\//)?M:`https://${M}`;return new URL(A),!0}catch{return!1}},k=()=>{if(u(null),!a.trim()){u("Please enter a URL");return}const M=a.match(/^https?:\/\//)?a:`https://${a}`;if(!b(M)){u("Please enter a valid URL");return}try{const A=new URL(M);e({id:Date.now().toString(),type:"link",url:M,name:A.hostname,createdAt:new Date().toISOString()}),l(""),o(!1)}catch{u("Invalid URL format")}},S=async M=>{var B;const A=(B=M.target.files)==null?void 0:B[0];if(A){m(!0);try{const Y=A.name.split(".").pop(),R=`${A.name.substring(0,A.name.lastIndexOf("."))||A.name}_${Date.now()}.${Y}`,X=`${i} ${r}/${R}`,{data:V,error:O}=await ne.storage.from("ideation_media").upload(X,A,{cacheControl:"3600",upsert:!1});if(O)throw O;e({id:Date.now().toString(),type:"file",storagePath:X,name:A.name,size:A.size,createdAt:new Date().toISOString()}),ge.success("File uploaded successfully")}catch(Y){console.error("Error uploading file:",Y),ge.error("Failed to upload file")}finally{m(!1)}}},C=async M=>{const A=t.find(B=>B.id===M);if(A){x(!0),w(M);try{if(A.type==="file"&&A.storagePath){const{error:B}=await ne.storage.from("ideation_media").remove([A.storagePath]);if(B)throw B}n(M),ge.success("Attachment deleted successfully")}catch(B){console.error("Error deleting attachment:",B),ge.error("Failed to delete attachment")}finally{x(!1),w(null)}}},E=async M=>{try{w(M);const{data:A,error:B}=await ne.storage.from("ideation_media").createSignedUrl(M,3600);if(B)throw B;return A.signedUrl}catch(A){return console.error("Error generating signed URL:",A),ge.error("Failed to generate download link"),null}finally{w(null),ge.success("Download link valid for 60 minutes")}},T=async M=>{if(M.type!=="file"||!M.storagePath)return;const A=await E(M.storagePath);A&&window.open(A,"_blank")},P=d?t:t.slice(0,2),N=t.length>2;return p.jsxs("div",{className:"space-y-4 bg-white/50 backdrop-blur-sm border border-design-greyOutlines/20 p-4 rounded-xl shadow-sm transition-all duration-300 hover:shadow-md",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center text-sm font-medium text-design-primaryGrey",children:[p.jsx(V2,{className:"h-5 w-5 mr-2 text-design-primaryPurple"}),"Attachments"]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsxs("button",{onClick:()=>o(!0),disabled:h||y,className:"flex items-center px-3 py-1.5 text-sm text-design-primaryPurple bg-design-lightPurpleButtonFill rounded-lg hover:bg-button-primary-cta hover:text-white transition-all duration-300 transform hover:scale-105 disabled:opacity-50",children:[p.jsx(Or,{className:"h-4 w-4 mr-1"}),"Add Link"]}),p.jsxs("label",{className:`flex items-center px-3 py-1.5 text-sm text-design-primaryPurple bg-design-lightPurpleButtonFill rounded-lg hover:bg-button-primary-cta hover:text-white transition-all duration-300 transform hover:scale-105 cursor-pointer ${h?"opacity-50 pointer-events-none":""}`,children:[h?p.jsxs(p.Fragment,{children:[p.jsx(Qm,{className:"h-4 w-4 mr-1 animate-spin"}),"Uploading..."]}):p.jsxs(p.Fragment,{children:[p.jsx(Or,{className:"h-4 w-4 mr-1"}),"Upload File"]}),p.jsx("input",{type:"file",className:"hidden",onChange:S,disabled:h||y})]})]})]}),s&&p.jsx(ct,{children:p.jsx(U.div,{initial:{opacity:0,y:-20,height:0},animate:{opacity:1,y:0,height:"auto",transition:{type:"spring",stiffness:500,damping:30}},exit:{opacity:0,y:-20,height:0},className:"overflow-hidden",children:p.jsxs(U.div,{initial:{scale:.95},animate:{scale:1},className:"bg-white p-4 rounded-lg shadow-sm border border-design-greyOutlines/20",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(U.input,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},type:"url",value:a,onChange:M=>l(M.target.value),placeholder:"Enter URL...",className:`input flex-1 p-2 ${c?"border-semantic-error":""}`,onKeyDown:M=>{M.key==="Enter"&&(M.preventDefault(),k())}}),p.jsx(U.button,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:k,className:"btn-primary",children:"Add"}),p.jsx(U.button,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},transition:{delay:.3},whileHover:{scale:1.1},onClick:()=>{o(!1),l(""),u(null)},className:"btn-ghost p-2",children:p.jsx(Xt,{className:"h-5 w-5"})})]}),c&&p.jsx(U.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm text-semantic-error mt-2",children:c})]})})}),p.jsxs("div",{className:"space-y-2",children:[P.map(M=>p.jsxs("div",{className:"group flex items-center justify-between p-3 bg-white border border-design-greyOutlines/20 rounded-lg hover:border-design-primaryPurple/30 transition-all duration-300 transform hover:scale-[1.01] hover:shadow-sm",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:"w-12 h-12 rounded-lg bg-design-lightPurpleButtonFill flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:p.jsx(HK,{type:M.name,className:"h-5 w-5"})}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-sm font-medium text-gray-800 group-hover:text-design-primaryPurple transition-colors duration-300",children:M.name}),p.jsxs("span",{className:"text-xs text-design-primaryGrey",children:["Added ",new Date(M.createdAt).toLocaleDateString(),M.size&&` • ${Math.round(M.size/1024)} KB`]})]})]}),p.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[M.type==="link"?p.jsx("a",{href:M.url,target:"_blank",rel:"noreferrer",className:"p-2 rounded-full hover:bg-design-lightPurpleButtonFill text-design-primaryGrey hover:text-design-primaryPurple transition-all duration-300",children:p.jsx(b4,{className:"h-4 w-4"})}):p.jsx("button",{onClick:()=>T(M),disabled:v===M.storagePath,className:"p-2 rounded-full hover:bg-design-lightPurpleButtonFill text-design-primaryGrey hover:text-design-primaryPurple transition-all duration-300 disabled:opacity-50",children:v===M.storagePath?p.jsx(Qm,{className:"h-4 w-4 animate-spin"}):p.jsx(w4,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>C(M.id),disabled:y||v===M.id,className:"p-2 rounded-full hover:bg-semantic-error-light text-design-primaryGrey hover:text-semantic-error transition-all duration-300 disabled:opacity-50",children:v===M.id?p.jsx(Qm,{className:"h-4 w-4 animate-spin"}):p.jsx(Xt,{className:"h-4 w-4"})})]})]},M.id)),N&&p.jsxs("button",{onClick:()=>f(!d),className:"w-full py-2 px-4 text-sm text-design-primaryPurple hover:text-button-primary-hover flex items-center justify-center gap-2 group transition-all duration-300",children:[p.jsx("span",{children:d?"Show Less":"View More Attachments"}),p.jsx(Co,{className:`h-4 w-4 transition-transform duration-300 ${d?"rotate-180":""}`})]})]})]})}function KK({comments:t,userUserId:e,onAddComment:n,onEditComment:r,onDeleteComment:i,teamUsers:s,cardId:o,cardTitle:a,boardId:l}){const[c,u]=g.useState(""),[d,f]=g.useState(null),[h,m]=g.useState(""),[y,x]=g.useState(!1),[v,w]=g.useState(!1),[b,k]=g.useState(""),[S,C]=g.useState(0),{currentUser:E}=gr(),T=g.useRef(null),P=j=>{j.style.height="auto",j.style.height=Math.min(j.scrollHeight,150)+"px"},N=j=>{const F=j.target.value,H=j.target.selectionStart;u(F),C(H),P(j.target);const z=F.slice(0,H).split(/\s+/),se=z[z.length-1];if(se.startsWith("@")){const we=se.slice(1).toLowerCase();k(we),w(!0)}else w(!1)},M=j=>{var se;const F=c.slice(0,S);c.slice(S);const H=F.lastIndexOf(" "),Z=H===-1?0:H+1,z=c.slice(0,Z)+`@${j.userName} `+c.slice(S);u(z),w(!1),(se=T.current)==null||se.focus()},A=j=>j?j.split(/(\s+)/).map((H,Z)=>{if(H.startsWith("@")&&H.length>1){const z=H.slice(1).trim();if(s.find(we=>we.userName.toLowerCase()===z.toLowerCase()))return p.jsx("span",{className:"font-medium text-design-primaryPurple",children:H},Z)}return p.jsx("span",{children:H},Z)}):null,B=j=>{const F=[];return j.split(/\s+/).forEach(Z=>{if(Z.startsWith("@")){const z=Z.slice(1),se=s.find(we=>we.userName.toLowerCase()===z.toLowerCase());se&&F.push(se)}}),F},Y=s.filter(j=>j.userName.toLowerCase().includes(b.toLowerCase())),R=async j=>{if(j.preventDefault(),c.trim()){await n(c.trim());const F=B(c.trim());for(const H of F)try{await ne.from("notifications").insert([{user_id:H._id,content:`${E.userName} mentioned you in a comment: "${c.trim()}" at ${a}`,type:"MENTION",board_id:l,card_id:o,created_at:new Date().toISOString(),read:!1}])}catch(Z){console.error("Error creating mention notification:",Z)}u(""),bz(F,E.userName,a,l,c.trim())}},X=j=>{h.trim()&&(r(j,h.trim()),f(null))},V=y?t:t.slice(0,3),O=t.length>3;return p.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-300 bg-white dark:bg-design-black/30 border border-design-greyOutlines/20 p-6 rounded-2xl shadow-sm",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(B2,{className:"h-5 w-5 text-design-primaryPurple"}),p.jsx("span",{className:"font-semibold text-design-black dark:text-design-white",children:"Comments"}),t.length>0&&p.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs bg-design-lightPurpleButtonFill text-design-primaryPurple font-medium",children:t.length})]}),p.jsxs("div",{className:"relative",children:[p.jsx("form",{onSubmit:R,className:"group",children:p.jsxs("div",{className:"flex gap-2 transition-all duration-200 focus-within:scale-[1.01]",children:[p.jsx("textarea",{ref:T,value:c,onChange:N,placeholder:"Add a comment... (Use @ to mention)",rows:1,className:"flex-1 px-4 py-3 rounded-xl border-2 border-design-greyOutlines/50 focus:border-design-primaryPurple focus:ring-0 dark:bg-design-black/50 dark:border-design-greyOutlines/20 placeholder:text-design-primaryGrey/50 min-h-[48px] max-h-[150px] resize-none overflow-auto scrollbar-none",style:{height:"auto",overflowY:"auto",scrollbarWidth:"none",msOverflowStyle:"none"}}),p.jsx("button",{type:"submit",disabled:!c.trim(),className:"h-12 px-4 bg-design-primaryPurple text-white rounded-xl font-medium shadow-lg hover:shadow-design-primaryPurple/25 disabled:opacity-50 disabled:hover:shadow-none transition-all duration-200 hover:scale-105 disabled:scale-100 self-start",children:"Send"})]})}),v&&Y.length>0&&p.jsx("div",{className:"absolute bottom-full mb-2 w-full bg-white dark:bg-design-black/90 rounded-xl shadow-xl border border-design-greyOutlines/20 max-h-48 overflow-y-auto z-10 animate-in slide-in-from-top-2 duration-200",children:Y.map(j=>p.jsxs("button",{onClick:()=>M(j),className:"w-full text-left px-4 py-2.5 hover:bg-design-lightVioletSelection dark:hover:bg-design-primaryPurple/10 flex items-center gap-3 transition-colors duration-150",children:[p.jsx("div",{className:"h-8 w-8 rounded-full bg-design-primaryPurple text-white flex items-center justify-center text-sm font-medium",children:j.userName[0].toUpperCase()}),p.jsxs("span",{className:"text-design-black dark:text-design-white",children:["@",j.userName]})]},j._id))})]}),p.jsxs("div",{className:"space-y-4",children:[V.map(j=>p.jsxs("div",{className:"group rounded-xl p-4 hover:bg-design-lightPurpleButtonFill dark:hover:bg-design-primaryPurple/5 transition-all duration-200 hover:scale-[1.01]",children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:"h-9 w-9 rounded-full bg-design-primaryPurple/10 border-2 border-design-primaryPurple/20 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:p.jsx(Kf,{className:"h-4 w-4 text-design-primaryPurple"})}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"font-medium text-design-black dark:text-design-white",children:j.author}),p.jsx("span",{className:"text-xs text-design-primaryGrey",children:ar(new Date(j.updated_at||j.created_at),"MMM d, yyyy HH:mm")})]})]}),j.user_id===e&&p.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[p.jsx("button",{onClick:()=>{f(j.id),m(j.text)},className:"p-2 rounded-lg hover:bg-design-primaryPurple/10 hover:text-design-primaryPurple transition-colors duration-150",children:p.jsx(h0,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>i(j.id),className:"p-2 rounded-lg hover:bg-semantic-error-light hover:text-semantic-error transition-colors duration-150",children:p.jsx(Eo,{className:"h-4 w-4"})})]})]}),d===j.id?p.jsxs("div",{className:"mt-3 space-y-3",children:[p.jsx("textarea",{value:h,onChange:F=>m(F.target.value),className:"w-full px-4 py-2 rounded-xl border-2 border-design-greyOutlines/50 focus:border-design-primaryPurple focus:ring-0 dark:bg-design-black/50 min-h-[80px]",rows:2}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{onClick:()=>f(null),className:"px-4 py-1.5 rounded-lg hover:bg-design-greyBG transition-colors duration-150",children:"Cancel"}),p.jsx("button",{onClick:()=>X(j.id),className:"px-4 py-1.5 bg-design-primaryPurple text-white rounded-lg hover:bg-button-primary-hover transition-colors duration-150",children:"Save"})]})]}):p.jsxs("p",{className:"mt-3 text-design-black dark:text-design-greyOutlines leading-relaxed",children:[A(j.text),j.updated_at&&p.jsx("span",{className:"text-xs text-design-primaryGrey ml-2",children:"(edited)"})]})]},j.id)),O&&p.jsxs("button",{onClick:()=>x(!y),className:"w-full py-3 text-design-primaryPurple hover:text-button-primary-hover flex items-center justify-center gap-2 group transition-colors duration-150",children:[p.jsx("span",{className:"font-medium",children:y?"Show Less":"View More Comments"}),p.jsx(Co,{className:`h-4 w-4 transition-transform duration-300 ${y?"rotate-180":"group-hover:translate-y-0.5"}`})]})]})]})}function GK({isOpen:t,onClose:e,checklist:n,onUpdate:r}){im(t);const[i,s]=g.useState(""),[o,a]=g.useState(!1);g.useEffect(()=>{t&&a(!0)},[t]);const l=()=>{a(!1),setTimeout(e,200)},c=()=>{i.trim()&&(r([...n,{id:Date.now().toString(),text:i.trim(),checked:!1}]),s(""))},u=h=>{r(n.map(m=>m.id===h?{...m,checked:!m.checked}:m))},d=h=>{r(n.filter(m=>m.id!==h))},f=n.filter(h=>h.checked).length;return t?p.jsxs("div",{className:"fixed inset-x-0 top-80 flex items-start justify-center z-[200] mt-4",children:[p.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm",onClick:l,style:{animation:o?"fadeIn 0.2s ease-out forwards":"fadeOut 0.2s ease-out forwards"}}),p.jsxs("div",{className:"relative w-full max-w-md mx-4 bg-white rounded-2xl p-8 shadow-xl border border-gray-100",style:{animation:o?"slideIn 0.2s ease-out forwards":"slideOut 0.2s ease-out forwards"},children:[p.jsxs("div",{className:"text-xl font-semibold text-design-black dark:text-design-white flex justify-between items-center mb-6",children:[p.jsxs("span",{children:["Checklist (",f,"/",n.length,")"]}),p.jsx("button",{onClick:l,className:"text-gray-400 hover:text-semantic-error rounded-full hover:bg-semantic-error-light transition-colors p-1",children:p.jsx(Xt,{className:"h-5 w-5"})})]}),p.jsx("div",{className:"space-y-4",children:n.map(h=>p.jsxs("div",{className:"flex items-center group hover:bg-primary-light/30 p-2 rounded-lg transition-all",children:[p.jsx("button",{onClick:()=>u(h.id),className:"flex-shrink-0 mr-3 text-gray-400 hover:text-primary transition-colors",children:h.checked?p.jsx(Hf,{className:"h-5 w-5 text-primary"}):p.jsx(z4,{className:"h-5 w-5"})}),p.jsx("span",{className:`flex-grow ${h.checked?"line-through text-gray-400":"text-gray-700 dark:text-design-white"}`,children:h.text}),p.jsx("button",{onClick:()=>d(h.id),className:"flex-shrink-0 ml-2 text-gray-400 hover:text-semantic-error opacity-0 group-hover:opacity-100 transition-all hover:scale-110",children:p.jsx(Xt,{className:"h-4 w-4"})})]},h.id))}),p.jsx("div",{className:"mt-6",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{type:"text",value:i,onChange:h=>s(h.target.value),placeholder:"Add new item...",className:"flex-grow px-4 py-2 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-primary transition-all dark:bg-design-black/50 dark:border-design-greyOutlines/20",onKeyDown:h=>{h.key==="Enter"&&c()}}),p.jsx("button",{onClick:c,className:"px-4 py-2 bg-design-primaryPurple text-white rounded-r-lg hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-primary transition-all hover:scale-105",children:p.jsx(Or,{className:"h-5 w-5"})})]})})]}),p.jsx("style",{jsx:!0,global:!0,children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }

        @keyframes fadeOut {
          from {
            opacity: 1;
          }
          to {
            opacity: 0;
          }
        }

        @keyframes slideIn {
          from {
            opacity: 0;
            transform: scale(0.95);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }

        @keyframes slideOut {
          from {
            opacity: 1;
            transform: scale(1);
          }
          to {
            opacity: 0;
            transform: scale(0.95);
          }
        }
      `})]}):null}function qK({value:t,onChange:e,className:n=""}){const[r,i]=g.useState(!1),[s,o]=g.useState(t?uc(t):new Date),a=t?ar(uc(t),"MMM d, yyyy"):"Set due date",l=ZO({start:H0(s),end:lh(s)}),c=()=>o(sj(s,1)),u=()=>o(cc(s,1)),d=m=>{e(ar(m,"yyyy-MM-dd")),i(!1)},f=[{label:"Today",date:new Date},{label:"Next month",date:cc(new Date,1)},{label:"In 2 months",date:cc(new Date,2)}],h=()=>{e(null),i(!1)};return p.jsxs("div",{className:`relative ${n}`,children:[p.jsxs(U.button,{onClick:()=>i(!r),className:"inline-flex items-center text-base text-design-black border-none transition-all  ",whileHover:{scale:1.02},whileTap:{scale:.98},children:[a,p.jsx(Co,{className:`h-4 w-4 ml-2 text-gray-400 transition-transform duration-300 ${r?"rotate-180":""}`})]}),p.jsx(ct,{children:r&&p.jsxs(U.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 z-10 mt-2 p-4 rounded-xl shadow-lg bg-white ring-1 ring-black ring-opacity-5 w-72",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-gray-100",children:p.jsx(jx,{className:"h-5 w-5 text-gray-600"})}),p.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:ar(s,"MMMM yyyy")}),p.jsx("button",{onClick:u,className:"p-1 rounded-full hover:bg-gray-100",children:p.jsx(Ax,{className:"h-5 w-5 text-gray-600"})})]}),p.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-4",children:[["Su","Mo","Tu","We","Th","Fr","Sa"].map(m=>p.jsx("div",{className:"text-center text-sm font-medium text-gray-400",children:m},m)),l.map((m,y)=>p.jsx(U.button,{onClick:()=>d(m),className:`
                    p-2 text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-design-primaryPurple
                    ${rj(m,s)?Qp(m,uc(t||""))?"bg-design-primaryPurple text-white":Aw(m)?"bg-design-primaryPurple/20 text-design-primaryPurple":"text-gray-700 hover:bg-gray-100":"text-gray-300"}
                  `,whileHover:{scale:1.1},whileTap:{scale:.95},children:ar(m,"d")},m.toString()))]}),p.jsxs("div",{className:"space-y-2",children:[f.map(m=>p.jsx(U.button,{onClick:()=>d(m.date),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:m.label},m.label)),p.jsxs(U.button,{onClick:h,className:"w-full text-left px-3 py-2 text-sm text-red-500 hover:bg-red-50 rounded-md transition-colors flex items-center",whileHover:{scale:1.02},whileTap:{scale:.98},children:[p.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Clear date"]})]})]})})]})}async function JK(t,e,n){const{data:r,error:i}=await ne.from("cards").insert([{column_id:t,title:e.title,description:e.description,priority:e.priority,labels:e.labels||[],attachments:e.attachments||[],position:e.position,account_id:n}]).select().single();if(i)throw i;return{...r,attachments:[]}}async function pC(t,e){console.log("updates in card service updateCard: ",e);const{error:n}=await ne.from("cards").update({title:e.title,checklist:e.checklist,description:e.description,column_id:e.column_id,labels:e.labels,priority:e.priority,due_date:e.due_date,assignee:e.assignee,position:e.position,completed:e.completed,archived:e.archived,attachments:e.attachments,updated_at:new Date().toISOString()}).eq("id",t);if(n)throw n}async function YK(t,e){const{error:n}=await ne.from("cards").delete().eq("id",t);if(n)throw n}const XK=async(t,e,n)=>{const{data:r,error:i}=await ne.from("cards").update({column_id:e,position:n}).eq("id",t);if(i)throw i;return r},Pg=async t=>{const e=t.map(r=>ne.from("cards").update({position:r.position,column_id:r.column_id}).eq("id",r.id)),n=await Promise.all(e);for(const{error:r}of n)if(r)throw r;return{success:!0}},Og=async(t,e,n)=>{let r,i;switch(t){case"add":({data:r,error:i}=await ne.from("comments").insert({card_id:e,text:n.text,author:n.author,user_id:n.user_id,created_at:n.created_at}));break;case"edit":({data:r,error:i}=await ne.from("comments").update({text:n.text,updated_at:n.editedAt}).eq("id",n.id).eq("card_id",e).eq("account_id",n.account_id));break;case"delete":console.log("comment in updateComment: ",n),{data:r,error:i}=await ne.from("comments").delete().eq("account_id",n.account_id).eq("id",n.commentId);break;default:throw new Error("Invalid action")}if(i)throw i;return r};function Et(t){this.content=t}Et.prototype={constructor:Et,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Et(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Et(n)},addToStart:function(t,e){return new Et([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Et(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Et(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Et.from(t),t.size?new Et(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Et.from(t),t.size?new Et(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Et.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Et.from=function(t){if(t instanceof Et)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Et(e)};function Dj(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=Dj(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function Rj(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=Rj(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class _{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new _(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new _(r,i)}cutByIndex(e,n){return e==n?_.empty:e==0&&n==this.content.length?this:new _(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new _(i,s)}addToStart(e){return new _([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new _(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Dj(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Rj(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Td(0,e);if(e==this.size)return Td(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?Td(r+1,o):Td(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return _.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new _(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return _.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new _(n||e,r)}static from(e){if(!e)return _.empty;if(e instanceof _)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new _([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}_.empty=new _([],0);const jg={index:0,offset:0};function Td(t,e){return jg.index=t,jg.offset=e,jg}function mh(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!mh(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!mh(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Pe=class q0{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&mh(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return q0.none;if(e instanceof q0)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Pe.none=[];class gh extends Error{}class W{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Ij(this.content,e+this.openStart,n);return r&&new W(r,this.openStart,this.openEnd)}removeBetween(e,n){return new W(_j(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return W.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new W(_.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new W(e,r,i)}}W.empty=new W(_.empty,0,0);function _j(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(_j(s.content,e-i-1,n-i-1)))}function Ij(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=Ij(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function QK(t,e,n){if(n.openStart>t.depth)throw new gh("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new gh("Inconsistent open depths");return Lj(t,e,n,0)}function Lj(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=Lj(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return Zs(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=ZK(n,t);return Zs(s,Fj(t,o,a,e,r))}else return Zs(s,yh(t,e,r))}function $j(t,e){if(!e.type.compatibleContent(t.type))throw new gh("Cannot join "+e.type.name+" onto "+t.type.name)}function J0(t,e,n){let r=t.node(n);return $j(r,e.node(n)),r}function Qs(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function pc(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Qs(t.nodeAfter,r),s++));for(let a=s;a<o;a++)Qs(i.child(a),r);e&&e.depth==n&&e.textOffset&&Qs(e.nodeBefore,r)}function Zs(t,e){return t.type.checkContent(e),t.copy(e)}function Fj(t,e,n,r,i){let s=t.depth>i&&J0(t,e,i+1),o=r.depth>i&&J0(n,r,i+1),a=[];return pc(null,t,i,a),s&&o&&e.index(i)==n.index(i)?($j(s,o),Qs(Zs(s,Fj(t,e,n,r,i+1)),a)):(s&&Qs(Zs(s,yh(t,e,i+1)),a),pc(e,n,i,a),o&&Qs(Zs(o,yh(n,r,i+1)),a)),pc(r,null,i,a),new _(a)}function yh(t,e,n){let r=[];if(pc(null,t,n,r),t.depth>n){let i=J0(t,e,n+1);Qs(Zs(i,yh(t,e,n+1)),r)}return pc(e,null,n,r),new _(r)}function ZK(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(_.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class nu{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Pe.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new vh(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new nu(n,r,s)}static resolveCached(e,n){let r=mC.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else mC.set(e,r=new eG);let i=r.elts[r.i]=nu.resolve(e,n);return r.i=(r.i+1)%tG,i}}class eG{constructor(){this.elts=[],this.i=0}}const tG=12,mC=new WeakMap;class vh{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const nG=Object.create(null);let ts=class Y0{constructor(e,n,r,i=Pe.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||_.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&mh(this.attrs,n||e.defaultAttrs||nG)&&Pe.sameSet(this.marks,r||Pe.none)}copy(e=null){return e==this.content?this:new Y0(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Y0(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return W.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new W(c,i.depth-o,s.depth-o)}replace(e,n,r){return QK(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return nu.resolveCached(this,e)}resolveNoCache(e){return nu.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Bj(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=_.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Pe.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Pe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=_.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};ts.prototype.text=void 0;class xh extends ts{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Bj(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new xh(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new xh(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Bj(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ho{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new rG(e,n);if(r.next==null)return ho.empty;let i=Vj(r);r.next&&r.err("Unexpected trailing text");let s=uG(cG(i));return dG(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return _.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=s(d,a.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}ho.empty=new ho(!0);class rG{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Vj(t){let e=[];do e.push(iG(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function iG(t){let e=[];do e.push(sG(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function sG(t){let e=lG(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=oG(t,e);else break;return e}function gC(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function oG(t,e){let n=gC(t),r=n;return t.eat(",")&&(t.next!="}"?r=gC(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function aG(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function lG(t){if(t.eat("(")){let e=Vj(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=aG(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function cG(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function zj(t,e){return e-t}function yC(t,e){let n=[];return r(e),n.sort(zj);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function uG(t){let e=Object.create(null);return n(yC(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);yC(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new ho(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(zj);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function dG(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Uj(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Hj(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Wj(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function Kj(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new hG(t,r,e[r]);return n}let vC=class Gj{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Kj(e,r.attrs),this.defaultAttrs=Uj(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ho.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Hj(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ts(this,this.computeAttrs(e),_.from(n),Pe.setFrom(r))}createChecked(e=null,n,r){return n=_.from(n),this.checkContent(n),new ts(this,this.computeAttrs(e),n,Pe.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=_.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(_.empty,!0);return s?new ts(this,e,n.append(s),Pe.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Wj(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Pe.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new Gj(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function fG(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class hG{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?fG(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class sm{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=Kj(e,i.attrs),this.excluded=null;let s=Uj(this.attrs);this.instance=s?new Pe(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Pe(this,Hj(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new sm(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Wj(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class qj{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Et.from(e.nodes),n.marks=Et.from(e.marks||{}),this.nodes=vC.compile(this.spec.nodes,this),this.marks=sm.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=ho.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?xC(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:xC(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof vC){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new xh(r,r.defaultAttrs,e,Pe.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return ts.fromJSON(this,e)}markFromJSON(e){return Pe.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function xC(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function pG(t){return t.tag!=null}function mG(t){return t.style!=null}class ns{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(pG(i))this.tags.push(i);else if(mG(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new bC(this,n,!1);return r.addAll(e,Pe.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new bC(this,n,!0);return r.addAll(e,Pe.none,n.from,n.to),W.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(vG(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=kC(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=kC(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ns(e,ns.schemaRules(e)))}}const Jj={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},gG={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Yj={ol:!0,ul:!0},ru=1,X0=2,mc=4;function wC(t,e,n){return e!=null?(e?ru:0)|(e==="full"?X0:0):t&&t.whitespace=="pre"?ru|X0:n&~mc}class Nd{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Pe.none,this.match=s||(o&mc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(_.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ru)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=_.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(_.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Jj.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class bC{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=wC(null,n.preserveWhitespace,0)|(r?mc:0);i?s=new Nd(i.type,i.attrs,Pe.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Nd(null,null,Pe.none,!0,null,o):s=new Nd(e.schema.topNodeType,null,Pe.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&X0?"full":this.localPreserveWS||(i.options&ru)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;Yj.hasOwnProperty(o)&&this.parser.normalizeLists&&yG(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:gG.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(Jj.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r)||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n){let r,i;for(let s=this.open;s>=0;s--){let o=this.nodes[s],a=o.findWrapping(e);if(a&&(!r||r.length>a.length)&&(r=a,i=o,!a.length)||o.solid)break}if(!r)return null;this.sync(i);for(let s=0;s<r.length;s++)n=this.enterInner(r[s],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=Pe.none;for(let o of r.concat(e.marks))(i.type?i.type.allowsMarkType(o.type):SC(o.type,e.type))&&(s=o.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=wC(e,s,o.options);o.options&mc&&o.content.length==0&&(a|=mc);let l=Pe.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):SC(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Nd(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=ru)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function yG(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Yj.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function vG(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function kC(t){let e={};for(let n in t)e[n]=t[n];return e}function SC(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class No{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Ag(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=of(Ag(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&of(Ag(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return of(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new No(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=CC(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return CC(e.marks)}}function CC(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Ag(t){return t.document||window.document}const EC=new WeakMap;function xG(t){let e=EC.get(t);return e===void 0&&EC.set(t,e=wG(t)),e}function wG(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function of(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=xG(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:m}=of(t,f,n,r);if(l.appendChild(h),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const Xj=65535,Qj=Math.pow(2,16);function bG(t,e){return t+e*Qj}function TC(t){return t&Xj}function kG(t){return(t-(t&Xj))/Qj}const Zj=1,eA=2,af=4,tA=8;class Q0{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&tA)>0}get deletedBefore(){return(this.delInfo&(Zj|af))>0}get deletedAfter(){return(this.delInfo&(eA|af))>0}get deletedAcross(){return(this.delInfo&af)>0}}class kn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&kn.empty)return kn.empty}recover(e){let n=0,r=TC(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+kG(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,h=l+i+(f<0?0:u);if(r)return h;let m=e==(n<0?l:d)?null:bG(a/3,e-l),y=e==l?eA:e==d?Zj:af;return(n<0?e!=l:e!=d)&&(y|=tA),new Q0(h,y,m)}i+=u-c}return r?e+i:new Q0(e+i,0,null)}touches(e,n){let r=0,i=TC(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new kn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?kn.empty:new kn(e<0?[0,-e,0]:[0,0,e])}}kn.empty=new kn([]);class ma{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new ma(this.maps,this.mirror,e,n)}copy(){return new ma(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new ma;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Q0(e,i,null)}}const Dg=Object.create(null);class Ht{getMap(){return kn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Dg[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Dg)throw new RangeError("Duplicate use of step JSON ID "+e);return Dg[e]=n,n.prototype.jsonID=e,n}}class rt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new rt(e,null)}static fail(e){return new rt(null,e)}static fromReplace(e,n,r,i){try{return rt.ok(e.replace(n,r,i))}catch(s){if(s instanceof gh)return rt.fail(s.message);throw s}}}function Bw(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(Bw(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return _.fromArray(r)}class Ui extends Ht{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new W(Bw(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return rt.fromReplace(e,this.from,this.to,s)}invert(){return new Nr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ui(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ui&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ui(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ui(n.from,n.to,e.markFromJSON(n.mark))}}Ht.jsonID("addMark",Ui);class Nr extends Ht{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new W(Bw(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return rt.fromReplace(e,this.from,this.to,r)}invert(){return new Ui(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Nr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Nr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Nr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Nr(n.from,n.to,e.markFromJSON(n.mark))}}Ht.jsonID("removeMark",Nr);class Hi extends Ht{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return rt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return rt.fromReplace(e,this.pos,this.pos+1,new W(_.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Hi(this.pos,n.marks[i]);return new Hi(this.pos,this.mark)}}return new Fa(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Hi(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Hi(n.pos,e.markFromJSON(n.mark))}}Ht.jsonID("addNodeMark",Hi);class Fa extends Ht{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return rt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return rt.fromReplace(e,this.pos,this.pos+1,new W(_.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Hi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Fa(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Fa(n.pos,e.markFromJSON(n.mark))}}Ht.jsonID("removeNodeMark",Fa);class mt extends Ht{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Z0(e,this.from,this.to)?rt.fail("Structure replace would overwrite content"):rt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new kn([this.from,this.to-this.from,this.slice.size])}invert(e){return new mt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new mt(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof mt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?W.empty:new W(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new mt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?W.empty:new W(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new mt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new mt(n.from,n.to,W.fromJSON(e,n.slice),!!n.structure)}}Ht.jsonID("replace",mt);class vt extends Ht{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Z0(e,this.from,this.gapFrom)||Z0(e,this.gapTo,this.to)))return rt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return rt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?rt.fromReplace(e,this.from,this.to,r):rt.fail("Content does not fit in gap")}getMap(){return new kn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new vt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new vt(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new vt(n.from,n.to,n.gapFrom,n.gapTo,W.fromJSON(e,n.slice),n.insert,!!n.structure)}}Ht.jsonID("replaceAround",vt);function Z0(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function SG(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,n),m=r.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(m)||(o&&o.to==f&&o.mark.eq(d[y])?o.to=h:i.push(o=new Nr(f,h,d[y])));a&&a.to==f?a.to=h:s.push(a=new Ui(f,h,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function CG(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof sm){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<i.length;h++){let m=i[h];m.step==s-1&&d.eq(i[h].style)&&(f=m)}f?(f.to=c,f.step=s):i.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new Nr(o.from,o.to,o.style)))}function Vw(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new mt(a,u,W.empty));else{r=d;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new Nr(a,u,c.marks[f]));if(i&&c.isText&&n.whitespace!="pre"){let f,h=/\r?\n|\r/g,m;for(;f=h.exec(c.text);)m||(m=new W(_.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new mt(a+f.index,a+f.index+f[0].length,m))}}a=u}if(!r.validEnd){let l=r.fillBefore(_.empty,!0);t.replace(a,a,new W(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function EG(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function cl(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!EG(i,s,o))break}return null}function TG(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=_.empty,d=0;for(let m=s,y=!1;m>n;m--)y||r.index(m)>0?(y=!0,u=_.from(r.node(m).copy(u)),d++):l--;let f=_.empty,h=0;for(let m=s,y=!1;m>n;m--)y||i.after(m+1)<i.end(m)?(y=!0,f=_.from(i.node(m).copy(f)),h++):c++;t.step(new vt(l,c,o,a,new W(u.append(f),d,h),u.size-d,!0))}function zw(t,e,n=null,r=t){let i=NG(t,e),s=i&&MG(r,e);return s?i.map(NC).concat({type:e,attrs:n}).concat(s.map(NC)):null}function NC(t){return{type:t,attrs:null}}function NG(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function MG(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function PG(t,e,n){let r=_.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=_.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new vt(i,s,i,s,new W(r,0,0),n.length,!0))}function OG(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&jG(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!m?c=!1:!h&&m&&(c=!0)}c===!1&&rA(t,o,a,s),Vw(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let u=t.mapping.slice(s),d=u.map(a,1),f=u.map(a+o.nodeSize,1);return t.step(new vt(d,f,d+1,f-1,new W(_.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&nA(t,o,a,s),!1}})}function nA(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function rA(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function jG(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function AG(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new vt(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new W(_.from(o),0,0),1,!0))}function ga(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),m=r&&r[u+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let y=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!y.type.validContent(h))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function DG(t,e,n=1,r){let i=t.doc.resolve(e),s=_.empty,o=_.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=_.from(i.node(a).copy(s));let u=r&&r[c];o=_.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new mt(e,e,new W(s.append(o),n,n),!0))}function bs(t,e){let n=t.resolve(e),r=n.index();return iA(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function RG(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function iA(t,e){return!!(t&&e&&!t.isLeaf&&RG(t,e))}function om(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&iA(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function _G(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);rA(t,u.node(),u.before(),a)}o.inlineContent&&Vw(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new mt(c,l.map(e+n,-1),W.empty,!0)),r===!0){let u=t.doc.resolve(c);nA(t,u.node(),u.before(),t.steps.length)}return t}function IG(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function sA(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function am(t,e,n=e,r=W.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return oA(i,s,r)?new mt(e,n,r):new LG(i,s,r).fit()}function oA(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class LG{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=_.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=_.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new W(s,o,a);return e>-1?new vt(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new mt(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Rg(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(_.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Rg(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new W(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Rg(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new W(zl(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new W(zl(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let y=0;y<s.length;y++)this.openFrontierNode(s[y]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(i){for(let y=0;y<i.childCount;y++)u.push(i.child(y));d=d.matchFragment(i)}let h=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let y=a.child(c),x=d.matchType(y.type);if(!x)break;c++,(c>1||l==0||y.content.size)&&(d=x,u.push(aA(y.mark(f.allowedMarks(y.marks)),c==1?l:0,c==a.childCount?h:-1)))}let m=c==a.childCount;m||(h=-1),this.placed=Ul(this.placed,n,_.from(u)),this.frontier[n].match=d,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,x=a;y<h;y++){let v=x.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),x=v.content}this.unplaced=m?e==0?W.empty:new W(zl(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new W(zl(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!_g(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=_g(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=_g(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ul(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ul(this.placed,this.depth,_.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(_.empty,!0);n.childCount&&(this.placed=Ul(this.placed,this.frontier.length,n))}}function zl(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(zl(t.firstChild.content,e-1,n)))}function Ul(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Ul(t.lastChild.content,e-1,n)))}function Rg(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function aA(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,aA(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(_.empty,!0)))),t.copy(r)}function _g(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!$G(n,s.content,o)?a:null}function $G(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function FG(t){return t.spec.defining||t.spec.definingForContent}function BG(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(oA(i,s,r))return t.step(new mt(e,n,r));let o=cA(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==h&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let m=f.firstChild;if(c.push(m),h==r.openStart)break;f=m.content}for(let f=u-1;f>=0;f--){let h=c[f],m=FG(h.type);if(m&&!h.sameMarkup(i.node(Math.abs(a)-1)))u=f;else if(m||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),m=c[h];if(m)for(let y=0;y<o.length;y++){let x=o[(y+l)%o.length],v=!0;x<0&&(v=!1,x=-x);let w=i.node(x-1),b=i.index(x-1);if(w.canReplaceWith(b,b,m.type,m.marks))return t.replace(i.before(x),v?s.after(x):n,new W(lA(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=o[f];h<0||(e=i.before(h),n=s.after(h))}}function lA(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(lA(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(_.empty,!0))}return t}function VG(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=IG(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new W(_.from(r),0,0))}function zG(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=cA(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function cA(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class ya extends Ht{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return rt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return rt.fromReplace(e,this.pos,this.pos+1,new W(_.from(i),0,n.isLeaf?0:1))}getMap(){return kn.empty}invert(e){return new ya(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ya(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ya(n.pos,n.attr,n.value)}}Ht.jsonID("attr",ya);class iu extends Ht{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return rt.ok(r)}getMap(){return kn.empty}invert(e){return new iu(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new iu(n.attr,n.value)}}Ht.jsonID("docAttr",iu);let Ba=class extends Error{};Ba=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Ba.prototype=Object.create(Error.prototype);Ba.prototype.constructor=Ba;Ba.prototype.name="TransformError";class uA{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ma}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Ba(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=W.empty){let i=am(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new W(_.from(r),0,0))}delete(e,n){return this.replace(e,n,W.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return BG(this,e,n,r),this}replaceRangeWith(e,n,r){return VG(this,e,n,r),this}deleteRange(e,n){return zG(this,e,n),this}lift(e,n){return TG(this,e,n),this}join(e,n=1){return _G(this,e,n),this}wrap(e,n){return PG(this,e,n),this}setBlockType(e,n=e,r,i=null){return OG(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return AG(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new ya(e,n,r)),this}setDocAttribute(e,n){return this.step(new iu(e,n)),this}addNodeMark(e,n){return this.step(new Hi(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Pe)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Fa(e,n)),this}split(e,n=1,r){return DG(this,e,n,r),this}addMark(e,n,r){return SG(this,e,n,r),this}removeMark(e,n,r){return CG(this,e,n,r),this}clearIncompatible(e,n,r){return Vw(this,e,n,r),this}}const Ig=Object.create(null);class le{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new UG(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=W.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?W.empty:n),a==0&&OC(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),OC(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new oe(e):Lo(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Lo(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Lo(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Wn(e.node(0))}static atStart(e){return Lo(e,e,0,0,1)||new Wn(e)}static atEnd(e){return Lo(e,e,e.content.size,e.childCount,-1)||new Wn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Ig[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Ig)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ig[e]=n,n.prototype.jsonID=e,n}getBookmark(){return oe.between(this.$anchor,this.$head).getBookmark()}}le.prototype.visible=!0;class UG{constructor(e,n){this.$from=e,this.$to=n}}let MC=!1;function PC(t){!MC&&!t.parent.inlineContent&&(MC=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class oe extends le{constructor(e,n=e){PC(e),PC(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return le.near(r);let i=e.resolve(n.map(this.anchor));return new oe(i.parent.inlineContent?i:r,r)}replace(e,n=W.empty){if(super.replace(e,n),n==W.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof oe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new lm(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new oe(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=le.findFrom(n,r,!0)||le.findFrom(n,-r,!0);if(s)n=s.$head;else return le.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(le.findFrom(e,-r,!0)||le.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new oe(e,n)}}le.jsonID("text",oe);class lm{constructor(e,n){this.anchor=e,this.head=n}map(e){return new lm(e.map(this.anchor),e.map(this.head))}resolve(e){return oe.between(e.resolve(this.anchor),e.resolve(this.head))}}class re extends le{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?le.near(s):new re(s)}content(){return new W(_.from(this.node),0,0)}eq(e){return e instanceof re&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Uw(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new re(e.resolve(n.anchor))}static create(e,n){return new re(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}re.prototype.visible=!1;le.jsonID("node",re);class Uw{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new lm(r,r):new Uw(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&re.isSelectable(r)?new re(n):le.near(n)}}class Wn extends le{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=W.empty){if(n==W.empty){e.delete(0,e.doc.content.size);let r=le.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Wn(e)}map(e){return new Wn(e)}eq(e){return e instanceof Wn}getBookmark(){return HG}}le.jsonID("all",Wn);const HG={map(){return this},resolve(t){return new Wn(t)}};function Lo(t,e,n,r,i,s=!1){if(e.inlineContent)return oe.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&re.isSelectable(a))return re.create(t,n-(i<0?a.nodeSize:0))}else{let l=Lo(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function OC(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof mt||i instanceof vt))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(le.near(t.doc.resolve(o),n))}const jC=1,Md=2,AC=4;class WG extends uA{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|jC)&~Md,this.storedMarks=null,this}get selectionSet(){return(this.updated&jC)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Md,this}ensureMarks(e){return Pe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Md)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Md,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Pe.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(le.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=AC,this}get scrolledIntoView(){return(this.updated&AC)>0}}function DC(t,e){return!e||!t?t:t.bind(e)}class Hl{constructor(e,n,r){this.name=e,this.init=DC(n.init,r),this.apply=DC(n.apply,r)}}const KG=[new Hl("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Hl("selection",{init(t,e){return t.selection||le.atStart(e.doc)},apply(t){return t.selection}}),new Hl("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Hl("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Lg{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=KG.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Hl(r.key,r.spec.state,r))})}}class ra{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new ra(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new WG(this)}static create(e){let n=new Lg(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new ra(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Lg(this.schema,e.plugins),r=n.fields,i=new ra(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Lg(e.schema,e.plugins),s=new ra(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=ts.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=le.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function dA(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=dA(i,e,{})),n[r]=i}return n}class At{constructor(e){this.spec=e,this.props={},e.props&&dA(e.props,this,this.props),this.key=e.key?e.key.key:fA("plugin")}getState(e){return e[this.key]}}const $g=Object.create(null);function fA(t){return t in $g?t+"$"+ ++$g[t]:($g[t]=0,t+"$")}class On{constructor(e="key"){this.key=fA(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Nt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},su=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let ev=null;const Gr=function(t,e,n){let r=ev||(ev=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},GG=function(){ev=null},po=function(t,e,n,r){return n&&(RC(t,e,n,r,-1)||RC(t,e,n,r,1))},qG=/^(img|br|input|textarea|hr)$/i;function RC(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Vn(t))){let s=t.parentNode;if(!s||s.nodeType!=1||$u(t)||qG.test(t.nodeName)||t.contentEditable=="false")return!1;e=Nt(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Vn(t):0}else return!1}}function Vn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function JG(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Vn(t)}else if(t.parentNode&&!$u(t))e=Nt(t),t=t.parentNode;else return null}}function YG(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!$u(t))e=Nt(t)+1,t=t.parentNode;else return null}}function XG(t,e,n){for(let r=e==0,i=e==Vn(t);r||i;){if(t==n)return!0;let s=Nt(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Vn(t)}}function $u(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const cm=function(t){return t.focusNode&&po(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function _s(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function QG(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function ZG(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Vn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Vn(r.startContainer),r.startOffset)}}}const _r=typeof navigator<"u"?navigator:null,_C=typeof document<"u"?document:null,ks=_r&&_r.userAgent||"",tv=/Edge\/(\d+)/.exec(ks),hA=/MSIE \d/.exec(ks),nv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ks),gn=!!(hA||nv||tv),rs=hA?document.documentMode:nv?+nv[1]:tv?+tv[1]:0,mr=!gn&&/gecko\/(\d+)/i.test(ks);mr&&+(/Firefox\/(\d+)/.exec(ks)||[0,0])[1];const rv=!gn&&/Chrome\/(\d+)/.exec(ks),zt=!!rv,pA=rv?+rv[1]:0,Qt=!gn&&!!_r&&/Apple Computer/.test(_r.vendor),Va=Qt&&(/Mobile\/\w+/.test(ks)||!!_r&&_r.maxTouchPoints>2),Ln=Va||(_r?/Mac/.test(_r.platform):!1),eq=_r?/Win/.test(_r.platform):!1,Xr=/Android \d/.test(ks),Fu=!!_C&&"webkitFontSmoothing"in _C.documentElement.style,tq=Fu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function nq(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function zr(t,e){return typeof t=="number"?t:t[e]}function rq(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function IC(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=su(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?nq(s):rq(a),u=0,d=0;if(e.top<c.top+zr(r,"top")?d=-(c.top-e.top+zr(i,"top")):e.bottom>c.bottom-zr(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+zr(i,"top")-c.top:e.bottom-c.bottom+zr(i,"bottom")),e.left<c.left+zr(r,"left")?u=-(c.left-e.left+zr(i,"left")):e.right>c.right-zr(r,"right")&&(u=e.right-c.right+zr(i,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,h=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let m=a.scrollLeft-f,y=a.scrollTop-h;e={left:e.left-m,top:e.top-y,right:e.right-m,bottom:e.bottom-y}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function iq(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:mA(t.dom)}}function mA(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=su(r));return e}function sq({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;gA(n,r==0?0:r-e)}function gA(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let _o=null;function oq(t){if(t.setActive)return t.setActive();if(_o)return t.focus(_o);let e=mA(t);t.focus(_o==null?{get preventScroll(){return _o={preventScroll:!0},!0}}:void 0),_o||(_o=!1,gA(e,0))}function yA(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=Gr(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let m=f[h];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let y=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(y<r){n=u,r=y,i=y&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&y&&(s=d+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=u,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?aq(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:yA(n,i)}function aq(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=Si(r,1);if(s.top!=s.bottom&&Hw(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function Hw(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function lq(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function cq(t,e,n){let{node:r,offset:i}=yA(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function uq(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function vA(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Hw(e,c))return vA(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function dq(t,e){let n=t.dom.ownerDocument,r,i=0,s=ZG(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!Hw(e,c)||(o=vA(t.dom,e,c),!o))return null}if(Qt)for(let c=o;r&&c;c=su(c))c.draggable&&(r=void 0);if(o=lq(o,e),r){if(mr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;Fu&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=uq(t,r,i,e))}a==null&&(a=cq(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function LC(t){return t.top<t.bottom||t.left<t.right}function Si(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(LC(r))return r}return Array.prototype.find.call(n,LC)||t.getBoundingClientRect()}const fq=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function xA(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Fu||mr;if(r.nodeType==3)if(o&&(fq.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Si(Gr(r,i,i),n);if(mr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Si(Gr(r,i-1,i-1),-1);if(c.top==l.top){let u=Si(Gr(r,i,i+1),-1);if(u.top!=l.top)return jl(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,jl(Si(Gr(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Vn(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Fg(l.getBoundingClientRect(),!1)}if(s==null&&i<Vn(r)){let l=r.childNodes[i];if(l.nodeType==1)return Fg(l.getBoundingClientRect(),!0)}return Fg(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Vn(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Gr(l,Vn(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return jl(Si(c,1),!1)}if(s==null&&i<Vn(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Gr(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return jl(Si(c,-1),!0)}return jl(Si(r.nodeType==3?Gr(r):r,-n),n>=0)}function jl(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Fg(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function wA(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function hq(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return wA(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=xA(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Gr(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const pq=/[\u0590-\u08ac]/;function mq(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return a?!pq.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:wA(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:y}=t.domSelectionRange(),x=m&&!h.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==y;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),x}):r.pos==r.start()||r.pos==r.end()}let $C=null,FC=null,BC=!1;function gq(t,e,n){return $C==e&&FC==n?BC:($C=e,FC=n,BC=n=="up"||n=="down"?hq(t,e,n):mq(t,e,n))}const Kn=0,VC=1,Hs=2,Ir=3;class Bu{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Kn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Nt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof kA){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof bA&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Nt(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Nt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=Nt(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Nt(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let h=0,m=0;h<this.children.length;h++){let y=this.children[h],x=m+y.size;if(s>m&&o<x)return y.setSelection(e-m-y.border,n-m-y.border,r,i);m=x}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((mr||Qt)&&e==n){let{node:h,offset:m}=a;if(h.nodeType==3){if(d=!!(m&&h.nodeValue[m-1]==`
`),d&&m==h.nodeValue.length)for(let y=h,x;y;y=y.parentNode){if(x=y.nextSibling){x.nodeName=="BR"&&(a=l={node:x.parentNode,offset:Nt(x)+1});break}let v=y.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let y=h.childNodes[m-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(mr&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||d&&Qt)&&po(a.node,a.offset,u.anchorNode,u.anchorOffset)&&po(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==n)&&!d){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let m=a;a=l,l=m}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Hs:VC,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Ir:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Hs:Ir}r=o}this.dirty=Hs}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Hs:VC;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class bA extends Bu{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Kn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class yq extends Bu{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class mo extends Bu{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=No.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new mo(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Ir||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ir&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Kn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Kn}}slice(e,n,r){let i=mo.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=sv(s,n,o,r)),e>0&&(s=sv(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class is extends Bu{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=No.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=EA(u,r,n),c?l=new vq(e,n,r,i,u,d||null,f,c,s,o+1):n.isText?new um(e,n,r,i,u,f,s):new is(e,n,r,i,u,d||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>_.empty)}return e}matchesNode(e,n,r){return this.dirty==Kn&&e.eq(this.node)&&wh(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new wq(this,o&&o.node,e);Sq(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Pe.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,h,e)||l.updateNextNode(c,u,d,e,f,i)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Hs)&&(o&&this.protectLocalComposition(e,o),SA(this.contentDOM,this.children,e),Va&&Cq(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof oe)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=Eq(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new yq(this,s,n,i);e.input.compositionNodes.push(o),this.children=sv(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Ir||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Kn}updateOuterDeco(e){if(wh(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=CA(this.dom,this.nodeDOM,iv(this.outerDeco,this.node,n),iv(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function zC(t,e,n,r,i){EA(r,e,t);let s=new is(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class um extends is{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Ir||this.dirty!=Kn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Kn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Kn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new um(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ir)}get domAtom(){return!1}isText(e){return this.node.text==e}}class kA extends Bu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Kn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class vq extends is{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==Ir)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function SA(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=UC(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof mo){let l=r?r.previousSibling:t.lastChild;SA(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=UC(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const gc=function(t){t&&(this.nodeName=t)};gc.prototype=Object.create(null);const Ws=[new gc];function iv(t,e,n){if(t.length==0)return Ws;let r=n?Ws[0]:new gc,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new gc(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new gc(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function CA(t,e,n,r){if(n==Ws&&r==Ws)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Ws[0]),i=l}xq(i,a||Ws[0],o)}return i}function xq(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function EA(t,e,n){return CA(t,t,Ws,iv(e,n,t.nodeType!=1))}function wh(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function UC(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class wq{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=bq(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Kn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=mo.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Ir&&o.dom==o.contentDOM&&(o.dirty=Hs),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof is){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Ir&&wh(n,l.outerDeco));if(!f&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Hs,d.updateChildren(i,o+1),d.dirty=Kn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!wh(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=is.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=is.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new bA(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof mo;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof um)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Qt||zt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new kA(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function bq(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof mo)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function kq(t,e){return t.type.side-e.type.side}function Sq(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<i.length&&i[o].to==s;){let x=i[o++];x.widget&&(u?(d||(d=[u])).push(x):u=x)}if(u)if(d){d.sort(kq);for(let x=0;x<d.length;x++)n(d[x],c,!!l)}else n(u,c,!!l);let f,h;if(l)h=-1,f=l,l=null;else if(c<t.childCount)h=c,f=t.child(c++);else break;for(let x=0;x<a.length;x++)a[x].to<=s&&a.splice(x--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let m=s+f.nodeSize;if(f.isText){let x=m;o<i.length&&i[o].from<x&&(x=i[o].from);for(let v=0;v<a.length;v++)a[v].to<x&&(x=a[v].to);x<m&&(l=f.cut(x-s),f=f.cut(0,x-s),m=x,h=-1)}else for(;o<i.length&&i[o].to<m;)o++;let y=f.isInline&&!f.isLeaf?a.filter(x=>!x.inline):a.slice();r(f,y,e.forChild(s,f),h),s=m}}function Cq(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Eq(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function sv(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function Ww(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(cm(n)){for(l=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&re.isSelectable(d)&&i.parent&&!(d.isInline&&XG(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;c=new re(o==f?a:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,f=o;for(let h=0;h<n.rangeCount;h++){let m=n.getRangeAt(h);d=Math.min(d,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(d<0)return null;[l,o]=f==t.state.selection.anchor?[f,d]:[d,f],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=Kw(t,u,a,d)}return c}function TA(t){return t.editable?t.hasFocus():MA(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function ni(t,e=!1){let n=t.state.selection;if(NA(t,n),!!TA(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&zt){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&po(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Nq(t);else{let{anchor:r,head:i}=n,s,o;HC&&!(n instanceof oe)&&(n.$from.parent.inlineContent||(s=WC(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=WC(t,n.to))),t.docView.setSelection(r,i,t,e),HC&&(s&&KC(s),o&&KC(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Tq(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const HC=Qt||zt&&pA<63;function WC(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Qt&&i&&i.contentEditable=="false")return Bg(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Bg(i);if(s)return Bg(s)}}function Bg(t){return t.contentEditable="true",Qt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function KC(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Tq(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!TA(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Nq(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Nt(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&gn&&rs<=11&&(r.disabled=!0,r.disabled=!1)}function NA(t,e){if(e instanceof re){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(GC(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else GC(t)}function GC(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Kw(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||oe.between(e,n,r)}function qC(t){return t.editable&&!t.hasFocus()?!1:MA(t)}function MA(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Mq(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return po(e.node,e.offset,n.anchorNode,n.anchorOffset)}function ov(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&le.findFrom(s,e)}function Pi(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function JC(t,e,n){let r=t.state.selection;if(r instanceof oe)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Pi(t,new oe(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=ov(t.state,e);return i&&i instanceof re?Pi(t,i):!1}else if(!(Ln&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?re.isSelectable(s)?Pi(t,new re(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Fu?Pi(t,new oe(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof re&&r.node.isInline)return Pi(t,new oe(e>0?r.$to:r.$from));{let i=ov(t.state,e);return i?Pi(t,i):!1}}}function bh(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function yc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Io(t,e){return e<0?Pq(t):Oq(t)}function Pq(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(mr&&n.nodeType==1&&r<bh(n)&&yc(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(yc(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(PA(n))break;{let a=n.previousSibling;for(;a&&yc(a,-1);)i=n.parentNode,s=Nt(a),a=a.previousSibling;if(a)n=a,r=bh(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?av(t,n,r):i&&av(t,i,s)}function Oq(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=bh(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(yc(a,1))s=n,o=++r;else break}else{if(PA(n))break;{let a=n.nextSibling;for(;a&&yc(a,1);)s=a.parentNode,o=Nt(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=bh(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&av(t,s,o)}function PA(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function jq(t,e){for(;t&&e==t.childNodes.length&&!$u(t);)e=Nt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function Aq(t,e){for(;t&&!e&&!$u(t);)e=Nt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function av(t,e,n){if(e.nodeType!=3){let s,o;(o=jq(e,n))?(e=o,n=0):(s=Aq(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(cm(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&ni(t)},50)}function YC(t,e){let n=t.state.doc.resolve(e);if(!(zt||eq)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function XC(t,e,n){let r=t.state.selection;if(r instanceof oe&&!r.empty||n.indexOf("s")>-1||Ln&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=ov(t.state,e);if(o&&o instanceof re)return Pi(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof Wn?le.near(o,e):le.findFrom(o,e);return a?Pi(t,a):!1}return!1}function QC(t,e){if(!(t.state.selection instanceof oe))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function ZC(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Dq(t){if(!Qt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;ZC(t,r,"true"),setTimeout(()=>ZC(t,r,"false"),20)}return!1}function Rq(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function _q(t,e){let n=e.keyCode,r=Rq(e);if(n==8||Ln&&n==72&&r=="c")return QC(t,-1)||Io(t,-1);if(n==46&&!e.shiftKey||Ln&&n==68&&r=="c")return QC(t,1)||Io(t,1);if(n==13||n==27)return!0;if(n==37||Ln&&n==66&&r=="c"){let i=n==37?YC(t,t.state.selection.from)=="ltr"?-1:1:-1;return JC(t,i,r)||Io(t,i)}else if(n==39||Ln&&n==70&&r=="c"){let i=n==39?YC(t,t.state.selection.from)=="ltr"?1:-1:1;return JC(t,i,r)||Io(t,i)}else{if(n==38||Ln&&n==80&&r=="c")return XC(t,-1,r)||Io(t,-1);if(n==40||Ln&&n==78&&r=="c")return Dq(t)||XC(t,1,r)||Io(t,1);if(r==(Ln?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Gw(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||No.fromSchema(t.state.schema),a=_A(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=RA[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let m=a.createElement(u[h]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function OA(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||r,t)}),s)return e?new W(_.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):W.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)a=d;else{let f=i.marks(),{schema:h}=t.state,m=No.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let x=o.appendChild(document.createElement("p"));y&&x.appendChild(m.serializeNode(h.text(y,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=Fq(n),Fu&&Bq(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||ns.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!Iq.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=Vq(eE(a,+u[1],+u[2]),u[4]);else if(a=W.maxOpen(Lq(a.content,i),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=eE(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const Iq=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Lq(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&AA(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=DA(o[o.length-1],s.length));let u=jA(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return _.from(o)}return t}function jA(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,_.from(t));return t}function AA(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=AA(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(_.from(jA(n,t,i+1))))}}function DA(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,DA(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(_.empty,!0);return t.copy(n.append(r))}function lv(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=lv(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(_.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function eE(t,e,n){return e<t.openStart&&(t=new W(lv(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new W(lv(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const RA={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let tE=null;function _A(){return tE||(tE=document.implementation.createHTMLDocument("title"))}let Vg=null;function $q(t){let e=window.trustedTypes;return e?(Vg||(Vg=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Vg.createHTML(t)):t}function Fq(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=_A().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&RA[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=$q(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function Bq(t){let e=t.querySelectorAll(zt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Vq(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=_.from(l.create(r[a+1],i)),s++,o++}return new W(i,s,o)}const Zt={},en={},zq={touchstart:!0,touchmove:!0};class Uq{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Hq(t){for(let e in Zt){let n=Zt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Kq(t,r)&&!qw(t,r)&&(t.editable||!(r.type in en))&&n(t,r)},zq[e]?{passive:!0}:void 0)}Qt&&t.dom.addEventListener("input",()=>null),cv(t)}function Wi(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Wq(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function cv(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>qw(t,r))})}function qw(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Kq(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Gq(t,e){!qw(t,e)&&Zt[e.type]&&(t.editable||!(e.type in en))&&Zt[e.type](t,e)}en.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!LA(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Xr&&zt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Va&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,_s(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||_q(t,n)?n.preventDefault():Wi(t,"key")};en.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};en.keypress=(t,e)=>{let n=e;if(LA(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ln&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof oe)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function dm(t){return{left:t.clientX,top:t.clientY}}function qq(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Jw(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function va(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Jq(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&re.isSelectable(r)?(va(t,new re(n)),!0):!1}function Yq(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof re&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(re.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(va(t,re.create(t.state.doc,i)),!0):!1}function Xq(t,e,n,r,i){return Jw(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?Yq(t,n):Jq(t,n))}function Qq(t,e,n,r){return Jw(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function Zq(t,e,n,r){return Jw(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||eJ(t,n,r)}function eJ(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(va(t,oe.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)va(t,oe.create(r,a+1,a+1+o.content.size));else if(re.isSelectable(o))va(t,re.create(r,a));else continue;return!0}}function Yw(t){return kh(t)}const IA=Ln?"metaKey":"ctrlKey";Zt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Yw(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&qq(n,t.input.lastClick)&&!n[IA]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(dm(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new tJ(t,o,n,!!r)):(s=="doubleClick"?Qq:Zq)(t,o.pos,o.inside,n)?n.preventDefault():Wi(t,"pointer"))};class tJ{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[IA],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof re&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&mr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Wi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ni(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(dm(e))),this.updateAllowDefault(e),this.allowDefault||!n?Wi(this.view,"pointer"):Xq(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Qt&&this.mightDrag&&!this.mightDrag.node.isAtom||zt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(va(this.view,le.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Wi(this.view,"pointer")}move(e){this.updateAllowDefault(e),Wi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Zt.touchstart=t=>{t.input.lastTouch=Date.now(),Yw(t),Wi(t,"pointer")};Zt.touchmove=t=>{t.input.lastTouch=Date.now(),Wi(t,"pointer")};Zt.contextmenu=t=>Yw(t);function LA(t,e){return t.composing?!0:Qt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const nJ=Xr?5e3:-1;en.compositionstart=en.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof oe&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),kh(t,!0),t.markCursor=null;else if(kh(t,!e.selection.empty),mr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}$A(t,nJ)};en.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,$A(t,20))};function $A(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>kh(t),e))}function FA(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=iJ());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function rJ(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=JG(e.focusNode,e.focusOffset),r=YG(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function iJ(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function kh(t,e=!1){if(!(Xr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),FA(t),e||t.docView&&t.docView.dirty){let n=Ww(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function sJ(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const ou=gn&&rs<15||Va&&tq<604;Zt.copy=en.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=ou?null:n.clipboardData,o=r.content(),{dom:a,text:l}=Gw(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):sJ(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function oJ(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function aJ(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?au(t,r.value,null,i,e):au(t,r.textContent,r.innerHTML,i,e)},50)}function au(t,e,n,r,i){let s=OA(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||W.empty)))return!0;if(!s)return!1;let o=oJ(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function BA(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}en.paste=(t,e)=>{let n=e;if(t.composing&&!Xr)return;let r=ou?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&au(t,BA(r),r.getData("text/html"),i,n)?n.preventDefault():aJ(t,n)};class VA{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const zA=Ln?"altKey":"ctrlKey";Zt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(dm(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof re?i.to-1:i.to))){if(r&&r.mightDrag)o=re.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=re.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:u}=Gw(t,a);(!n.dataTransfer.files.length||!zt||pA>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(ou?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",ou||n.dataTransfer.setData("text/plain",c),t.dragging=new VA(u,!n[zA],o)};Zt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};en.dragover=en.dragenter=(t,e)=>e.preventDefault();en.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(dm(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",m=>{o=m(o,t)}):o=OA(t,BA(n.dataTransfer),ou?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[zA]);if(t.someProp("handleDrop",m=>m(t,n,o||W.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?sA(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:m}=r;m?m.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&re.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new re(h));else{let m=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((y,x,v,w)=>m=w),c.setSelection(Kw(t,h,c.doc.resolve(m)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Zt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&ni(t)},20))};Zt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Zt.beforeinput=(t,e)=>{if(zt&&Xr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,_s(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in en)Zt[t]=en[t];function lu(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Sh{constructor(e,n){this.toDOM=e,this.spec=n||eo,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Un(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Sh&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&lu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ss{constructor(e,n){this.attrs=e,this.spec=n||eo}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Un(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof ss&&lu(this.attrs,e.attrs)&&lu(this.spec,e.spec)}static is(e){return e.type instanceof ss}destroy(){}}class Xw{constructor(e,n){this.attrs=e,this.spec=n||eo}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Un(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof Xw&&lu(this.attrs,e.attrs)&&lu(this.spec,e.spec)}destroy(){}}class Un{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Un(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Un(e,e,new Sh(n,r))}static inline(e,n,r,i){return new Un(e,n,new ss(r,i))}static node(e,n,r,i){return new Un(e,n,new Xw(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ss}get widget(){return this.type instanceof Sh}}const $o=[],eo={};class lt{constructor(e,n){this.local=e.length?e:$o,this.children=n.length?n:$o}static create(e,n){return n.length?Ch(n,e,0,eo):Lt}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==Lt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||eo)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?lJ(this.children,o||[],e,n,r,i,s):o?new lt(o.sort(to),$o):Lt}add(e,n){return n.length?this==Lt?lt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=HA(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,Ch(u,a,c+1,eo)),s+=3}});let o=UA(s?WA(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new lt(o.length?this.local.concat(o).sort(to):this.local,i||this.children)}remove(e){return e.length==0||this==Lt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Lt?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new lt(i,r):Lt}forChild(e,n){if(this==Lt)return this;if(n.isLeaf)return lt.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof ss){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new lt(i.sort(to),$o);return r?new Li([a,r]):a}return r||Lt}eq(e){if(this==e)return!0;if(!(e instanceof lt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Qw(this.localsInner(e))}localsInner(e){if(this==Lt)return $o;if(e.inlineContent||!this.local.some(ss.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ss||n.push(this.local[r]);return n}forEachSet(e){e(this)}}lt.empty=new lt([],[]);lt.removeOverlap=Qw;const Lt=lt.empty;class Li{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,eo));return Li.from(r)}forChild(e,n){if(n.isLeaf)return lt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Lt&&(s instanceof Li?r=r.concat(s.members):r.push(s))}return Li.from(r)}eq(e){if(!(e instanceof Li)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?Qw(r?n:n.sort(to)):$o}static from(e){switch(e.length){case 0:return Lt;case 1:return e[0];default:return new Li(e.every(n=>n instanceof lt)?e:e.reduce((n,r)=>n.concat(r instanceof lt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function lJ(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,h,m,y)=>{let x=y-m-(h-f);for(let v=0;v<a.length;v+=3){let w=a[v+1];if(w<0||f>w+u-d)continue;let b=a[v]+u-d;h>=b?a[v+1]=f<=b?-2:-1:f>=u&&x&&(a[v]+=x,a[v+1]+=x)}d+=x}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+s,-1),h=f-i,{index:m,offset:y}=r.content.findIndex(d),x=r.maybeChild(m);if(x&&y==d&&y+x.nodeSize==h){let v=a[c+2].mapInner(n,x,u+1,t[c]+s+1,o);v!=Lt?(a[c]=d,a[c+1]=h,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=cJ(a,t,e,n,i,s,o),u=Ch(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new lt(e.sort(to),a)}function UA(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Un(i.from+e,i.to+e,i.type))}return n}function cJ(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function HA(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function WA(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Ch(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=HA(t,a,l+n);if(c){s=!0;let u=Ch(c,a,n+l+1,r);u!=Lt&&i.push(l,l+a.nodeSize,u)}});let o=UA(s?WA(t):t,-n).sort(to);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new lt(o,i):Lt}function to(t,e){return t.from-e.from||t.to-e.to}function Qw(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),nE(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),nE(e,i,r.copy(s.from,r.to)));break}}}return e}function nE(t,e,n){for(;e<t.length&&to(n,t[e])>0;)e++;t.splice(e,0,n)}function zg(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Lt&&e.push(r)}),t.cursorWrapper&&e.push(lt.create(t.state.doc,[t.cursorWrapper.deco])),Li.from(e)}const uJ={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},dJ=gn&&rs<=11;class fJ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class hJ{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new fJ,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);gn&&rs<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),dJ&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,uJ)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(qC(this.view)){if(this.suppressingSelectionUpdates)return ni(this.view);if(gn&&rs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&po(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=su(s))n.add(s);for(let s=e.anchorNode;s;s=su(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&qC(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(mr&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||gJ(e,d)!=h)&&f.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&cm(r)&&(c=Ww(e))&&c.eq(le.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ni(e),this.currentSelection.set(r)):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),pJ(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ni(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(gn&&rs<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?Nt(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Nt(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let rE=new WeakMap,iE=!1;function pJ(t){if(!rE.has(t)&&(rE.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=mr,iE)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),iE=!0}}function sE(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return po(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function mJ(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return sE(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?sE(t,n):null}function gJ(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function yJ(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],cm(l)||c.push({node:l.focusNode,offset:l.focusOffset})),zt&&t.input.lastKeyCode===8)for(let x=s;x>i;x--){let v=r.childNodes[x-1],w=v.pmViewDesc;if(v.nodeName=="BR"&&!w){s=x;break}if(!w||w.size)break}let d=t.state.doc,f=t.someProp("domParser")||ns.fromSchema(t.state.schema),h=d.resolve(o),m=null,y=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:vJ,context:h});if(c&&c[0].pos!=null){let x=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=x),m={anchor:x+o,head:v+o}}return{doc:y,sel:m,from:o,to:a}}function vJ(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Qt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Qt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const xJ=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function wJ(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let P=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,N=Ww(t,P);if(N&&!t.state.selection.eq(N)){if(zt&&Xr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",A=>A(t,_s(13,"Enter"))))return;let M=t.state.tr.setSelection(N);P=="pointer"?M.setMeta("pointer",!0):P=="key"&&M.scrollIntoView(),s&&M.setMeta("composition",s),t.dispatch(M)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=yJ(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let m=SJ(d.content,c.doc.content,c.from,f,h);if(m&&t.input.domChangeCount++,(Va&&t.input.lastIOSEnter>Date.now()-225||Xr)&&i.some(P=>P.nodeType==1&&!xJ.test(P.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",P=>P(t,_s(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof oe&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let P=oE(t,t.state.doc,c.sel);if(P&&!P.eq(t.state.selection)){let N=t.state.tr.setSelection(P);s&&N.setMeta("composition",s),t.dispatch(N)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof oe&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),gn&&rs<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)=="  "&&(m.start--,m.endA--,m.endB--);let y=c.doc.resolveNoCache(m.start-c.from),x=c.doc.resolveNoCache(m.endB-c.from),v=u.resolve(m.start),w=y.sameParent(x)&&y.parent.inlineContent&&v.end()>=m.endA,b;if((Va&&t.input.lastIOSEnter>Date.now()-225&&(!w||i.some(P=>P.nodeName=="DIV"||P.nodeName=="P"))||!w&&y.pos<c.doc.content.size&&!y.sameParent(x)&&(b=le.findFrom(c.doc.resolve(y.pos+1),1,!0))&&b.head==x.pos)&&t.someProp("handleKeyDown",P=>P(t,_s(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&kJ(u,m.start,m.endA,y,x)&&t.someProp("handleKeyDown",P=>P(t,_s(8,"Backspace")))){Xr&&zt&&t.domObserver.suppressSelectionUpdates();return}zt&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),Xr&&!w&&y.start()!=x.start()&&x.parentOffset==0&&y.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,x=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(P){return P(t,_s(13,"Enter"))})},20));let k=m.start,S=m.endA,C,E,T;if(w){if(y.pos==x.pos)gn&&rs<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>ni(t),20)),C=t.state.tr.delete(k,S),E=u.resolve(m.start).marksAcross(u.resolve(m.endA));else if(m.endA==m.endB&&(T=bJ(y.parent.content.cut(y.parentOffset,x.parentOffset),v.parent.content.cut(v.parentOffset,m.endA-v.start()))))C=t.state.tr,T.type=="add"?C.addMark(k,S,T.mark):C.removeMark(k,S,T.mark);else if(y.parent.child(y.index()).isText&&y.index()==x.index()-(x.textOffset?0:1)){let P=y.parent.textBetween(y.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",N=>N(t,k,S,P)))return;C=t.state.tr.insertText(P,k,S)}}if(C||(C=t.state.tr.replace(k,S,c.doc.slice(m.start-c.from,m.endB-c.from))),c.sel){let P=oE(t,C.doc,c.sel);P&&!(zt&&t.composing&&P.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(P.head==k||P.head==C.mapping.map(S)-1)||gn&&P.empty&&P.head==k)&&C.setSelection(P)}E&&C.ensureMarks(E),s&&C.setMeta("composition",s),t.dispatch(C.scrollIntoView())}function oE(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Kw(t,e.resolve(n.anchor),e.resolve(n.head))}function bJ(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(_.from(c).eq(t))return{mark:a,type:o}}function kJ(t,e,n,r,i){if(n-e<=i.pos-r.pos||Ug(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Ug(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Ug(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Ug(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function SJ(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&aE(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&aE(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function aE(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class CJ{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Uq,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(fE),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=uE(this),cE(this),this.nodeViews=dE(this),this.docView=zC(this.state.doc,lE(this),zg(this),this.dom,this),this.domObserver=new hJ(this,(r,i,s,o)=>wJ(this,r,i,s,o)),this.domObserver.start(),Hq(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&cv(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(fE),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(FA(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=dE(this);TJ(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&cv(this),this.editable=uE(this),cE(this);let l=zg(this),c=lE(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(i.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&iq(this);if(o){this.domObserver.stop();let h=d&&(gn||zt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&EJ(i.selection,e.selection);if(d){let m=zt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=rJ(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=zC(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Mq(this))?ni(this,h):(NA(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&sq(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof re){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&IC(this,n.getBoundingClientRect(),e)}else IC(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new VA(e.slice,e.move,i<0?void 0:re.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(gn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&oq(this.dom),ni(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return dq(this,e)}coordsAtPos(e,n=1){return xA(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return gq(this,n||this.state,e)}pasteHTML(e,n){return au(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return au(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Gw(this,e)}destroy(){this.docView&&(Wq(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],zg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,GG())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Gq(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Qt&&this.root.nodeType===11&&QG(this.dom.ownerDocument)==this.dom&&mJ(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function lE(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Un.node(0,t.state.doc.content.size,e)]}function cE(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Un.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function uE(t){return!t.someProp("editable",e=>e(t.state)===!1)}function EJ(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function dE(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function TJ(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function fE(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ps={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Eh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},NJ=typeof navigator<"u"&&/Mac/.test(navigator.platform),MJ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Mt=0;Mt<10;Mt++)ps[48+Mt]=ps[96+Mt]=String(Mt);for(var Mt=1;Mt<=24;Mt++)ps[Mt+111]="F"+Mt;for(var Mt=65;Mt<=90;Mt++)ps[Mt]=String.fromCharCode(Mt+32),Eh[Mt]=String.fromCharCode(Mt);for(var Hg in ps)Eh.hasOwnProperty(Hg)||(Eh[Hg]=ps[Hg]);function PJ(t){var e=NJ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||MJ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Eh:ps)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const OJ=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function jJ(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))OJ?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function AJ(t){let e=Object.create(null);for(let n in t)e[jJ(n)]=t[n];return e}function Wg(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function DJ(t){return new At({props:{handleKeyDown:KA(t)}})}function KA(t){let e=AJ(t);return function(n,r){let i=PJ(r),s,o=e[Wg(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Wg(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=ps[r.keyCode])&&s!=i){let a=e[Wg(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const RJ=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function GA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const _J=(t,e,n)=>{let r=GA(t,n);if(!r)return!1;let i=Zw(r);if(!i){let o=r.blockRange(),a=o&&cl(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(XA(t,i,e,-1))return!0;if(r.parent.content.size==0&&(za(s,"end")||re.isSelectable(s)))for(let o=r.depth;;o--){let a=am(t.doc,r.before(o),r.after(o),W.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(za(s,"end")?le.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):re.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},IJ=(t,e,n)=>{let r=GA(t,n);if(!r)return!1;let i=Zw(r);return i?qA(t,i,e):!1},LJ=(t,e,n)=>{let r=JA(t,n);if(!r)return!1;let i=e1(r);return i?qA(t,i,e):!1};function qA(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=am(t.doc,s,l,W.empty);if(!c||c.from!=s||c instanceof mt&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(oe.create(u.doc,s)),n(u.scrollIntoView())}return!0}function za(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const $J=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=Zw(r)}let o=s&&s.nodeBefore;return!o||!re.isSelectable(o)?!1:(e&&e(t.tr.setSelection(re.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Zw(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function JA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const FJ=(t,e,n)=>{let r=JA(t,n);if(!r)return!1;let i=e1(r);if(!i)return!1;let s=i.nodeAfter;if(XA(t,i,e,1))return!0;if(r.parent.content.size==0&&(za(s,"start")||re.isSelectable(s))){let o=am(t.doc,r.before(),r.after(),W.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(za(s,"start")?le.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):re.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},BJ=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=e1(r)}let o=s&&s.nodeAfter;return!o||!re.isSelectable(o)?!1:(e&&e(t.tr.setSelection(re.create(t.doc,s.pos)).scrollIntoView()),!0)};function e1(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const VJ=(t,e)=>{let n=t.selection,r=n instanceof re,i;if(r){if(n.node.isTextblock||!bs(t.doc,n.from))return!1;i=n.from}else if(i=om(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(re.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},zJ=(t,e)=>{let n=t.selection,r;if(n instanceof re){if(n.node.isTextblock||!bs(t.doc,n.to))return!1;r=n.to}else if(r=om(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},UJ=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&cl(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},HJ=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function YA(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const WJ=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=YA(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(le.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},KJ=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Wn||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=YA(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(oe.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},GJ=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(ga(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&cl(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},qJ=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(re.create(t.doc,i))),!0)};function JJ(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||bs(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function XA(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&JJ(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let h=e.pos+s.nodeSize,m=_.empty;for(let v=o.length-1;v>=0;v--)m=_.from(o[v].create(null,m));m=_.from(i.copy(m));let y=t.tr.step(new vt(e.pos-1,h,e.pos,h,new W(m,1,0),o.length,!0)),x=y.doc.resolve(h+2*o.length);x.nodeAfter&&x.nodeAfter.type==i.type&&bs(y.doc,x.pos)&&y.join(x.pos),n(y.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:le.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&cl(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(c&&za(s,"start",!0)&&za(i,"end")){let h=i,m=[];for(;m.push(h),!h.isTextblock;)h=h.lastChild;let y=s,x=1;for(;!y.isTextblock;y=y.firstChild)x++;if(h.canReplace(h.childCount,h.childCount,y.content)){if(n){let v=_.empty;for(let b=m.length-1;b>=0;b--)v=_.from(m[b].copy(v));let w=t.tr.step(new vt(e.pos-m.length,e.pos+s.nodeSize,e.pos+x,e.pos+s.nodeSize-x,new W(v,m.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function QA(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(oe.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const YJ=QA(-1),XJ=QA(1);function QJ(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&zw(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function hE(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function ZJ(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return eY(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function eY(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new vh(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new vh(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=zw(s,n,r,e);return a?(t&&tY(t,e,a,i,n),!0):!1}function tY(t,e,n,r,i){let s=_.empty;for(let u=n.length-1;u>=0;u--)s=_.from(n[u].type.create(n[u].attrs,s));t.step(new vt(e.start-(r?2:0),e.end,e.start,e.end,new W(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&ga(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function nY(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?rY(e,n,t,s):iY(e,n,s):!0:!1}}function rY(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new vt(s-1,o,s,o,new W(_.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new vh(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=cl(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return bs(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function iY(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,m=n.endIndex-1,y=n.startIndex;m>y;m--)h-=i.child(m).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?_.empty:_.from(i))))return!1;let d=s.pos,f=d+o.nodeSize;return r.step(new vt(d-(a?1:0),f+(l?1:0),d+1,f-1,new W((a?_.empty:_.from(i.copy(_.empty))).append(l?_.empty:_.from(i.copy(_.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function sY(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=_.from(c?t.create():null),d=new W(_.from(t.create(null,_.from(a.type.create(null,u)))),c?3:1,0),f=s.start,h=s.end;n(e.tr.step(new vt(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function fm(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class hm{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...y)=>{const x=this.buildProps(c,n),v=h(...y)(x);return a.push(v),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:fm({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class oY{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Q(t,e,n){return t.config[e]===void 0&&t.parent?Q(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Q(t.parent,e,n):null}):t.config[e]}function pm(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function ZA(t){const e=[],{nodeExtensions:n,markExtensions:r}=pm(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=Q(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...s,...h}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Q(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...s,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:u,attribute:f})})}),e}function wt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function bt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),a.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=s}),r},{})}function uv(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>bt(n,r),{})}function eD(t){return typeof t=="function"}function de(t,e=void 0,...n){return eD(t)?e?t.bind(e)(...n):t(...n):t}function aY(t={}){return Object.keys(t).length===0&&t.constructor===Object}function lY(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function pE(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):lY(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function mE(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&aY(n)?!1:n!=null))}function cY(t,e){var n;const r=ZA(t),{nodeExtensions:i,markExtensions:s}=pm(t),o=(n=i.find(c=>Q(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,w)=>{const b=Q(w,"extendNodeSchema",d);return{...v,...b?b(c):{}}},{}),h=mE({...f,content:de(Q(c,"content",d)),marks:de(Q(c,"marks",d)),group:de(Q(c,"group",d)),inline:de(Q(c,"inline",d)),atom:de(Q(c,"atom",d)),selectable:de(Q(c,"selectable",d)),draggable:de(Q(c,"draggable",d)),code:de(Q(c,"code",d)),whitespace:de(Q(c,"whitespace",d)),linebreakReplacement:de(Q(c,"linebreakReplacement",d)),defining:de(Q(c,"defining",d)),isolating:de(Q(c,"isolating",d)),attrs:Object.fromEntries(u.map(v=>{var w;return[v.name,{default:(w=v==null?void 0:v.attribute)===null||w===void 0?void 0:w.default}]}))}),m=de(Q(c,"parseHTML",d));m&&(h.parseDOM=m.map(v=>pE(v,u)));const y=Q(c,"renderHTML",d);y&&(h.toDOM=v=>y({node:v,HTMLAttributes:uv(v,u)}));const x=Q(c,"renderText",d);return x&&(h.toText=x),[c.name,h]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(x=>x.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((x,v)=>{const w=Q(v,"extendMarkSchema",d);return{...x,...w?w(c):{}}},{}),h=mE({...f,inclusive:de(Q(c,"inclusive",d)),excludes:de(Q(c,"excludes",d)),group:de(Q(c,"group",d)),spanning:de(Q(c,"spanning",d)),code:de(Q(c,"code",d)),attrs:Object.fromEntries(u.map(x=>{var v;return[x.name,{default:(v=x==null?void 0:x.attribute)===null||v===void 0?void 0:v.default}]}))}),m=de(Q(c,"parseHTML",d));m&&(h.parseDOM=m.map(x=>pE(x,u)));const y=Q(c,"renderHTML",d);return y&&(h.toDOM=x=>y({mark:x,HTMLAttributes:uv(x,u)})),[c.name,h]}));return new qj({topNode:o,nodes:a,marks:l})}function Kg(t,e){return e.nodes[t]||e.marks[t]||null}function gE(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function t1(t,e){const n=No.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const uY=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-s))}),n};function n1(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class mm{constructor(e){this.find=e.find,this.handler=e.handler}}const dY=(t,e)=>{if(n1(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Pd(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=uY(c)+s;return o.forEach(f=>{if(u)return;const h=dY(d,f.find);if(!h)return;const m=l.state.tr,y=fm({state:l.state,transaction:m}),x={from:r-(h[0].length-s.length),to:i},{commands:v,chain:w,can:b}=new hm({editor:n,state:y});f.handler({state:y,range:x,match:h,commands:v,chain:w,can:b})===null||!m.steps.length||(m.setMeta(a,{transform:m,from:r,to:i,text:s}),l.dispatch(m),u=!0)}),u}function fY(t){const{editor:e,rules:n}=t,r=new At({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=t1(_.from(u),o.schema);const{from:d}=l,f=d+u.length;Pd({editor:e,from:d,to:f,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return Pd({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Pd({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Pd({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function hY(t){return Object.prototype.toString.call(t).slice(8,-1)}function Od(t){return hY(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function gm(t,e){const n={...t};return Od(t)&&Od(e)&&Object.keys(e).forEach(r=>{Od(e[r])&&Od(t[r])?n[r]=gm(t[r],e[r]):n[r]=e[r]}),n}class Lr{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=de(Q(this,"addOptions",{name:this.name}))),this.storage=de(Q(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Lr(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>gm(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Lr(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=de(Q(n,"addOptions",{name:n.name})),n.storage=de(Q(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function pY(t){return typeof t=="number"}class mY{constructor(e){this.find=e.find,this.handler=e.handler}}const gY=(t,e,n)=>{if(n1(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function yY(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new hm({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(h,m)=>{if(!h.isTextblock||h.type.spec.code)return;const y=Math.max(r,m),x=Math.min(i,m+h.content.size),v=h.textBetween(y-m,x-m,void 0,"￼");gY(v,s.find,o).forEach(b=>{if(b.index===void 0)return;const k=y+b.index+1,S=k+b[0].length,C={from:n.tr.mapping.map(k),to:n.tr.mapping.map(S)},E=s.handler({state:n,range:C,match:b,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(E)})}),d.every(h=>h!==null)}let jd=null;const vY=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function xY(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:f,rule:h,pasteEvt:m})=>{const y=u.tr,x=fm({state:u,transaction:y});if(!(!yY({editor:e,state:x,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:m,dropEvent:a})||!y.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return n.map(u=>new At({view(d){const f=m=>{var y;r=!((y=d.dom.parentElement)===null||y===void 0)&&y.contains(m.target)?d.dom.parentElement:null,r&&(jd=e)},h=()=>{jd&&(jd=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(s=r===d.dom.parentElement,a=f,!s){const h=jd;h&&setTimeout(()=>{const m=h.state.selection;m&&h.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(d,f)=>{var h;const m=(h=f.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return o=f,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,h)=>{const m=d[0],y=m.getMeta("uiEvent")==="paste"&&!i,x=m.getMeta("uiEvent")==="drop"&&!s,v=m.getMeta("applyPasteRules"),w=!!v;if(!y&&!x&&!w)return;if(w){let{text:S}=v;typeof S=="string"?S=S:S=t1(_.from(S),h.schema);const{from:C}=v,E=C+S.length,T=vY(S);return l({rule:u,state:h,from:C,to:{b:E},pasteEvt:T})}const b=f.doc.content.findDiffStart(h.doc.content),k=f.doc.content.findDiffEnd(h.doc.content);if(!(!pY(b)||!k||b===k.b))return l({rule:u,state:h,from:b,to:k,pasteEvt:o})}}))}function wY(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class ia{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=ia.resolve(e),this.schema=cY(this.extensions,n),this.setupExtensions()}static resolve(e){const n=ia.sort(ia.flatten(e)),r=wY(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=Q(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=Q(r,"priority")||100,o=Q(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Kg(n.name,this.schema)},i=Q(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=ia.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:Kg(o.name,this.schema)},l=[],c=Q(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&Q(o,"exitable",a)&&(u.ArrowRight=()=>Lr.handleExit({editor:e,mark:o})),c){const y=Object.fromEntries(Object.entries(c()).map(([x,v])=>[x,()=>v({editor:e})]));u={...u,...y}}const d=DJ(u);l.push(d);const f=Q(o,"addInputRules",a);gE(o,e.options.enableInputRules)&&f&&r.push(...f());const h=Q(o,"addPasteRules",a);gE(o,e.options.enablePasteRules)&&h&&i.push(...h());const m=Q(o,"addProseMirrorPlugins",a);if(m){const y=m();l.push(...y)}return l}).flat();return[fY({editor:e,rules:r}),...xY({editor:e,rules:i}),...s]}get attributes(){return ZA(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=pm(this.extensions);return Object.fromEntries(n.filter(r=>!!Q(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:wt(r.name,this.schema)},o=Q(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,d,f)=>{const h=uv(l,i);return o()({node:l,view:c,getPos:u,decorations:d,innerDecorations:f,editor:e,extension:r,HTMLAttributes:h})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Kg(e.name,this.schema)};e.type==="mark"&&(!((n=de(Q(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=Q(e,"onBeforeCreate",r),s=Q(e,"onCreate",r),o=Q(e,"onUpdate",r),a=Q(e,"onSelectionUpdate",r),l=Q(e,"onTransaction",r),c=Q(e,"onFocus",r),u=Q(e,"onBlur",r),d=Q(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class tn{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=de(Q(this,"addOptions",{name:this.name}))),this.storage=de(Q(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new tn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>gm(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new tn({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=de(Q(n,"addOptions",{name:n.name})),n.storage=de(Q(n,"addStorage",{name:n.name,options:n.options})),n}}function tD(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,i,(l,c,u,d)=>{var f;l.isBlock&&c>r&&(a+=s);const h=o==null?void 0:o[l.type.name];if(h)return u&&(a+=h({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)===null||f===void 0?void 0:f.slice(Math.max(r,c)-c,i-c))}),a}function nD(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const bY=tn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new At({key:new On("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=nD(n);return tD(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),kY=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),SY=(t=!1)=>({commands:e})=>e.setContent("",t),CY=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const m=cl(h);if(a.type.isTextblock){const{defaultType:y}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,y)}(m||m===0)&&e.lift(h,m)})}),!0},EY=t=>e=>t(e),TY=()=>({state:t,dispatch:e})=>KJ(t,e),NY=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new oe(r.doc.resolve(o-1))),!0},MY=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},PY=t=>({tr:e,state:n,dispatch:r})=>{const i=wt(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},OY=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},jY=()=>({state:t,dispatch:e})=>RJ(t,e),AY=()=>({commands:t})=>t.keyboardShortcut("Enter"),DY=()=>({state:t,dispatch:e})=>WJ(t,e);function Th(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:n1(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function rD(t,e,n={}){return t.find(r=>r.type===e&&Th(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function yE(t,e,n={}){return!!rD(t,e,n)}function r1(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!rD([...i.node.marks],e,n)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&yE([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&yE([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Ss(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const RY=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=Ss(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const d=r1(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=oe.create(o,d.from,d.to);n.setSelection(f)}}return!0},_Y=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function iD(t){return t instanceof oe}function Ks(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function sD(t,e=null){if(!e)return null;const n=le.atStart(t),r=le.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?oe.create(t,Ks(0,i,s),Ks(t.content.size,i,s)):oe.create(t,Ks(e,i,s),Ks(e,i,s))}function IY(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function i1(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const LY=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(i1()||IY())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!iD(n.state.selection))return o(),!0;const a=sD(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},$Y=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),FY=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),oD=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&oD(r)}return t};function Ad(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return oD(n)}function Nh(t,e,n){if(t instanceof ts||t instanceof _)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return _.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Nh("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const l=new qj({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?ns.fromSchema(l).parseSlice(Ad(t),n.parseOptions):ns.fromSchema(l).parse(Ad(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=ns.fromSchema(e);return n.slice?s.parseSlice(Ad(t),n.parseOptions).content:s.parse(Ad(t),n.parseOptions)}return Nh("",e,n)}function BY(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof mt||i instanceof vt))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(le.near(t.doc.resolve(o),n))}const VY=t=>!("type"in t),zY=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=Nh(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(m){return s.emit("contentError",{editor:s,error:m,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((VY(a)?a:[a]).forEach(m=>{m.check(),u=u?m.isText&&m.marks.length===0:!1,d=d?m.isBlock:!1}),l===c&&d){const{parent:m}=r.doc.resolve(l);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(l-=1,c+=1)}let h;if(u){if(Array.isArray(e))h=e.map(m=>m.text||"").join("");else if(e instanceof _){let m="";e.forEach(y=>{y.text&&(m+=y.text)}),h=m}else typeof e=="object"&&e&&e.text?h=e.text:h=e;r.insertText(h,l,c)}else h=a,r.replaceWith(l,c,h);n.updateSelection&&BY(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:h}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:h})}return!0},UY=()=>({state:t,dispatch:e})=>VJ(t,e),HY=()=>({state:t,dispatch:e})=>zJ(t,e),WY=()=>({state:t,dispatch:e})=>_J(t,e),KY=()=>({state:t,dispatch:e})=>FJ(t,e),GY=()=>({state:t,dispatch:e,tr:n})=>{try{const r=om(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},qY=()=>({state:t,dispatch:e,tr:n})=>{try{const r=om(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},JY=()=>({state:t,dispatch:e})=>IJ(t,e),YY=()=>({state:t,dispatch:e})=>LJ(t,e);function aD(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function XY(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))i1()||aD()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const QY=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=XY(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function cu(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?wt(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),m=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:m})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Th(d.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const ZY=(t,e={})=>({state:n,dispatch:r})=>{const i=wt(t,n.schema);return cu(n,i,e)?UJ(n,r):!1},eX=()=>({state:t,dispatch:e})=>GJ(t,e),tX=t=>({state:e,dispatch:n})=>{const r=wt(t,e.schema);return nY(r)(e,n)},nX=()=>({state:t,dispatch:e})=>HJ(t,e);function ym(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function vE(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const rX=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=ym(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=wt(t,r.schema)),a==="mark"&&(o=Ss(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,vE(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&n.addMark(u,u+c.nodeSize,o.create(vE(d.attrs,e)))})})}),!0):!1},iX=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),sX=()=>({tr:t,dispatch:e})=>{if(e){const n=new Wn(t.doc);t.setSelection(n)}return!0},oX=()=>({state:t,dispatch:e})=>$J(t,e),aX=()=>({state:t,dispatch:e})=>BJ(t,e),lX=()=>({state:t,dispatch:e})=>qJ(t,e),cX=()=>({state:t,dispatch:e})=>XJ(t,e),uX=()=>({state:t,dispatch:e})=>YJ(t,e);function dv(t,e,n={},r={}){return Nh(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const dX=(t,e=!1,n={},r={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{var l,c;const{doc:u}=s;if(n.preserveWhitespace!=="full"){const d=dv(t,i.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function lD(t,e){const n=Ss(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function fX(t,e){const n=new uA(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function hX(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function pX(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function mX(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function s1(t){return e=>mX(e.$from,t)}function gX(t,e){const n={from:0,to:t.content.size};return tD(t,n,e)}function yX(t,e){const n=wt(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function cD(t,e){const n=ym(typeof e=="string"?e:e.name,t.schema);return n==="node"?yX(t,e):n==="mark"?lD(t,e):{}}function vX(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function xX(t){const e=vX(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function wX(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),u=e.slice(s).map(l),d=e.invert().map(c,-1),f=e.invert().map(u);r.push({oldRange:{from:d,to:f},newRange:{from:c,to:u}})})}),xX(r)}function o1(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=r1(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function lf(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function fv(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?Ss(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Th(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,m=f.pos;t.doc.nodesBetween(h,m,(y,x)=>{if(!y.isText&&!y.marks.length)return;const v=Math.max(h,x),w=Math.min(m,x+y.nodeSize),b=w-v;o+=b,a.push(...y.marks.map(k=>({mark:k,from:v,to:w})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Th(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function bX(t,e,n={}){if(!e)return cu(t,null,n)||fv(t,null,n);const r=ym(e,t.schema);return r==="node"?cu(t,e,n):r==="mark"?fv(t,e,n):!1}function xE(t,e){const{nodeExtensions:n}=pm(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=de(Q(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function a1(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(a1(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function kX(t){return t instanceof re}function SX(t,e,n){var r;const{selection:i}=e;let s=null;if(iD(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(n),m=!!n.isInSet(u.marks)||!u.marks.some(y=>y.type.excludes(n));c=h&&m}return!c}),c})}const CX=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=Ss(t,r.schema);if(i)if(o){const c=lD(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const m=Math.max(h,u),y=Math.min(h+f.nodeSize,d);f.marks.find(v=>v.type===l)?f.marks.forEach(v=>{l===v.type&&n.addMark(m,y,l.create({...v.attrs,...e}))}):n.addMark(m,y,l.create(e))})});return SX(r,n,l)},EX=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),TX=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=wt(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>hE(s,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>hE(s,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},NX=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Ks(t,0,r.content.size),s=re.create(r,i);e.setSelection(s)}return!0},MX=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=oe.atStart(r).from,a=oe.atEnd(r).to,l=Ks(i,o,a),c=Ks(s,o,a),u=oe.create(r,l,c);e.setSelection(u)}return!0},PX=t=>({state:e,dispatch:n})=>{const r=wt(t,e.schema);return sY(r)(e,n)};function wE(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const OX=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=lf(c,a.node().type.name,a.node().attrs);if(s instanceof re&&s.node.isBlock)return!a.parentOffset||!ga(o,a.pos)?!1:(r&&(t&&wE(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:hX(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,m=ga(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!m&&ga(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,h=f?[{type:f,attrs:u}]:void 0),r){if(m&&(s instanceof oe&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const y=e.mapping.map(a.before()),x=e.doc.resolve(y);a.node(-1).canReplaceWith(x.index(),x.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&wE(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},jX=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=wt(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const f=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let v=_.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let T=l.depth-w;T>=l.depth-3;T-=1)v=_.from(l.node(T).copy(v));const b=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,k={...lf(f,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(k))||void 0;v=v.append(_.from(a.createAndFill(null,S)||void 0));const C=l.before(l.depth-(w-1));n.replace(C,l.after(-b),new W(v,4-w,0));let E=-1;n.doc.nodesBetween(C,n.doc.content.size,(T,P)=>{if(E>-1)return!1;T.isTextblock&&T.content.size===0&&(E=P+1)}),E>-1&&n.setSelection(oe.near(n.doc.resolve(E))),n.scrollIntoView()}return!0}const h=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,m={...lf(f,d.type.name,d.attrs),...e},y={...lf(f,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const x=h?[{type:a,attrs:m},{type:h,attrs:y}]:[{type:a,attrs:m}];if(!ga(n.doc,l.pos,2))return!1;if(i){const{selection:v,storedMarks:w}=r,{splittableMarks:b}=s.extensionManager,k=w||v.$to.parentOffset&&v.$from.marks();if(n.split(l.pos,2,x).scrollIntoView(),!k||!i)return!0;const S=k.filter(C=>b.includes(C.type.name));n.ensureMarks(S)}return!0},Gg=(t,e)=>{const n=s1(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&bs(t.doc,n.pos)&&t.join(n.pos),!0},qg=(t,e)=>{const n=s1(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&bs(t.doc,r)&&t.join(r),!0},AX=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=wt(t,o.schema),m=wt(e,o.schema),{selection:y,storedMarks:x}=o,{$from:v,$to:w}=y,b=v.blockRange(w),k=x||y.$to.parentOffset&&y.$from.marks();if(!b)return!1;const S=s1(C=>xE(C.type.name,d))(y);if(b.depth>=1&&S&&b.depth-S.depth<=1){if(S.node.type===h)return c.liftListItem(m);if(xE(S.node.type.name,d)&&h.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,h),!0)).command(()=>Gg(s,h)).command(()=>qg(s,h)).run()}return!n||!k||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>Gg(s,h)).command(()=>qg(s,h)).run():l().command(()=>{const C=u().wrapInList(h,r),E=k.filter(T=>f.includes(T.type.name));return s.ensureMarks(E),C?!0:c.clearNodes()}).wrapInList(h,r).command(()=>Gg(s,h)).command(()=>qg(s,h)).run()},DX=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Ss(t,r.schema);return fv(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},RX=(t,e,n={})=>({state:r,commands:i})=>{const s=wt(t,r.schema),o=wt(e,r.schema),a=cu(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},_X=(t,e={})=>({state:n,commands:r})=>{const i=wt(t,n.schema);return cu(n,i,e)?r.lift(i):r.wrapIn(i,e)},IX=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},LX=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},$X=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=Ss(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const m=(s=c.marks().find(x=>x.type===l))===null||s===void 0?void 0:s.attrs,y=r1(c,l,m);y&&(f=y.from,h=y.to),n.removeMark(f,h,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},FX=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=ym(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=wt(t,r.schema)),a==="mark"&&(o=Ss(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,f,h,m;n.selection.empty?r.doc.nodesBetween(c,u,(y,x)=>{s&&s===y.type&&(h=Math.max(x,c),m=Math.min(x+y.nodeSize,u),d=x,f=y)}):r.doc.nodesBetween(c,u,(y,x)=>{x<c&&s&&s===y.type&&(h=Math.max(x,c),m=Math.min(x+y.nodeSize,u),d=x,f=y),x>=c&&x<=u&&(s&&s===y.type&&n.setNodeMarkup(x,void 0,{...y.attrs,...e}),o&&y.marks.length&&y.marks.forEach(v=>{if(o===v.type){const w=Math.max(x,c),b=Math.min(x+y.nodeSize,u);n.addMark(w,b,o.create({...v.attrs,...e}))}}))}),f&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),o&&f.marks.length&&f.marks.forEach(y=>{o===y.type&&n.addMark(h,m,o.create({...y.attrs,...e}))}))}),!0):!1},BX=(t,e={})=>({state:n,dispatch:r})=>{const i=wt(t,n.schema);return QJ(i,e)(n,r)},VX=(t,e={})=>({state:n,dispatch:r})=>{const i=wt(t,n.schema);return ZJ(i,e)(n,r)};var zX=Object.freeze({__proto__:null,blur:kY,clearContent:SY,clearNodes:CY,command:EY,createParagraphNear:TY,cut:NY,deleteCurrentNode:MY,deleteNode:PY,deleteRange:OY,deleteSelection:jY,enter:AY,exitCode:DY,extendMarkRange:RY,first:_Y,focus:LY,forEach:$Y,insertContent:FY,insertContentAt:zY,joinBackward:WY,joinDown:HY,joinForward:KY,joinItemBackward:GY,joinItemForward:qY,joinTextblockBackward:JY,joinTextblockForward:YY,joinUp:UY,keyboardShortcut:QY,lift:ZY,liftEmptyBlock:eX,liftListItem:tX,newlineInCode:nX,resetAttributes:rX,scrollIntoView:iX,selectAll:sX,selectNodeBackward:oX,selectNodeForward:aX,selectParentNode:lX,selectTextblockEnd:cX,selectTextblockStart:uX,setContent:dX,setMark:CX,setMeta:EX,setNode:TX,setNodeSelection:NX,setTextSelection:MX,sinkListItem:PX,splitBlock:OX,splitListItem:jX,toggleList:AX,toggleMark:DX,toggleNode:RX,toggleWrap:_X,undoInputRule:IX,unsetAllMarks:LX,unsetMark:$X,updateAttributes:FX,wrapIn:BX,wrapInList:VX});const UX=tn.create({name:"commands",addCommands(){return{...zX}}}),HX=tn.create({name:"drop",addProseMirrorPlugins(){return[new At({key:new On("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),WX=tn.create({name:"editable",addProseMirrorPlugins(){return[new At({key:new On("editable"),props:{editable:()=>this.editor.options.editable}})]}}),KX=tn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new At({key:new On("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),GX=tn.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,m=d.parent.isTextblock&&f>0?a.doc.resolve(f-1):d,y=m.parent.type.spec.isolating,x=d.pos-d.parentOffset,v=y&&m.parent.childCount===1?x===d.pos:le.atStart(c).from===f;return!u||!h.type.isTextblock||h.textContent.length||!v||v&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return i1()||aD()?s:i},addProseMirrorPlugins(){return[new At({key:new On("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(y=>y.getMeta("composition")))return;const r=t.some(y=>y.docChanged)&&!e.doc.eq(n.doc),i=t.some(y=>y.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=e.selection,l=le.atStart(e.doc).from,c=le.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!a1(n.doc))return;const f=n.tr,h=fm({state:n,transaction:f}),{commands:m}=new hm({editor:this.editor,state:h});if(m.clearNodes(),!!f.steps.length)return f}})]}}),qX=tn.create({name:"paste",addProseMirrorPlugins(){return[new At({key:new On("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),JX=tn.create({name:"tabindex",addProseMirrorPlugins(){return[new At({key:new On("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Is{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Is(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Is(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Is(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1),a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Is(a,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new Is(a,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const YX=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function XX(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class QX extends oY{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=XX(YX,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=eD(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;r=n.filter(a=>!a.key.startsWith(o))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[WX,bY.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),UX,KX,GX,JX,HX,qX].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new ia(i,this)}createCommandManager(){this.commandManager=new hm({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=dv(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=dv(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=sD(n,this.options.autofocus);this.view=new CJ(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:ra.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return cD(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return bX(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return t1(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return gX(this.state.doc,{blockSeparator:n,textSerializers:{...nD(this.schema),...r}})}get isEmpty(){return a1(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Is(n,this)}get $doc(){return this.$pos(0)}}function Ua(t){return new mm({find:t.find,handler:({state:e,range:n,match:r})=>{const i=de(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(o1(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(y=>y===t.type&&y!==h.mark.type)).filter(h=>h.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const f=n.from+l+o.length;s.addMark(n.from+l,f,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function ZX(t){return new mm({find:t.find,handler:({state:e,range:n,match:r})=>{const i=de(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()}})}function hv(t){return new mm({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=de(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function uu(t){return new mm({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=de(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&zw(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,m=f||d.$to.parentOffset&&d.$from.marks();if(m){const y=m.filter(x=>h.includes(x.type.name));o.ensureMarks(y)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&bs(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}let yr=class pv{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=de(Q(this,"addOptions",{name:this.name}))),this.storage=de(Q(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new pv(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>gm(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new pv(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=de(Q(n,"addOptions",{name:n.name})),n.storage=de(Q(n,"addStorage",{name:n.name,options:n.options})),n}};function go(t){return new mY({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=de(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),f=d+a.length;if(o1(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(x=>x===t.type&&x!==m.mark.type)).filter(m=>m.to>d).length)return null;f<n.to&&o.delete(f,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function eQ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uD={exports:{}},Jg={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bE;function tQ(){if(bE)return Jg;bE=1;var t=D;function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(d,f){var h=f(),m=r({inst:{value:h,getSnapshot:f}}),y=m[0].inst,x=m[1];return s(function(){y.value=h,y.getSnapshot=f,l(y)&&x({inst:y})},[d,h,f]),i(function(){return l(y)&&x({inst:y}),d(function(){l(y)&&x({inst:y})})},[d]),o(h),h}function l(d){var f=d.getSnapshot;d=d.value;try{var h=f();return!n(d,h)}catch{return!0}}function c(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Jg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,Jg}uD.exports=tQ();var l1=uD.exports;const nQ=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},rQ=({contentComponent:t})=>{const e=l1.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return D.createElement(D.Fragment,null,Object.values(e))};function iQ(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:sI.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class sQ extends D.Component{constructor(e){var n;super(e),this.editorContentRef=D.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=iQ(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return D.createElement(D.Fragment,null,D.createElement("div",{ref:nQ(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&D.createElement(rQ,{contentComponent:e.contentComponent}))}}const oQ=g.forwardRef((t,e)=>{const n=D.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return D.createElement(sQ,{key:n,innerRef:e,...t})}),aQ=D.memo(oQ);var lQ=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},cQ=eQ(lQ),dD={exports:{}},Yg={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function uQ(){if(kE)return Yg;kE=1;var t=D,e=l1;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return Yg.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var m=s(null);if(m.current===null){var y={hasValue:!1,value:null};m.current=y}else y=m.current;m=a(function(){function v(C){if(!w){if(w=!0,b=C,C=f(C),h!==void 0&&y.hasValue){var E=y.value;if(h(E,C))return k=E}return k=C}if(E=k,r(b,C))return E;var T=f(C);return h!==void 0&&h(E,T)?E:(b=C,k=T)}var w=!1,b,k,S=d===void 0?null:d;return[function(){return v(u())},S===null?void 0:function(){return v(S())}]},[u,d,f,h]);var x=i(c,m[0],m[1]);return o(function(){y.hasValue=!0,y.value=x},[x]),l(x),x},Yg}dD.exports=uQ();var dQ=dD.exports;const fQ=typeof window<"u"?g.useLayoutEffect:g.useEffect;class hQ{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function pQ(t){var e;const[n]=g.useState(()=>new hQ(t.editor)),r=dQ.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:cQ);return fQ(()=>n.watch(t.editor),[t.editor,n]),g.useDebugValue(r),r}const mQ=!1,mv=typeof window>"u",gQ=mv||!!(typeof window<"u"&&window.next);class c1{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return mv||gQ?null:this.createEditor();if(this.options.current.immediatelyRender&&mv&&mQ)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new QX(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)===null||o===void 0?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?c1.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function yQ(t={},e=[]){const n=g.useRef(t);n.current=t;const[r]=g.useState(()=>new c1(n)),i=l1.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return g.useDebugValue(i),g.useEffect(r.onRender(e)),pQ({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&s===0?0:s+1}),i}const vQ=g.createContext({editor:null});vQ.Consumer;const xQ=g.createContext({onDragStart:void 0}),wQ=()=>g.useContext(xQ);D.forwardRef((t,e)=>{const{onDragStart:n}=wQ(),r=t.as||"div";return D.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const bQ=/^\s*>\s$/,kQ=yr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",bt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[uu({find:bQ,type:this.type})]}}),SQ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,CQ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,EQ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,TQ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,NQ=Lr.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",bt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ua({find:SQ,type:this.type}),Ua({find:EQ,type:this.type})]},addPasteRules(){return[go({find:CQ,type:this.type}),go({find:TQ,type:this.type})]}}),MQ="listItem",SE="textStyle",CE=/^\s*([-+*])\s$/,PQ=yr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",bt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(MQ,this.editor.getAttributes(SE)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=uu({find:CE,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=uu({find:CE,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(SE),editor:this.editor})),[t]}}),OQ=/(^|[^`])`([^`]+)`(?!`)/,jQ=/(^|[^`])`([^`]+)`(?!`)/g,AQ=Lr.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",bt(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ua({find:OQ,type:this.type})]},addPasteRules(){return[go({find:jQ,type:this.type})]}}),DQ=/^```([a-z]+)?[\s\n]$/,RQ=/^~~~([a-z]+)?[\s\n]$/,_Q=yr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",bt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(le.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[hv({find:DQ,type:this.type,getAttributes:t=>({language:t[1]})}),hv({find:RQ,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new At({key:new On("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(oe.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),IQ=yr.create({name:"doc",topNode:!0,content:"block+"});function LQ(t={}){return new At({view(e){return new $Q(e,t)}})}class $Q{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,o=a.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=sA(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const FQ=tn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[LQ(this.options)]}});class qe extends le{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return qe.valid(r)?new qe(r):le.near(r)}content(){return W.empty}eq(e){return e instanceof qe&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new qe(e.resolve(n.pos))}getBookmark(){return new u1(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!BQ(e)||!VQ(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&qe.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(qe.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!re.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(qe.valid(a))return a}return null}}}qe.prototype.visible=!1;qe.findFrom=qe.findGapCursorFrom;le.jsonID("gapcursor",qe);class u1{constructor(e){this.pos=e}map(e){return new u1(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return qe.valid(n)?new qe(n):le.near(n)}}function BQ(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function VQ(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function zQ(){return new At({props:{decorations:KQ,createSelectionBetween(t,e,n){return e.pos==n.pos&&qe.valid(n)?new qe(n):null},handleClick:HQ,handleKeyDown:UQ,handleDOMEvents:{beforeinput:WQ}}})}const UQ=KA({ArrowLeft:Dd("horiz",-1),ArrowRight:Dd("horiz",1),ArrowUp:Dd("vert",-1),ArrowDown:Dd("vert",1)});function Dd(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof oe){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=qe.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new qe(c))),!0):!1}}function HQ(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!qe.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&re.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new qe(r))),!0)}function WQ(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof qe))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=_.empty;for(let o=r.length-1;o>=0;o--)i=_.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new W(i,0,0));return s.setSelection(oe.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function KQ(t){if(!(t.selection instanceof qe))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",lt.create(t.doc,[Un.widget(t.selection.head,e,{key:"gapcursor"})])}const GQ=tn.create({name:"gapCursor",addProseMirrorPlugins(){return[zQ()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=de(Q(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),qQ=yr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",bt(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),JQ=yr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,bt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>hv({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Mh=200,xt=function(){};xt.prototype.append=function(e){return e.length?(e=xt.from(e),!this.length&&e||e.length<Mh&&this.leafAppend(e)||this.length<Mh&&e.leafPrepend(this)||this.appendInner(e)):this};xt.prototype.prepend=function(e){return e.length?xt.from(e).append(this):this};xt.prototype.appendInner=function(e){return new YQ(this,e)};xt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?xt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};xt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};xt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};xt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};xt.from=function(e){return e instanceof xt?e:e&&e.length?new fD(e):xt.empty};var fD=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Mh)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Mh)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(xt);xt.empty=new fD([]);var YQ=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(xt);const XQ=500;class or{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),s=i.maps.length),s--,u.push(d);return}if(i){u.push(new Sr(d.map));let h=d.step.map(i.slice(s)),m;h&&o.maybeStep(h).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Sr(m,void 0,void 0,c.length+u.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new or(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new Sr(e.mapping.maps[u],d,n),h;(h=l&&l.merge(f))&&(f=h,u?s.pop():a=a.slice(0,a.length-1)),s.push(f),n&&(o++,n=void 0),i||(l=f)}let c=o-r.depth;return c>ZQ&&(a=QQ(a,c),o-=c),new or(a.append(s),o)}remapping(e,n){let r=new ma;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new or(this.items.append(e.map(n=>new Sr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=n;this.items.forEach(f=>{let h=s.getMirror(--l);if(h==null)return;o=Math.min(o,h);let m=s.maps[h];if(f.step){let y=e.steps[h].invert(e.docs[h]),x=f.selection&&f.selection.map(s.slice(l+1,h));x&&a++,r.push(new Sr(m,y,x))}else r.push(new Sr(m))},i);let c=[];for(let f=n;f<o;f++)c.push(new Sr(s.maps[f]));let u=this.items.slice(0,i).append(c).append(r),d=new or(u,a);return d.emptyItemCount()>XQ&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let d=new Sr(c.invert(),l,u),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else o.map&&r--},this.items.length,0),new or(xt.from(i.reverse()),s)}}or.empty=new or(xt.empty,0);function QQ(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Sr{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Sr(n.getMap().invert(),n,this.selection)}}}class Oi{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const ZQ=20;function eZ(t,e,n,r){let i=n.getMeta(no),s;if(i)return i.historyState;n.getMeta(rZ)&&(t=new Oi(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(no))return o.getMeta(no).redo?new Oi(t.done.addTransform(n,void 0,r,cf(e)),t.undone,EE(n.mapping.maps),t.prevTime,t.prevComposition):new Oi(t.done,t.undone.addTransform(n,void 0,r,cf(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!tZ(n,t.prevRanges)),c=o?Xg(t.prevRanges,n.mapping):EE(n.mapping.maps);return new Oi(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,cf(e)),or.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Oi(t.done.rebased(n,s),t.undone.rebased(n,s),Xg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Oi(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Xg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function tZ(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function EE(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function Xg(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function nZ(t,e,n){let r=cf(e),i=no.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new Oi(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(no,{redo:n,historyState:l})}let Qg=!1,TE=null;function cf(t){let e=t.plugins;if(TE!=e){Qg=!1,TE=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Qg=!0;break}}return Qg}const no=new On("history"),rZ=new On("closeHistory");function iZ(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new At({key:no,state:{init(){return new Oi(or.empty,or.empty,null,0,-1)},apply(e,n,r){return eZ(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?pD:r=="historyRedo"?mD:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function hD(t,e){return(n,r)=>{let i=no.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=nZ(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const pD=hD(!1,!0),mD=hD(!0,!0),sZ=tn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>pD(t,e),redo:()=>({state:t,dispatch:e})=>mD(t,e)}},addProseMirrorPlugins(){return[iZ(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),oZ=yr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",bt(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):kX(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:a})=>{var l;if(a){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(oe.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(re.create(o.doc,c.pos)):o.setSelection(oe.create(o.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(o.insert(u,d),o.setSelection(oe.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[ZX({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),aZ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,lZ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,cZ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,uZ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,dZ=Lr.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",bt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ua({find:aZ,type:this.type}),Ua({find:cZ,type:this.type})]},addPasteRules(){return[go({find:lZ,type:this.type}),go({find:uZ,type:this.type})]}}),fZ=yr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",bt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),hZ="listItem",NE="textStyle",ME=/^(\d+)\.\s$/,pZ=yr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",bt(this.options.HTMLAttributes,n),0]:["ol",bt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(hZ,this.editor.getAttributes(NE)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=uu({find:ME,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=uu({find:ME,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(NE)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),mZ=yr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",bt(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),gZ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,yZ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,vZ=Lr.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",bt(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ua({find:gZ,type:this.type})]},addPasteRules(){return[go({find:yZ,type:this.type})]}}),xZ=yr.create({name:"text",group:"inline"}),wZ=tn.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,o,a,l,c,u,d,f,h,m,y,x,v;const w=[];return this.options.bold!==!1&&w.push(NQ.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&w.push(kQ.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&w.push(PQ.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&w.push(AQ.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&w.push(_Q.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&w.push(IQ.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&w.push(FQ.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&w.push(GQ.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&w.push(qQ.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&w.push(JQ.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&w.push(sZ.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&w.push(oZ.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&w.push(dZ.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&w.push(fZ.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&w.push(pZ.configure((m=this.options)===null||m===void 0?void 0:m.orderedList)),this.options.paragraph!==!1&&w.push(mZ.configure((y=this.options)===null||y===void 0?void 0:y.paragraph)),this.options.strike!==!1&&w.push(vZ.configure((x=this.options)===null||x===void 0?void 0:x.strike)),this.options.text!==!1&&w.push(xZ.configure((v=this.options)===null||v===void 0?void 0:v.text)),w}}),bZ="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",kZ="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Ha=(t,e)=>{for(const n in e)t[n]=e[n];return t},gv="numeric",yv="ascii",vv="alpha",vc="asciinumeric",Wl="alphanumeric",xv="domain",gD="emoji",SZ="scheme",CZ="slashscheme",Zg="whitespace";function EZ(t,e){return t in e||(e[t]=[]),e[t]}function Gs(t,e,n){e[gv]&&(e[vc]=!0,e[Wl]=!0),e[yv]&&(e[vc]=!0,e[vv]=!0),e[vc]&&(e[Wl]=!0),e[vv]&&(e[Wl]=!0),e[Wl]&&(e[xv]=!0),e[gD]&&(e[xv]=!0);for(const r in e){const i=EZ(r,n);i.indexOf(t)<0&&i.push(t)}}function TZ(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function un(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}un.groups={};un.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||un.groups;let i;return e&&e.j?i=e:(i=new un(e),n&&r&&Gs(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||un.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new un,Ha(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new un,s){if(r)if(o.t&&typeof o.t=="string"){const l=Ha(TZ(o.t,r),n);Gs(s,l,r)}else n&&Gs(s,n,r);o.t=s}return i.j[t]=o,o}};const ce=(t,e,n,r,i)=>t.ta(e,n,r,i),We=(t,e,n,r,i)=>t.tr(e,n,r,i),PE=(t,e,n,r,i)=>t.ts(e,n,r,i),L=(t,e,n,r,i)=>t.tt(e,n,r,i),Wr="WORD",wv="UWORD",yD="ASCIINUMERICAL",vD="ALPHANUMERICAL",du="LOCALHOST",bv="TLD",kv="UTLD",uf="SCHEME",Fo="SLASH_SCHEME",d1="NUM",Sv="WS",f1="NL",xc="OPENBRACE",wc="CLOSEBRACE",Ph="OPENBRACKET",Oh="CLOSEBRACKET",jh="OPENPAREN",Ah="CLOSEPAREN",Dh="OPENANGLEBRACKET",Rh="CLOSEANGLEBRACKET",_h="FULLWIDTHLEFTPAREN",Ih="FULLWIDTHRIGHTPAREN",Lh="LEFTCORNERBRACKET",$h="RIGHTCORNERBRACKET",Fh="LEFTWHITECORNERBRACKET",Bh="RIGHTWHITECORNERBRACKET",Vh="FULLWIDTHLESSTHAN",zh="FULLWIDTHGREATERTHAN",Uh="AMPERSAND",h1="APOSTROPHE",Hh="ASTERISK",ji="AT",Wh="BACKSLASH",Kh="BACKTICK",Gh="CARET",$i="COLON",p1="COMMA",qh="DOLLAR",Cr="DOT",Jh="EQUALS",m1="EXCLAMATION",_n="HYPHEN",bc="PERCENT",Yh="PIPE",Xh="PLUS",Qh="POUND",kc="QUERY",g1="QUOTE",xD="FULLWIDTHMIDDLEDOT",y1="SEMI",Er="SLASH",Sc="TILDE",Zh="UNDERSCORE",wD="EMOJI",ep="SYM";var bD=Object.freeze({__proto__:null,WORD:Wr,UWORD:wv,ASCIINUMERICAL:yD,ALPHANUMERICAL:vD,LOCALHOST:du,TLD:bv,UTLD:kv,SCHEME:uf,SLASH_SCHEME:Fo,NUM:d1,WS:Sv,NL:f1,OPENBRACE:xc,CLOSEBRACE:wc,OPENBRACKET:Ph,CLOSEBRACKET:Oh,OPENPAREN:jh,CLOSEPAREN:Ah,OPENANGLEBRACKET:Dh,CLOSEANGLEBRACKET:Rh,FULLWIDTHLEFTPAREN:_h,FULLWIDTHRIGHTPAREN:Ih,LEFTCORNERBRACKET:Lh,RIGHTCORNERBRACKET:$h,LEFTWHITECORNERBRACKET:Fh,RIGHTWHITECORNERBRACKET:Bh,FULLWIDTHLESSTHAN:Vh,FULLWIDTHGREATERTHAN:zh,AMPERSAND:Uh,APOSTROPHE:h1,ASTERISK:Hh,AT:ji,BACKSLASH:Wh,BACKTICK:Kh,CARET:Gh,COLON:$i,COMMA:p1,DOLLAR:qh,DOT:Cr,EQUALS:Jh,EXCLAMATION:m1,HYPHEN:_n,PERCENT:bc,PIPE:Yh,PLUS:Xh,POUND:Qh,QUERY:kc,QUOTE:g1,FULLWIDTHMIDDLEDOT:xD,SEMI:y1,SLASH:Er,TILDE:Sc,UNDERSCORE:Zh,EMOJI:wD,SYM:ep});const Ur=/[a-z]/,Al=new RegExp("\\p{L}","u"),ey=new RegExp("\\p{Emoji}","u"),Hr=/\d/,ty=/\s/,OE="\r",ny=`
`,NZ="️",MZ="‍",ry="￼";let Rd=null,_d=null;function PZ(t=[]){const e={};un.groups=e;const n=new un;Rd==null&&(Rd=jE(bZ)),_d==null&&(_d=jE(kZ)),L(n,"'",h1),L(n,"{",xc),L(n,"}",wc),L(n,"[",Ph),L(n,"]",Oh),L(n,"(",jh),L(n,")",Ah),L(n,"<",Dh),L(n,">",Rh),L(n,"（",_h),L(n,"）",Ih),L(n,"「",Lh),L(n,"」",$h),L(n,"『",Fh),L(n,"』",Bh),L(n,"＜",Vh),L(n,"＞",zh),L(n,"&",Uh),L(n,"*",Hh),L(n,"@",ji),L(n,"`",Kh),L(n,"^",Gh),L(n,":",$i),L(n,",",p1),L(n,"$",qh),L(n,".",Cr),L(n,"=",Jh),L(n,"!",m1),L(n,"-",_n),L(n,"%",bc),L(n,"|",Yh),L(n,"+",Xh),L(n,"#",Qh),L(n,"?",kc),L(n,'"',g1),L(n,"/",Er),L(n,";",y1),L(n,"~",Sc),L(n,"_",Zh),L(n,"\\",Wh),L(n,"・",xD);const r=We(n,Hr,d1,{[gv]:!0});We(r,Hr,r);const i=We(r,Ur,yD,{[vc]:!0}),s=We(r,Al,vD,{[Wl]:!0}),o=We(n,Ur,Wr,{[yv]:!0});We(o,Hr,i),We(o,Ur,o),We(i,Hr,i),We(i,Ur,i);const a=We(n,Al,wv,{[vv]:!0});We(a,Ur),We(a,Hr,s),We(a,Al,a),We(s,Hr,s),We(s,Ur),We(s,Al,s);const l=L(n,ny,f1,{[Zg]:!0}),c=L(n,OE,Sv,{[Zg]:!0}),u=We(n,ty,Sv,{[Zg]:!0});L(n,ry,u),L(c,ny,l),L(c,ry,u),We(c,ty,u),L(u,OE),L(u,ny),We(u,ty,u),L(u,ry,u);const d=We(n,ey,wD,{[gD]:!0});L(d,"#"),We(d,ey,d),L(d,NZ,d);const f=L(d,MZ);L(f,"#"),We(f,ey,d);const h=[[Ur,o],[Hr,i]],m=[[Ur,null],[Al,a],[Hr,s]];for(let y=0;y<Rd.length;y++)xi(n,Rd[y],bv,Wr,h);for(let y=0;y<_d.length;y++)xi(n,_d[y],kv,wv,m);Gs(bv,{tld:!0,ascii:!0},e),Gs(kv,{utld:!0,alpha:!0},e),xi(n,"file",uf,Wr,h),xi(n,"mailto",uf,Wr,h),xi(n,"http",Fo,Wr,h),xi(n,"https",Fo,Wr,h),xi(n,"ftp",Fo,Wr,h),xi(n,"ftps",Fo,Wr,h),Gs(uf,{scheme:!0,ascii:!0},e),Gs(Fo,{slashscheme:!0,ascii:!0},e),t=t.sort((y,x)=>y[0]>x[0]?1:-1);for(let y=0;y<t.length;y++){const x=t[y][0],w=t[y][1]?{[SZ]:!0}:{[CZ]:!0};x.indexOf("-")>=0?w[xv]=!0:Ur.test(x)?Hr.test(x)?w[vc]=!0:w[yv]=!0:w[gv]=!0,PE(n,x,x,w)}return PE(n,"localhost",du,{ascii:!0}),n.jd=new un(ep),{start:n,tokens:Ha({groups:e},bD)}}function kD(t,e){const n=OZ(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let a=t,l=null,c=0,u=null,d=-1,f=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(d=0,f=0,u=a):d>=0&&(d+=n[o].length,f++),c+=n[o].length,s+=n[o].length,o++;s-=d,o-=f,c-=d,i.push({t:u.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function OZ(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function xi(t,e,n,r,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new un(r),s.jr=i.slice(),t.j[l]=s),t=s}return s=new un(n),s.jr=i.slice(),t.j[e[o-1]]=s,s}function jE(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(t[r]),r++}return e}const fu={defaultProtocol:"http",events:null,format:AE,formatHref:AE,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function v1(t,e=null){let n=Ha({},fu);t&&(n=Ha(n,t instanceof v1?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}v1.prototype={o:fu,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:fu[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function AE(t){return t}function SD(t,e){this.t="token",this.v=t,this.tk=e}SD.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=fu.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),o={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return o.href=r,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&Ha(o,u),{tagName:i,attributes:o,content:s,eventListeners:d}}};function vm(t,e){class n extends SD{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const DE=vm("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),RE=vm("text"),jZ=vm("nl"),Id=vm("url",{isLink:!0,toHref(t=fu.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==du&&t[1].t===$i}}),Dn=t=>new un(t);function AZ({groups:t}){const e=t.domain.concat([Uh,Hh,ji,Wh,Kh,Gh,qh,Jh,_n,d1,bc,Yh,Xh,Qh,Er,ep,Sc,Zh]),n=[$i,p1,Cr,m1,bc,kc,g1,y1,Dh,Rh,xc,wc,Oh,Ph,jh,Ah,_h,Ih,Lh,$h,Fh,Bh,Vh,zh],r=[Uh,h1,Hh,Wh,Kh,Gh,qh,Jh,_n,xc,wc,bc,Yh,Xh,Qh,kc,Er,ep,Sc,Zh],i=Dn(),s=L(i,Sc);ce(s,r,s),ce(s,t.domain,s);const o=Dn(),a=Dn(),l=Dn();ce(i,t.domain,o),ce(i,t.scheme,a),ce(i,t.slashscheme,l),ce(o,r,s),ce(o,t.domain,o);const c=L(o,ji);L(s,ji,c),L(a,ji,c),L(l,ji,c);const u=L(s,Cr);ce(u,r,s),ce(u,t.domain,s);const d=Dn();ce(c,t.domain,d),ce(d,t.domain,d);const f=L(d,Cr);ce(f,t.domain,d);const h=Dn(DE);ce(f,t.tld,h),ce(f,t.utld,h),L(c,du,h);const m=L(d,_n);L(m,_n,m),ce(m,t.domain,d),ce(h,t.domain,d),L(h,Cr,f),L(h,_n,m);const y=L(h,$i);ce(y,t.numeric,DE);const x=L(o,_n),v=L(o,Cr);L(x,_n,x),ce(x,t.domain,o),ce(v,r,s),ce(v,t.domain,o);const w=Dn(Id);ce(v,t.tld,w),ce(v,t.utld,w),ce(w,t.domain,o),ce(w,r,s),L(w,Cr,v),L(w,_n,x),L(w,ji,c);const b=L(w,$i),k=Dn(Id);ce(b,t.numeric,k);const S=Dn(Id),C=Dn();ce(S,e,S),ce(S,n,C),ce(C,e,S),ce(C,n,C),L(w,Er,S),L(k,Er,S);const E=L(a,$i),T=L(l,$i),P=L(T,Er),N=L(P,Er);ce(a,t.domain,o),L(a,Cr,v),L(a,_n,x),ce(l,t.domain,o),L(l,Cr,v),L(l,_n,x),ce(E,t.domain,S),L(E,Er,S),L(E,kc,S),ce(N,t.domain,S),ce(N,e,S),L(N,Er,S);const M=[[xc,wc],[Ph,Oh],[jh,Ah],[Dh,Rh],[_h,Ih],[Lh,$h],[Fh,Bh],[Vh,zh]];for(let A=0;A<M.length;A++){const[B,Y]=M[A],R=L(S,B);L(C,B,R),L(R,Y,S);const X=Dn(Id);ce(R,e,X);const V=Dn();ce(R,n),ce(X,e,X),ce(X,n,V),ce(V,e,X),ce(V,n,V),L(X,Y,S),L(V,Y,S)}return L(i,du,w),L(i,f1,jZ),{start:i,tokens:bD}}function DZ(t,e,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let a=t,l=null,c=null,u=0,d=null,f=-1;for(;i<r&&!(l=a.go(n[i].t));)o.push(n[i++]);for(;i<r&&(c=l||a.go(n[i].t));)l=null,a=c,a.accepts()?(f=0,d=a):f>=0&&f++,i++,u++;if(f<0)i-=u,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(iy(RE,e,o)),o=[]),i-=f,u-=f;const h=d.t,m=n.slice(i-u,i);s.push(iy(h,e,m))}}return o.length>0&&s.push(iy(RE,e,o)),s}function iy(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const RZ=typeof console<"u"&&console&&console.warn||(()=>{}),_Z="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Re={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function IZ(){return un.groups={},Re.scanner=null,Re.parser=null,Re.tokenQueue=[],Re.pluginQueue=[],Re.customSchemes=[],Re.initialized=!1,Re}function _E(t,e=!1){if(Re.initialized&&RZ(`linkifyjs: already initialized - will not register custom scheme "${t}" ${_Z}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Re.customSchemes.push([t,e])}function LZ(){Re.scanner=PZ(Re.customSchemes);for(let t=0;t<Re.tokenQueue.length;t++)Re.tokenQueue[t][1]({scanner:Re.scanner});Re.parser=AZ(Re.scanner.tokens);for(let t=0;t<Re.pluginQueue.length;t++)Re.pluginQueue[t][1]({scanner:Re.scanner,parser:Re.parser});return Re.initialized=!0,Re}function x1(t){return Re.initialized||LZ(),DZ(Re.parser.start,t,kD(Re.scanner.start,t))}x1.scan=kD;function CD(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new v1(n),i=x1(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}function $Z(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function FZ(t){return new At({key:new On("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,a=fX(n.doc,[...e]);if(wX(a).forEach(({newRange:c})=>{const u=pX(r.doc,c,h=>h.isTextblock);let d,f;if(u.length>1?(d=u[0],f=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ")):u.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(d=u[0],f=r.doc.textBetween(d.pos,c.to,void 0," ")),d&&f){const h=f.split(" ").filter(v=>v!=="");if(h.length<=0)return!1;const m=h[h.length-1],y=d.pos+f.lastIndexOf(m);if(!m)return!1;const x=x1(m).map(v=>v.toObject(t.defaultProtocol));if(!$Z(x))return!1;x.filter(v=>v.isLink).map(v=>({...v,from:y+v.start+1,to:y+v.end+1})).filter(v=>r.schema.marks.code?!r.doc.rangeHasMark(v.from,v.to,r.schema.marks.code):!0).filter(v=>t.validate(v.value)).filter(v=>t.shouldAutoLink(v.value)).forEach(v=>{o1(v.from,v.to,r.doc).some(w=>w.mark.type===t.type)||o.addMark(v.from,v.to,t.type.create({href:v.href}))})}}),!!o.steps.length)return o}})}function BZ(t){return new At({key:new On("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=r.target;const a=[];for(;o.nodeName!=="DIV";)a.push(o),o=o.parentNode;if(!a.find(f=>f.nodeName==="A"))return!1;const l=cD(e.state,t.type.name),c=r.target,u=(i=c==null?void 0:c.href)!==null&&i!==void 0?i:l.href,d=(s=c==null?void 0:c.target)!==null&&s!==void 0?s:l.target;return c&&u?(window.open(u,d),!0):!1}}})}function VZ(t){return new At({key:new On("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:s}=i,{empty:o}=s;if(o)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=CD(a,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:t.editor.commands.setMark(t.type,{href:l.href})}}})}const zZ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Ns(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(zZ,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const UZ=Lr.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){_E(t);return}_E(t.scheme,t.optionalSlashes)})},onDestroy(){IZ()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Ns(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Ns(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Ns(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",bt(this.options.HTMLAttributes,t),0]:["a",bt(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Ns(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Ns(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[go({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=CD(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Ns(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(FZ({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Ns(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(BZ({type:this.type})),this.options.linkOnPaste&&t.push(VZ({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),HZ=Lr.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",bt(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),WZ=({editor:t})=>t?p.jsxs("div",{className:"flex items-center gap-1 p-1 mb-2 border-b border-design-greyOutlines dark:border-design-greyOutlines/20",children:[p.jsx(Kt,{text:"Bold (Ctrl+B)",children:p.jsx("button",{onClick:()=>t.chain().focus().toggleBold().run(),className:`p-1.5 rounded hover:bg-design-primaryPurple/20 transition-all duration-200 ${t.isActive("bold")?"bg-design-primaryPurple/20 text-design-primaryPurple":"text-design-primaryGrey"}`,children:p.jsx(g4,{className:"h-4 w-4"})})}),p.jsx(Kt,{text:"Italic (Ctrl+I)",children:p.jsx("button",{onClick:()=>t.chain().focus().toggleItalic().run(),className:`p-1.5 rounded hover:bg-design-primaryPurple/20 transition-all duration-200 ${t.isActive("italic")?"bg-design-primaryPurple/20 text-design-primaryPurple":"text-design-primaryGrey"}`,children:p.jsx(O4,{className:"h-4 w-4"})})}),p.jsx(Kt,{text:"Underline (Ctrl+U)",children:p.jsx("button",{onClick:()=>t.chain().focus().toggleUnderline().run(),className:`p-1.5 rounded hover:bg-design-primaryPurple/20 transition-all duration-200 ${t.isActive("underline")?"bg-design-primaryPurple/20 text-design-primaryPurple":"text-design-primaryGrey"}`,children:p.jsx(G4,{className:"h-4 w-4"})})}),p.jsx(Kt,{text:"Bullet List",children:p.jsx("button",{onClick:()=>t.chain().focus().toggleBulletList().run(),className:`p-1.5 rounded hover:bg-design-primaryPurple/20 transition-colors ${t.isActive("bulletList")?"bg-design-primaryPurple/20 text-design-primaryPurple":"text-design-primaryGrey"}`,children:p.jsx(_4,{className:"h-4 w-4"})})}),p.jsx(Kt,{text:"Numbered List",children:p.jsx("button",{onClick:()=>t.chain().focus().toggleOrderedList().run(),className:`p-1.5 rounded hover:bg-design-primaryPurple/20 transition-colors ${t.isActive("orderedList")?"bg-design-primaryPurple/20 text-design-primaryPurple":"text-design-primaryGrey"}`,children:p.jsx(R4,{className:"h-4 w-4"})})})]}):null;function KZ({content:t,onChange:e,onBlur:n}){const r=yQ({extensions:[wZ,HZ,UZ.configure({openOnClick:!0,autolink:!0,linkOnPaste:!0,validate:i=>/^https?:\/\//.test(i),HTMLAttributes:{class:"text-design-primaryPurple hover:underline",rel:"noopener noreferrer nofollow",target:"_blank"}})],content:t||"",onUpdate:({editor:i})=>{e(i.getHTML())},onBlur:({editor:i})=>{n==null||n(i.getHTML())},editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none"}}});return p.jsxs("div",{className:"w-full rounded-lg border border-gray-100 shadow-sm p-2 focus-within:border-primary focus-within:ring-primary resize-none transition-all hover:border-primary dark:bg-design-black/50 dark:border-design-greyOutlines/20",children:[p.jsx(WZ,{editor:r}),p.jsx(aQ,{editor:r})]})}function GZ({isOpen:t,onClose:e,users:n,currentAssignees:r,onAssign:i}){im(t);const[s,o]=g.useState(r),[a,l]=g.useState("");g.useEffect(()=>{o(r)},[r,t]);const c=h=>s.some(m=>m._id===h),u=h=>{const m=c(h._id)?s.filter(y=>y._id!==h._id):[...s,h];o(m)},d=()=>{JSON.stringify(s)!==JSON.stringify(r)&&i(s),e()},f=n.filter(h=>h.firstName.toLowerCase().includes(a.toLowerCase())||h.lastName.toLowerCase().includes(a.toLowerCase()));return p.jsx(ct,{children:t&&p.jsxs("div",{className:"fixed inset-x-0 top-48 flex items-start justify-center z-[200] mt-4",children:[p.jsx(U.div,{className:"fixed inset-0 bg-black/20 backdrop-blur-[2px]",onClick:e,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),p.jsxs(U.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},className:"w-[90%] max-w-md bg-white rounded-2xl shadow-lg overflow-hidden relative z-[201]",children:[p.jsxs("div",{className:"p-4 border-b border-design-greyOutlines bg-design-greyBG/50",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Oa,{className:"w-5 h-5 text-design-primaryPurple"}),p.jsx("h3",{className:"text-lg font-medium text-design-black",children:"Assign Users"}),p.jsx("span",{className:"px-2 py-0.5 rounded-full bg-design-lightPurpleButtonFill text-design-primaryPurple text-xs font-medium",children:s.length})]}),p.jsx(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"p-2 text-design-primaryGrey hover:text-semantic-error rounded-full hover:bg-semantic-error-light transition-all",children:p.jsx(Xt,{className:"h-5 w-5"})})]}),p.jsxs("div",{className:"mt-4 relative",children:[p.jsx(Pp,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-design-primaryGrey"}),p.jsx("input",{type:"text",placeholder:"Search users...",value:a,onChange:h=>l(h.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-design-greyOutlines bg-white focus:outline-none focus:ring-2 focus:ring-design-primaryPurple/20 focus:border-design-primaryPurple transition-all"})]})]}),p.jsx(ct,{children:s.length>0&&p.jsx(U.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:p.jsx("div",{className:"p-3 flex flex-wrap gap-2 bg-design-lightPurpleButtonFill",children:s.map(h=>p.jsxs(U.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"flex items-center gap-2 bg-white rounded-full pl-1 pr-2 py-1 shadow-sm",children:[p.jsxs("div",{className:"h-6 w-6 rounded-full bg-design-primaryPurple text-white flex items-center justify-center text-xs font-medium",children:[h.firstName[0],h.lastName[0]]}),p.jsx("span",{className:"text-xs text-design-primaryGrey",children:h.firstName}),p.jsx(U.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u(h),className:"ml-1 p-1 rounded-full hover:bg-semantic-error-light hover:text-semantic-error",children:p.jsx(Xt,{className:"h-3 w-3"})})]},h._id))})})}),p.jsx("div",{className:"max-h-[40vh] overflow-y-auto p-2 space-y-1",children:n.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[p.jsx(Oa,{className:"w-16 h-16 text-gray-300 mb-4"}),p.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"No Team Members Yet"}),p.jsx("p",{className:"text-gray-500 text-center text-sm max-w-[250px]",children:"Share this board with a team first to start assigning tasks to team members"})]}):f.map(h=>p.jsxs(U.button,{onClick:()=>u(h),whileHover:{scale:1.01},whileTap:{scale:.99},className:`w-full flex items-center justify-between p-3 rounded-lg transition-all ${c(h._id)?"bg-design-lightPurpleButtonFill text-design-primaryPurple":"hover:bg-design-greyBG"}`,children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:`h-8 w-8 rounded-full flex items-center justify-center ${c(h._id)?"bg-design-primaryPurple text-white":"bg-design-greyBG text-design-primaryGrey"}`,children:[h.firstName[0],h.lastName[0]]}),p.jsx("div",{className:"text-left",children:p.jsxs("p",{className:"font-medium text-design-black",children:[h.firstName," ",h.lastName]})})]}),p.jsx(U.div,{initial:!1,animate:c(h._id)?{rotate:360}:{rotate:0},children:c(h._id)?p.jsx($l,{className:"h-5 w-5 text-semantic-error"}):p.jsx(Ox,{className:"h-5 w-5 text-design-primaryPurple opacity-0 group-hover:opacity-100"})})]},h._id))}),p.jsx("div",{className:"p-4 border-t border-design-greyOutlines bg-design-greyBG/50",children:p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o([]),className:"px-4 py-2 rounded-lg text-semantic-error hover:bg-semantic-error-light transition-all",children:"Clear All"}),p.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:d,className:"px-4 py-2 rounded-lg bg-design-primaryPurple text-white hover:bg-button-primary-hover transition-all",children:"Save Changes"})]})})]})]})})}const qZ=t=>({facebook:"/fb_facebook_facebook logo_icon.svg",google_my_business:"/brand_business_google_logo_my_icon.svg",instagram_business:"/camera_instagram_instagram logo_icon.svg",linkedin:"/linkedin_network_linkedin logo_icon.svg",mastodon:"/mastodon_icon.svg",pinterest:"/inspiration_pin_pinned_pinterest_social network_icon.svg",threads:"/brand_chat_threads_logo_icon.svg",tiktok:"/tiktok_logo_brand_icon.svg",twitter:"/x_twitter_elon musk_twitter new logo_icon.svg",whatsapp:"/bubble_chat_mobile_whatsapp_whatsapp logo_icon.svg",wordpress:"/wordpress_wp icon_icon.svg",youtube:"/video_youtube_icon.svg"})[t.toLowerCase()]||"/default-social.svg",JZ={hidden:{opacity:0},visible:{opacity:1}},YZ={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{type:"spring",duration:.3}},exit:{opacity:0,scale:.95,transition:{duration:.2}}};function XZ({isOpen:t,onClose:e,channels:n,activeChannelIds:r,onShare:i}){im(t);const[s,o]=g.useState([]),a=c=>{o(u=>u.includes(c)?u.filter(d=>d!==c):[...u,c]),console.log(s)},l=()=>{i(s),e()};return p.jsx(ct,{children:t&&p.jsxs("div",{className:"fixed inset-x-0 top-48 flex items-start justify-center z-[200] mt-4",children:[p.jsx(U.div,{className:"fixed inset-0 bg-black/30 backdrop-blur-[2px]",onClick:e,initial:"hidden",animate:"visible",exit:"hidden",variants:JZ}),p.jsxs(U.div,{className:"w-full max-w-sm bg-white p-6 rounded-2xl shadow-xl relative z-[201]",initial:"hidden",animate:"visible",exit:"exit",variants:YZ,children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Select Channels to Share"}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:p.jsx(Xt,{className:"h-5 w-5"})})]}),n.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[p.jsx(U2,{className:"w-16 h-16 text-gray-300 mb-4"}),p.jsx("p",{className:"text-gray-500 text-center mb-2",children:"No channels available"}),p.jsx("p",{className:"text-gray-400 text-sm text-center",children:"Please add some channels to start sharing your content"})]}):p.jsx("div",{className:"grid gap-3 mb-6 max-h-[60vh] overflow-y-auto",children:n.map(c=>p.jsxs("div",{onClick:()=>a(c.id),className:`flex items-center justify-between p-3 rounded-lg cursor-pointer border transition-all ${s.includes(c.id)?"bg-design-lightPurpleButtonFill border-primary":"hover:bg-gray-50 border-gray-200"}`,children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("img",{src:c.imageUrl,alt:c.socialNetwork,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100"}),p.jsx("span",{className:"font-medium",children:c.socialNetwork.replace(/_/g," ").split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1).toLowerCase()).join(" ")})]}),p.jsx("img",{src:qZ(c.socialNetwork),alt:`${c.socialNetwork} icon`,className:"w-8 h-8 object-contain"})]},c.id))}),p.jsx("div",{className:"flex justify-end",children:p.jsx("button",{onClick:l,disabled:s.length===0,className:"btn-primary",children:"Share"})})]})]})})}function QZ({isOpen:t,onClose:e,card:n,onUpdate:r,onDelete:i,onArchive:s,boardId:o,boardTitle:a,teamUsers:l}){var Y;const[c,u]=g.useState(!1),[d,f]=g.useState(!1),[h,m]=g.useState(n.title),[y,x]=g.useState(n.description),v=g.useRef(null),{currentUser:w,currentUserChannels:b}=gr(),[k,S]=g.useState(!1),[C,E]=g.useState(!1);g.useEffect(()=>{m(n.title),x(n.description)},[n.title,n.description]),g.useEffect(()=>{d&&v.current&&v.current.focus()},[d]);const T=()=>{e(),f(!1)},P=R=>{m(R.target.value)},N=()=>{f(!1),h!==n.title&&r(n.id,{title:h})},M=async R=>{const X={title:n.title,description:n.description,attachments:n.attachments,userId:w.userId,userName:w.email,channelIds:R};try{const V=await fetch("http://localhost:5000/api/cp/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});if(!V.ok)throw new Error("Failed to create post");const O=await V.json();ge.success("Successfully shared to selected channels!"),console.log("Post created successfully:",O)}catch(V){ge.error("Failed to share post"),console.error("Error creating post:",V)}},A=()=>{y!==n.description&&r(n.id,{description:y})},B=R=>{r(n.id,{due_date:R})};return p.jsx(nt,{appear:!0,show:t,as:g.Fragment,children:p.jsxs(yt,{as:"div",className:"relative z-50",onClose:T,children:[p.jsx(nt.Child,{as:g.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:p.jsx("div",{className:"fixed inset-0 bg-design-black/25 backdrop-blur-sm"})}),p.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:p.jsx("div",{className:"flex min-h-full items-center md:items-stretch justify-center md:justify-end p-4 text-center",children:p.jsx(nt.Child,{as:g.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-x-full",enterTo:"opacity-100 translate-x-0",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-x-0",leaveTo:"opacity-0 translate-x-full",children:p.jsxs(yt.Panel,{className:"w-full max-w-3xl transform overflow-hidden rounded-2xl bg-white p-8 mt-8 text-left align-middle shadow-xl transition-all border border-gray-100 ",children:[p.jsxs("div",{className:"flex justify-between ",children:[p.jsx("p",{className:"text-xl sm:text-2xl font-medium text-design-primaryGrey",children:a}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Kt,{text:"Share on CP SocialHub",position:"left",children:p.jsx("button",{onClick:()=>E(!0),className:`p-2 text-gray-400 hover:text-primary rounded-full \r
                          hover:bg-primary-light transition-all duration-200 hover:scale-105`,children:p.jsx(U2,{className:"h-5 w-5"})})}),p.jsx(Kt,{text:"Archive Card",position:"left",children:p.jsx("button",{onClick:()=>{s(n.id),e()},className:`p-2 text-gray-400 hover:text-primary rounded-full \r
                          hover:bg-primary-light transition-all duration-200 hover:scale-105`,children:p.jsx(p4,{className:"h-5 w-5"})})}),p.jsx(Kt,{text:"Delete Card",position:"left",children:p.jsx("button",{onClick:()=>{i(n.id),e()},className:`p-2 text-gray-400 hover:text-semantic-error rounded-full \r
                          hover:bg-semantic-error-light transition-all duration-200 hover:scale-105`,children:p.jsx(Eo,{className:"h-5 w-5"})})}),p.jsx(Kt,{text:"Close",position:"left",children:p.jsx("button",{onClick:T,className:`p-2 text-gray-400 hover:text-primary rounded-full \r
                          hover:bg-primary-light transition-all duration-200 hover:scale-105`,children:p.jsx(Xt,{className:"h-5 w-5"})})})]})]}),p.jsx("div",{className:"h-0.5 w-full bg-design-greyOutlines mt-2"}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center  mt-8 p-3 rounded-xl ",children:[p.jsx(h4,{className:"h-6 w-6 text-design-primaryPurple flex-shrink-0 mr-3"}),p.jsx(yt.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 flex-grow mr-2",children:d?p.jsx("input",{ref:v,type:"text",value:h,onChange:P,onBlur:N,className:"w-full max-w-full text-xl font-semibold text-gray-900 border-b-2 border-primary focus:ring-0 focus:outline-none bg-primary-light/30 px-3 py-2 rounded-lg transition-all",placeholder:"Card title"}):p.jsx("span",{onClick:()=>f(!0),className:"text-2xl font-semibold text-gray-900 truncate hover:text-primary transition-colors cursor-pointer",children:h})}),p.jsxs("div",{className:"group relative",children:[p.jsx("button",{onClick:()=>f(!0),className:"p-2 text-gray-400 hover:text-design-primaryPurple rounded-full hover:bg-design-primaryPurple/20 transition-all hover:scale-110 flex-shrink-0",children:p.jsx(h0,{className:"h-4 w-4"})}),p.jsx("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 hidden group-hover:block",children:p.jsxs("div",{className:"bg-gray-800 text-white text-sm py-1 px-2 rounded-md shadow-lg whitespace-nowrap",children:["Edit Title",p.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-gray-800"})]})})]})]}),p.jsxs("div",{className:"space-y-7 p-4 rounded-xl ",children:[p.jsxs("div",{className:"grid grid-cols-2 items-center ",children:[p.jsxs("label",{className:"flex text-base font-medium text-design-primaryGrey",children:[p.jsx(Mp,{className:"h-5 w-5 mr-2 text-design-primaryGrey"}),"Due Date"]}),p.jsx(qK,{value:n.due_date,onChange:B})]}),p.jsxs("div",{className:"grid grid-cols-2 items-center",children:[p.jsxs("label",{className:"flex gap-2 text-base font-medium text-design-primaryGrey",children:[p.jsx(Pa,{className:"h-5 w-5 text-design-primaryGrey"}),"Priority"]}),p.jsx(VK,{value:n.priority,onChange:R=>r(n.id,{priority:R})})]}),p.jsxs("div",{className:"grid grid-cols-2 items-center ",children:[p.jsxs("label",{className:"flex gap-2 text-base font-medium text-design-primaryGrey",children:[p.jsx(K4,{className:"h-5 w-5 text-design-primaryGrey"}),"Labels"]}),p.jsx(UK,{labels:n.labels,onUpdate:R=>r(n.id,{labels:R})})]}),p.jsxs("div",{className:"grid grid-cols-2 items-center",children:[p.jsxs("label",{className:"flex gap-2 text-base font-medium text-design-primaryGrey",children:[p.jsx(v4,{className:"h-5 w-5 text-design-primaryGrey"}),"Assignees (",((Y=n.assignee)==null?void 0:Y.length)||0,")"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"flex flex-wrap gap-2",children:n.assignee&&n.assignee.length>0?p.jsx("div",{className:"flex flex-wrap gap-1",children:n.assignee.map(R=>p.jsxs("div",{className:"flex items-center gap-2 bg-primary-light rounded-full pl-1 pr-2 py-1",children:[p.jsxs("div",{className:"h-6 w-6 rounded-full bg-design-primaryPurple text-white flex items-center justify-center text-xs",children:[R.firstName[0],R.lastName[0]]}),p.jsx("span",{className:"text-xs text-design-primaryGrey",children:R.firstName})]},R._id))}):p.jsx("span",{className:"text-sm text-design-primaryGrey",children:"No assignees"})}),p.jsx("button",{onClick:()=>S(!0),className:"p-2 text-design-primaryGrey hover:text-primary rounded-full hover:bg-primary-light transition-all",children:p.jsx(h0,{className:"h-4 w-4"})})]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"flex text-base font-medium text-gray-700 items-center",children:[p.jsx($4,{className:"h-5 w-5 mr-2 text-design-primaryGrey"}),"Description"]}),p.jsx(KZ,{content:y,onChange:x,onBlur:A},n.id)]}),p.jsxs("div",{className:"bg-gray-50/50 border border-gray-100 p-4 rounded-xl",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("button",{onClick:()=>u(!c),className:"inline-flex items-center px-4 py-2 border border-design-greyOutlines rounded-lg shadow-sm text-sm font-medium text-primary bg-white transition-all hover:scale-105",children:c?"Hide Checklist":"Show Checklist"}),n.checklist&&n.checklist.length>0&&p.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-sm font-medium bg-button-tertiary-fill text-button-primary-cta dark:bg-button-tertiary-fill/20",children:[p.jsx(Hf,{className:"h-4 w-4 mr-1"}),n.checklist.filter(R=>R.checked).length,"/",n.checklist.length]})]}),c&&p.jsx(GK,{isOpen:c,onClose:()=>u(!1),checklist:n.checklist||[],onUpdate:R=>r(n.id,{checklist:R})})]}),p.jsx(WK,{attachments:n.attachments||[],onAddAttachment:R=>r(n.id,{attachments:[...n.attachments||[],R]}),onDeleteAttachment:R=>r(n.id,{attachments:(n.attachments||[]).filter(X=>X.id!==R)}),boardId:o,boardTitle:a}),p.jsx(KK,{comments:n.comments||[],userUserId:w.userId,onAddComment:async R=>{const X={id:Date.now().toString(),text:R,author:w.firstName,user_id:w.userId,created_at:new Date().toISOString()};try{await Og("add",n.id,X)}catch(V){console.error("Error adding comment:",V)}},onEditComment:async(R,X)=>{const V={id:R,text:X,editedAt:new Date().toISOString()};try{await Og("edit",n.id,V)}catch(O){console.error("Error editing comment:",O)}},onDeleteComment:async R=>{try{await Og("delete",n.id,{commentId:R,account_id:w.accountId})}catch(X){console.error("Error deleting comment:",X)}},teamUsers:l,cardId:n.id,boardId:o,cardTitle:n.title})]}),p.jsx(GZ,{isOpen:k,onClose:()=>S(!1),users:l,currentAssignees:n.assignee||[],onAssign:R=>r(n.id,{assignee:R})}),p.jsx(XZ,{isOpen:C,onClose:()=>E(!1),channels:b,activeChannelIds:w.activeChannelIds,onShare:M})]})})})})]})})}function ED({card:t,isDragging:e=!1,onUpdate:n,onDelete:r,onArchive:i,boardId:s,boardTitle:o,teamUsers:a}){const[l,c]=g.useState(!1),[u,d]=g.useState(t.completed||!1),[f,h]=g.useState(!1);g.useState(!0);const{attributes:m,listeners:y,setNodeRef:x,transform:v,transition:w}=FK({id:t.id}),b={transform:hs.Transform.toString(v),transition:w},k=E=>E?E.length>30?E.substring(0,20)+"...":E:"",S=E=>{E.stopPropagation(),c(!0)},C=E=>{E.stopPropagation();const T=!t.completed;d(T),n(t.id,{completed:T})};return t.description.replace(/<\/?[^>]+>/g,""),p.jsxs(p.Fragment,{children:[p.jsxs("div",{ref:x,style:b,...m,...y,onClick:()=>c(!0),onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),className:`card p-4 cursor-grab hover:shadow-md transition-all  dark:hover:bg-design-black/70 ${e?"opacity-50":""} relative group ${t.priority==="high"?"border-l-4 border-b-0 border-t-0 border-r-0 border-semantic-error":t.priority==="medium"?"border-l-4 border-b-0 border-t-0 border-r-0 border-semantic-warning":"border-l-4 border-b-0 border-t-0 border-r-0 border-semantic-success"}`,children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:`text-sm font-semibold text-design-black truncate flex-1 group-hover:text-button-primary-cta transition-colors dark:text-design-white ${t.completed?"line-through":""}`,children:t.title}),p.jsx("button",{onClick:E=>{E.stopPropagation(),r(t.id)},className:"btn-ghost p-1 hover:text-semantic-error hover:scale-110 transition-all ml-2 dark:hover:text-semantic-error",children:p.jsx(Eo,{className:"h-4 w-4"})})]}),t.description&&p.jsxs("div",{className:"mt-2 flex items-start gap-2",children:[p.jsx("button",{onClick:C,className:`flex-shrink-0 mt-1 text-design-primaryGrey hover:text-button-primary-cta transition-colors ${f?"opacity-100":"opacity-0"} group-hover:opacity-100`,children:t.completed?p.jsx(Ox,{className:"h-4 w-4 text-semantic-success"}):p.jsx(Hf,{className:"h-4 w-4"})}),p.jsx("p",{onClick:S,className:`text-xs text-design-primaryGrey dark:text-design-greyOutlines cursor-pointer hover:text-button-primary-cta transition-colors ${t.completed?"line-through":""}`,children:k(t.description.replace(/<\/?[^>]+>/g,""))})]}),t.due_date&&p.jsxs("div",{className:"mt-2 flex items-center text-xs text-design-primaryGrey dark:text-design-greyOutlines bg-button-tertiary-fill/30 w-fit px-2 py-1 rounded-full hover:bg-button-tertiary-fill/50 transition-colors",children:[p.jsx(Mp,{className:"h-3 w-3 mr-1"}),p.jsx("span",{children:ar(new Date(t.due_date),"MMM d, yyyy")})]}),t.assignee&&t.assignee.length>0&&p.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:t.assignee.map((E,T)=>p.jsxs("div",{className:"h-6 w-6 rounded-full bg-design-primaryPurple text-white text-xs flex items-center justify-center",style:{zIndex:t.assignee.length-T,marginLeft:T>0?"-12px":"0"},children:[E.firstName[0],E.lastName[0]]}))}),p.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[p.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${t.priority==="high"?"bg-semantic-error-light text-semantic-error dark:bg-semantic-error/20":t.priority==="medium"?"bg-semantic-warning-light text-semantic-warning dark:bg-button-tertiary-fill/20":"bg-semantic-success-light text-semantic-success dark:bg-semantic-success/20"}`,children:t.priority}),t.checklist&&t.checklist.length>0&&p.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-button-tertiary-fill text-button-primary-cta dark:bg-button-tertiary-fill/20",children:[p.jsx(Hf,{className:"h-3 w-3 mr-1"}),t.checklist.filter(E=>E.checked).length,"/",t.checklist.length]}),t.attachments&&t.attachments.length>0&&p.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-button-secondary-fill text-design-primaryGrey dark:bg-button-secondary-fill/10 dark:text-design-greyOutlines",children:[p.jsx(V2,{className:"h-3 w-3 mr-1"}),t.attachments.length]}),t.comments&&t.comments.length>0&&p.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-button-secondary-fill text-design-primaryGrey dark:bg-button-secondary-fill/10 dark:text-design-greyOutlines",children:[p.jsx(B2,{className:"h-3 w-3 mr-1"}),t.comments.length]})]})]}),p.jsx(QZ,{isOpen:l,onClose:()=>c(!1),card:t,onUpdate:n,onDelete:r,onArchive:i,boardId:s,boardTitle:o,teamUsers:a})]})}const Cv=qO(t=>({users:[],currentUser:null,setCurrentUser:e=>t(n=>({currentUser:e,users:[...n.users.filter(r=>r.id!==e.id),e]})),addUser:e=>t(n=>({users:[...n.users.filter(r=>r.id!==e.id),e]})),removeUser:e=>t(n=>({users:n.users.filter(r=>r.id!==e)})),updateUserPresence:(e,n)=>t(r=>{var i;return{users:r.users.map(s=>s.id===e?{...s,...n,lastSeen:new Date().toISOString()}:s),currentUser:((i=r.currentUser)==null?void 0:i.id)===e?{...r.currentUser,...n,lastSeen:new Date().toISOString()}:r.currentUser}})}));function ZZ({location:t,id:e}){const n=Cv(s=>s.users),r=Cv(s=>s.currentUser),i=n.filter(s=>s.id!==(r==null?void 0:r.id)&&(t==="card"?s.currentCard===e:s.currentColumn===e));return i.length===0?null:p.jsxs("div",{className:"flex -space-x-2 overflow-hidden animate-in slide-in-from-right",children:[i.slice(0,3).map(s=>p.jsx("div",{className:"inline-block h-6 w-6 rounded-full ring-2 ring-white shadow-sm hover:scale-110 transition-transform",title:s.email,children:s.avatar?p.jsx("img",{src:s.avatar,alt:s.email,className:"h-full w-full rounded-full object-cover hover:opacity-90 transition-opacity"}):p.jsx("div",{className:"h-full w-full rounded-full bg-primary flex items-center justify-center text-white text-xs font-medium hover:bg-primary-hover transition-colors",children:s.email.charAt(0).toUpperCase()})},s.id)),i.length>3&&p.jsxs("div",{className:"flex items-center justify-center h-6 w-6 rounded-full bg-primary-light text-xs font-medium text-primary shadow-sm hover:scale-110 transition-transform",children:["+",i.length-3]})]})}function eee(t){const{currentUser:e,addUser:n,removeUser:r,updateUserPresence:i}=Cv(),s=g.useRef(null);return g.useEffect(()=>{if(!e||!t)return;const a=ne.channel(`presence:${t}`,{config:{presence:{key:e.id}}});return s.current=a,a.on("presence",{event:"sync"},()=>{const l=a.presenceState();Object.values(l).forEach(c=>{if(c&&c.length>0){const u=c[0];n(u)}})}).on("presence",{event:"join"},({key:l,newPresence:c})=>{c&&c.length>0&&n(c[0])}).on("presence",{event:"leave"},({key:l})=>{r(l)}),a.subscribe(async l=>{l==="SUBSCRIBED"&&await a.track({...e,lastSeen:new Date().toISOString()})}),()=>{a.unsubscribe(),s.current=null}},[t,e,n,r]),{updatePresence:async a=>{if(!e||!s.current)return;const l={...e,...a,lastSeen:new Date().toISOString()};i(e.id,a),s.current.state==="joined"&&await s.current.track(l)}}}function tee({isOpen:t,onClose:e,onConfirm:n,columnTitle:r}){const[i,s]=g.useState(1),[o,a]=g.useState(!1);g.useEffect(()=>{let c;return t&&i>0&&(c=setInterval(()=>{s(u=>u-1)},1e3)),()=>{clearInterval(c),s(1)}},[t]);const l=async()=>{a(!0),await n(),a(!1),e()};return p.jsx(nt,{appear:!0,show:t,as:g.Fragment,children:p.jsxs(yt,{as:"div",className:"relative z-50",onClose:e,children:[p.jsx(nt.Child,{as:g.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:p.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm"})}),p.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:p.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:p.jsx(nt.Child,{as:g.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:p.jsxs(yt.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[p.jsxs(yt.Title,{className:"flex items-center gap-2 text-lg font-medium text-gray-900 dark:text-white",children:[p.jsx(Pa,{className:"h-6 w-6 text-semantic-error"}),"Delete Column"]}),p.jsx("div",{className:"mt-4",children:p.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Are you sure you want to delete the column"," ",p.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:['"',r,'"']}),"? This action cannot be undone."]})}),p.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[p.jsx("button",{onClick:e,className:"btn-ghost",children:"Cancel"}),p.jsx("button",{onClick:l,disabled:i>0||o,className:`btn bg-semantic-error text-button-primary-text hover:bg-semantic-error focus:ring-semantic-error dark:bg-semantic-error dark:hover:bg-semantic-error/80 ${i>0?"opacity-50 cursor-not-allowed":"hover:bg-semantic-error/90"}`,children:o?"Deleting...":i>0?p.jsxs(p.Fragment,{children:["Delete (",i,"s)"]}):"Delete"})]})]})})})})]})})}function nee({column:t,onAddCard:e,onUpdateCard:n,onDeleteCard:r,onArchiveCard:i,onDeleteColumn:s,onUpdateColumn:o,boardId:a,boardTitle:l,teamUsers:c}){const{setNodeRef:u}=Tj({id:t.id}),{updatePresence:d}=eee(a),[f,h]=g.useState(!1);D.useState(!0);const[m,y]=g.useState(!1),[x,v]=g.useState(t.title),w=C=>{C.preventDefault(),x.trim()&&x!==t.title&&o(t.id,{title:x.trim()}),y(!1)},b=C=>{C.key==="Escape"&&(v(t.title),y(!1))};D.useEffect(()=>(d({currentColumn:t.id}),()=>{d({currentColumn:void 0})}),[t.id,d]);const S=(t.cards||[]).filter(C=>!C.archived);return p.jsxs(p.Fragment,{children:[p.jsxs("div",{ref:u,className:"flex-shrink-0 w-80 bg-design-greyBG/50 rounded-2xl p-4 dark:bg-button-tertiary-fill/10 flex flex-col h-full",children:[p.jsx("div",{className:"flex-none mb-4",children:p.jsxs("div",{className:"flex items-center justify-between mb-4 flex-none",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[m?p.jsx("form",{onSubmit:w,className:"flex-1",children:p.jsx("input",{type:"text",value:x,onChange:C=>v(C.target.value),onBlur:w,onKeyDown:b,className:"text-sm font-semibold bg-design-white dark:bg-design-black px-2 py-1 rounded w-full focus:outline-none focus:ring-2 focus:ring-button-primary-cta",autoFocus:!0})}):p.jsx("h3",{className:"text-sm font-semibold text-button-primary-cta dark:text-button-primary-text cursor-pointer hover:text-button-primary-hover",onClick:()=>y(!0),children:t.title}),p.jsx(ZZ,{location:"column",id:t.id})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 text-sm font-medium text-button-primary-hover bg-design-white rounded-full dark:bg-design-black dark:text-button-primary-text",children:S.length}),p.jsx(Kt,{text:`Delete "${t.title}"`,position:"bottom",children:p.jsx("button",{onClick:()=>h(!0),className:"btn-ghost p-1",children:p.jsx(Eo,{className:"h-4 w-4"})})})]})]})}),p.jsxs("div",{className:"space-y-3 overflow-y-auto scrollbar-hide flex-1 relative",style:{maskImage:"linear-gradient(to bottom, transparent, black 5%, black 95%, transparent 100%)",WebkitMaskImage:"linear-gradient(to bottom, transparent, black 5%, black 95%, transparent 100%)"},children:[p.jsx("div",{className:"absolute inset-x-0 top-0 h-20 pointer-events-none",style:{background:"linear-gradient(to bottom, var(--tw-gradient-stops))","--tw-gradient-from":"rgb(var(--design-greyBG) / 0.05)","--tw-gradient-to":"transparent"}}),p.jsx("div",{className:"absolute inset-x-0 bottom-0 h-20 pointer-events-none",style:{background:"linear-gradient(to top, var(--tw-gradient-stops))","--tw-gradient-from":"rgb(var(--design-greyBG) / 0.05)","--tw-gradient-to":"transparent"}}),p.jsx(jj,{items:S.map(C=>C.id),children:S.map(C=>p.jsx(ED,{card:C,onUpdate:n,onDelete:r,onArchive:i,boardId:a,teamUsers:c,boardTitle:l},C.id))})]}),p.jsx("div",{className:"flex-none mt-3",children:p.jsxs("button",{onClick:e,className:"btn-secondary w-full",children:[p.jsx(Or,{className:"h-4 w-4 mr-1"}),"Add Card"]})})]}),p.jsx(tee,{isOpen:f,onClose:()=>h(!1),onConfirm:s,columnTitle:t.title})]})}function ree({isOpen:t,onClose:e,onConfirm:n,boardTitle:r}){const[i,s]=g.useState(1),[o,a]=g.useState(!1);g.useEffect(()=>{let c;return t&&i>0&&(c=setInterval(()=>{s(u=>u-1)},1e3)),()=>{clearInterval(c),s(1)}},[t]);const l=async()=>{a(!0),await n(),a(!1),e()};return p.jsx(nt,{appear:!0,show:t,as:g.Fragment,children:p.jsxs(yt,{as:"div",className:"relative z-50",onClose:e,children:[p.jsx(nt.Child,{as:g.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:p.jsx("div",{className:"fixed inset-0 bg-design-black/25 backdrop-blur-sm"})}),p.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:p.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:p.jsx(nt.Child,{as:g.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:p.jsxs(yt.Panel,{className:"card w-full max-w-md transform overflow-hidden p-6 text-left align-middle transition-all",children:[p.jsx("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:p.jsx("button",{onClick:e,className:"btn-ghost hover:bg-semantic-error-light p-2 rounded-full hover:rotate-90 transition-transform",children:p.jsx(Xt,{className:"h-5 w-5"})})}),p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("div",{className:"flex-shrink-0",children:p.jsx(f4,{className:"h-6 w-6 text-semantic-error dark:text-semantic-error"})}),p.jsx(yt.Title,{as:"h3",className:"text-lg font-semibold leading-6 text-design-black dark:text-design-white",children:"Delete Board"})]}),p.jsx("div",{className:"mt-3 text-center sm:mt-0 sm:text-left animate-in slide-in-from-top",children:p.jsx("div",{className:"mt-2",children:p.jsxs("p",{className:"text-sm text-design-primaryGrey dark:text-design-greyOutlines leading-relaxed",children:['Are you sure you want to delete the board "',r,'"? This action cannot be undone.']})})}),p.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[p.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"}),p.jsx("button",{type:"button",onClick:l,disabled:i>0||o,className:`btn bg-semantic-error text-button-primary-text hover:bg-semantic-error focus:ring-semantic-error dark:bg-semantic-error dark:hover:bg-semantic-error/80 ${i>0?"opacity-50 cursor-not-allowed":"hover:bg-semantic-error/90"}`,children:o?"Deleting...":i>0?p.jsxs(p.Fragment,{children:["Delete (",i,"s)"]}):"Delete"})]})]})})})})]})})}function iee({isOpen:t,onClose:e,board:n,updateBoardsList:r,teams:i,users:s,currentUser:o}){const[a,l]=g.useState("teams"),[c,u]=g.useState(null),[d,f]=g.useState([]),[h,m]=g.useState(""),[y,x]=g.useState(!1),v=async N=>{try{x(!0),await Ez(n.id,N),r(M=>M.map(A=>A.id===n.id?{...A,team_id:N}:A)),ge.success("Board assigned to team successfully"),e(),u(null)}catch(M){console.error("Error assigning board to team:",M),ge.error("Failed to assign board to team")}finally{x(!1)}},w=async()=>{try{x(!0),await Tz(n.id),r(N=>N.map(M=>M.id===n.id?{...M,team_id:null}:M)),ge.success("Board unassigned from team successfully"),e(),u(null)}catch(N){console.error("Error unassigning board from team:",N),ge.error("Failed to unassign board from team")}finally{x(!1)}},b=async N=>{try{x(!0),await Oz(n.id,N,o.firstName,n.title),r(M=>M.map(A=>A.id===n.id?{...A,shared_users:[...A.shared_users||[],...N]}:A)),ge.success("Board shared with users successfully"),e(),f([])}catch(M){console.error("Error sharing board with users:",M),ge.error("Failed to share board with users")}finally{x(!1)}},k=async N=>{try{x(!0),await jz(n.id,N),r(M=>M.map(A=>A.id===n.id?{...A,shared_users:(A.shared_users||[]).filter(B=>!N.includes(B))}:A)),ge.success("Users removed from board successfully"),e(),f([])}catch(M){console.error("Error removing users from board:",M),ge.error("Failed to remove users from board")}finally{x(!1)}},S=s==null?void 0:s.filter(N=>{var M,A;return(((M=N.name)==null?void 0:M.toLowerCase().includes(h.toLowerCase()))||((A=N.email)==null?void 0:A.toLowerCase().includes(h.toLowerCase())))&&N.id!==o.userId}),C=i==null?void 0:i.filter(N=>N.name.toLowerCase().includes(h.toLowerCase())),E=({tab:N,label:M,icon:A})=>p.jsxs("button",{onClick:()=>{l(N),N==="teams"?f([]):(u(null),f([]))},className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium border-b-2 transition-all ${a===N?"text-button-primary-cta border-button-primary-cta":"text-gray-500 dark:text-gray-400 border-transparent hover:text-gray-700 dark:hover:text-gray-200 hover:border-gray-300"}`,children:[p.jsx(A,{className:"h-4 w-4"}),M]}),T=()=>{n.team_id===c._id?w():v(c._id)},P=()=>{const N=d.filter(A=>{var B;return(B=n.shared_users)==null?void 0:B.includes(A)}),M=d.filter(A=>{var B;return!((B=n.shared_users)!=null&&B.includes(A))});N.length>0&&k(N),M.length>0&&b(M)};return p.jsx(nt,{appear:!0,show:t,as:g.Fragment,children:p.jsxs(yt,{as:"div",className:"relative z-50",onClose:e,children:[p.jsx(nt.Child,{as:g.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:p.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm"})}),p.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:p.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:p.jsx(nt.Child,{as:g.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:p.jsxs(yt.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-design-black p-6 shadow-xl transition-all",children:[p.jsxs(yt.Title,{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-900 dark:text-white",children:[p.jsx(Oa,{className:"h-5 w-5 text-button-primary-cta"}),"Share Board"]}),p.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-4",children:[p.jsx(E,{tab:"teams",label:"Teams",icon:Oa}),p.jsx(E,{tab:"users",label:"Users",icon:Kf})]}),p.jsxs("div",{className:"relative mb-4",children:[p.jsx("input",{type:"text",placeholder:"Search teams or users...",value:h,onChange:N=>m(N.target.value),className:"w-full px-4 py-2 pl-10 text-sm bg-gray-50 dark:bg-design-black/50 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-button-primary-cta focus:border-transparent transition-all"}),p.jsx(Pp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]}),p.jsx(ct,{mode:"wait",children:a==="teams"?p.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto scrollbar-hide",children:p.jsx(ct,{mode:"wait",children:C.map(N=>p.jsxs(U.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},onClick:()=>u(N),className:`w-full text-left px-4 py-3 rounded-lg transition-all flex items-center justify-between group ${(c==null?void 0:c.id)===N.id?"hover:bg-button-primary-cta/10 hover:text-button-primary-cta dark:bg-button-primary-cta/20":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[p.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:N.name}),(n==null?void 0:n.team_id)===N._id&&p.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-2 py-1 rounded-full",children:"Current"})]},N._id||N.id))})}):p.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-2 max-h-60 overflow-y-auto scrollbar-hide",children:S.map(N=>{var M;return p.jsxs(U.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onClick:()=>f(A=>A.includes(N.id)?A.filter(B=>B!==N.id):[...A,N.id]),className:`w-full text-left px-4 py-3 rounded-lg transition-all flex items-center justify-between group ${d.includes(N.id)?"bg-button-primary-cta/10 text-button-primary-cta dark:bg-button-primary-cta/20":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:N.avatar_url?p.jsx("img",{src:N.avatar_url,alt:N.name,className:"w-8 h-8 rounded-full object-cover"}):p.jsx(Kf,{className:"h-4 w-4"})}),p.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:N.name||N.email})]}),((M=n.shared_users)==null?void 0:M.includes(N.id))&&p.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-2 py-1 rounded-full",children:"Shared"})]},N.id)})})}),(a==="teams"&&c||a==="users"&&d.length>0)&&p.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-4 p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800/30",children:a==="teams"?p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:n.team_id===c._id?p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx($l,{className:"h-4 w-4 text-semantic-error"}),"Stop Sharing with team:"," ",p.jsx("span",{className:"font-semibold",children:c.name}),"?"]}):p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx(hd,{className:"h-4 w-4 text-semantic-success"}),"Share with team:"," ",p.jsx("span",{className:"font-semibold",children:c.name}),"?"]})}),p.jsx("button",{onClick:T,className:`btn-primary text-sm w-full justify-center ${n.team_id===c._id?"!bg-semantic-error hover:!bg-semantic-error/90":"!bg-semantic-success hover:!bg-semantic-success/90"}`,children:n.team_id===c._id?p.jsxs(p.Fragment,{children:[p.jsx($l,{className:"h-4 w-4 mr-2"}),"Stop Sharing"]}):p.jsxs(p.Fragment,{children:[p.jsx(hd,{className:"h-4 w-4 mr-2"}),"Share"]})})]}):p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:p.jsx("span",{className:"flex items-center gap-2",children:d.some(N=>{var M;return(M=n.shared_users)==null?void 0:M.includes(N)})?p.jsxs(p.Fragment,{children:[p.jsx($l,{className:"h-4 w-4 text-semantic-error"}),"Remove ",d.length," users from board?"]}):p.jsxs(p.Fragment,{children:[p.jsx(hd,{className:"h-4 w-4 text-semantic-success"}),"Share with ",d.length," selected users?"]})})}),p.jsx("button",{onClick:P,className:`btn-primary text-sm w-full justify-center ${d.some(N=>{var M;return(M=n.shared_users)==null?void 0:M.includes(N)})?"!bg-semantic-error hover:!bg-semantic-error/90":"!bg-semantic-success hover:!bg-semantic-success/90"}`,children:d.some(N=>{var M;return(M=n.shared_users)==null?void 0:M.includes(N)})?p.jsxs(p.Fragment,{children:[p.jsx($l,{className:"h-4 w-4 mr-2"}),"Remove Users"]}):p.jsxs(p.Fragment,{children:[p.jsx(hd,{className:"h-4 w-4 mr-2"}),"Share with Users"]})})]})})]})})})})]})})}const see=()=>p.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((t,e)=>p.jsxs("div",{className:"flex gap-4 items-start",children:[p.jsx("div",{className:"w-10 h-10 bg-design-greyBG dark:bg-design-black/50 rounded-xl"}),p.jsxs("div",{className:"flex-1 space-y-2",children:[p.jsx("div",{className:"h-4 bg-design-greyBG dark:bg-design-black/50 rounded-lg w-3/4"}),p.jsx("div",{className:"h-3 bg-design-greyBG dark:bg-design-black/50 rounded-lg w-1/4"})]})]},e))}),oee=t=>!t||!t.message||t.message.includes("Changed fields: updated_at")&&!t.message.includes(",")?null:t.message.includes(", updated_at")?{...t,message:t.message.replace(", updated_at","")}:t.message.includes("updated_at, ")?{...t,message:t.message.replace("updated_at, ","")}:t,aee=t=>{switch(t){case"INSERT":return p.jsx(Or,{className:"h-4 w-4"});case"UPDATE":return p.jsx(z2,{className:"h-4 w-4"});case"DELETE":return p.jsx(Eo,{className:"h-4 w-4"});default:return p.jsx(ku,{className:"h-4 w-4"})}},lee=t=>{switch(t){case"INSERT":return"bg-semantic-success-light text-semantic-success dark:bg-semantic-success/20";case"UPDATE":return"bg-button-primary-cta/10 text-button-primary-cta dark:bg-button-primary-cta/20";case"DELETE":return"bg-semantic-error-light text-semantic-error dark:bg-semantic-error/20";default:return"bg-design-primaryPurple/10 text-design-primaryPurple"}},IE=[{id:"all",name:"All Activities",icon:ku},{id:"INSERT",name:"Created",icon:Or},{id:"UPDATE",name:"Updated",icon:z2},{id:"DELETE",name:"Deleted",icon:Eo}];function cee({isOpen:t,setIsOpen:e,board:n}){var f;const[r,i]=g.useState([]),[s,o]=g.useState(!0),[a,l]=g.useState("all"),[c,u]=g.useState("");g.useEffect(()=>{async function h(){if(t&&n.id){o(!0);try{const y=(await Pz(n.id)).map(oee).filter(Boolean);i(y)}catch(m){console.error("Error fetching logs:",m)}finally{o(!1)}}}h()},[t,n]);const d=r.filter(h=>{const m=a==="all"||h.event_type===a,y=h.message.toLowerCase().includes(c.toLowerCase());return m&&y});return p.jsx(nt.Root,{show:t,as:g.Fragment,children:p.jsxs(yt,{as:"div",className:"relative z-50",onClose:e,children:[p.jsx(nt.Child,{as:g.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:p.jsx("div",{className:"fixed inset-0 bg-design-black/25 backdrop-blur-sm transition-opacity"})}),p.jsx("div",{className:"fixed inset-0 overflow-hidden",children:p.jsx("div",{className:"absolute inset-0 overflow-hidden",children:p.jsx("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:p.jsx(nt.Child,{as:g.Fragment,enter:"transform transition ease-in-out duration-500",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:p.jsx(yt.Panel,{className:"pointer-events-auto w-screen max-w-md",children:p.jsxs("div",{className:"flex h-full flex-col rounded-l-3xl overflow-y-scroll bg-white dark:bg-design-black shadow-xl",children:[p.jsxs("div",{className:"sticky top-0 z-10 bg-white dark:bg-design-black border-b border-design-greyOutlines dark:border-design-greyOutlines/20 p-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(yt.Title,{className:"text-lg font-semibold flex items-center gap-2 text-design-black dark:text-design-white",children:[p.jsx(T4,{className:"h-5 w-5 text-design-primaryPurple"}),"Activity Log"]}),p.jsx("button",{onClick:()=>e(!1),className:"rounded-lg p-2 text-design-primaryGrey hover:text-semantic-error hover:bg-semantic-error-light transition-all duration-200",children:p.jsx(Xt,{className:"h-5 w-5"})})]}),p.jsx("div",{className:"mt-4",children:p.jsx(wd,{value:a,onChange:l,children:p.jsxs("div",{className:"relative",children:[p.jsxs(wd.Button,{className:"relative w-full flex items-center gap-2 text-left bg-design-greyBG dark:bg-design-black border border-design-greyOutlines dark:border-design-greyOutlines/20 rounded-xl px-4 py-2.5 hover:bg-design-greyBG/80 dark:hover:bg-design-black/80 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-design-primaryPurple",children:[p.jsx(C4,{className:"h-4 w-4 text-design-primaryGrey"}),p.jsx("span",{className:"block truncate text-sm",children:(f=IE.find(h=>h.id===a))==null?void 0:f.name}),p.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-4",children:p.jsx(Co,{className:"h-4 w-4 text-design-primaryGrey transition-transform duration-200 ui-open:rotate-180","aria-hidden":"true"})})]}),p.jsx(nt,{as:g.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:p.jsx(wd.Options,{className:"absolute mt-1 w-full overflow-hidden bg-white dark:bg-design-black border border-design-greyOutlines dark:border-design-greyOutlines/20 rounded-xl py-1 shadow-lg focus:outline-none z-50",children:IE.map(h=>p.jsx(wd.Option,{className:({active:m,selected:y})=>`relative cursor-pointer select-none py-2.5 pl-10 pr-4 transition-colors duration-200 ${m?"bg-design-primaryPurple/5 dark:bg-design-primaryPurple/10":""} ${y?"text-design-primaryPurple":"text-design-black dark:text-design-white"}`,value:h.id,children:({selected:m,active:y})=>p.jsxs(p.Fragment,{children:[p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx(h.icon,{className:`h-4 w-4 ${m?"text-design-primaryPurple":"text-design-primaryGrey"}`}),p.jsx("span",{className:`block truncate ${m?"font-medium":"font-normal"}`,children:h.name})]}),m&&p.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-design-primaryPurple",children:p.jsx(bu,{className:"h-4 w-4","aria-hidden":"true"})})]})},h.id))})})]})})}),p.jsxs("div",{className:"mt-4 relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:p.jsx(Pp,{className:"h-4 w-4 text-design-primaryGrey"})}),p.jsx("input",{type:"text",value:c,onChange:h=>u(h.target.value),placeholder:"Search activity logs...",className:"w-full pl-10 pr-4 py-2.5 bg-design-greyBG dark:bg-design-black border border-design-greyOutlines dark:border-design-greyOutlines/20 rounded-xl text-sm text-design-black dark:text-design-white placeholder-design-primaryGrey focus:outline-none focus:ring-2 focus:ring-design-primaryPurple transition-all duration-200"})]})]}),p.jsx("div",{className:"flex-1 p-6",children:s?p.jsx(see,{}):d.length===0?p.jsx("div",{className:"text-center text-design-primaryGrey dark:text-design-greyOutlines mt-8",children:"No activity logs found"}):p.jsx("div",{className:"space-y-4",children:d.map(h=>p.jsxs("div",{className:"group flex gap-4 items-start p-4 rounded-xl bg-design-greyBG/30 dark:bg-design-black/30 hover:bg-design-primaryPurple/5 transition-all duration-200",children:[p.jsx("div",{className:`mt-1 p-2 rounded-xl ${lee(h.event_type)} transition-colors`,children:aee(h.event_type)}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm text-design-black dark:text-design-white group-hover:text-design-primaryPurple transition-colors",children:h.message}),p.jsxs("p",{className:"text-xs text-design-primaryGrey dark:text-design-greyOutlines mt-1 flex items-center gap-1",children:[p.jsx(m4,{className:"h-3 w-3"}),P7(new Date(h.created_at),{addSuffix:!0})]})]})]},h.id))})})]})})})})})})]})})}async function uee(t,e,n){const{data:r,error:i}=await ne.from("columns").select("position").eq("board_id",t).order("position",{ascending:!1}).limit(1);if(i)throw i;const s=r&&r.length>0?r[0].position+1:0,{data:o,error:a}=await ne.from("columns").insert([{board_id:t,title:e,account_id:n,position:s}]).select().single();if(a)throw a;return{id:o.id,title:o.title,cards:[]}}async function dee(t,e){console.log("deleteColumn:",t,e);const{error:n}=await ne.from("columns").delete().eq("id",t);if(n)throw n}async function fee(t,e,n){const{data:r,error:i}=await ne.from("columns").update(e).eq("id",t).select().single();if(i)throw i;return r}function hee(t,e){g.useEffect(()=>{if(!t)return;const n=ne.channel(`cards-board-${t}`).on("postgres_changes",{event:"*",schema:"public",table:"cards"},async r=>{var s,o;console.log("Realtime card event received:",r);const i={...r.new,column_id:(s=r.new)==null?void 0:s.column_id,position:(o=r.new)==null?void 0:o.position,type:r.eventType};if(r.eventType==="DELETE"){e({id:r.old.id,type:"DELETE"});return}e(i)}).subscribe();return()=>{ne.removeChannel(n)}},[t,e])}function pee(t,e){g.useEffect(()=>{if(!t)return;console.log("useRealtimeColumns:",t);const n=ne.channel(`public:columns:${t}`).on("postgres_changes",{event:"*",schema:"public",table:"columns"},r=>{if(r.eventType==="DELETE"){e({id:r.old.id,board_id:r.old.board_id,type:"DELETE"});return}const i=r.new;i&&e({...i,cards:[],type:r.eventType})}).subscribe();return()=>{ne.removeChannel(n)}},[t,e])}function mee(t){g.useEffect(()=>{if(t){document.body.classList.add("loading-cursor");const e=n=>{n.preventDefault(),Bt("Please wait...",{icon:"⏳"})};return document.addEventListener("click",e,!0),()=>{document.body.classList.remove("loading-cursor"),document.removeEventListener("click",e,!0)}}},[t])}function gee(t,e){g.useEffect(()=>{if(!t)return;const n=ne.channel(`comments-${t}`).on("postgres_changes",{event:"*",schema:"public",table:"comments"},r=>{console.log("Comment change detected:",r),r.eventType==="DELETE"?e(r.old.id,"DELETE"):e(r.new,r.eventType)}).subscribe();return()=>{ne.removeChannel(n)}},[t,e])}function yee(t){g.useEffect(()=>{const e=ne.channel("public:boards").on("postgres_changes",{event:"*",schema:"public",table:"boards"},n=>{console.log("Board change received:",n),n.eventType==="DELETE"?t({id:n.old.id,type:"DELETE"}):t(n.new)}).subscribe();return()=>{ne.removeChannel(e)}},[t])}function vee(t,e){const[n,r]=g.useState([]);return g.useEffect(()=>{if(!t||!e)return;const i=ne.channel(`presence:${t}`,{config:{presence:{key:e.email}}});return i.on("presence",{event:"sync"},()=>{const s=i.presenceState(),o=Object.values(s).flat().map(a=>({firstName:a.firstName,lastName:a.lastName}));r(o)}),i.subscribe(async s=>{s==="SUBSCRIBED"&&await i.track({firstName:e.firstName,lastName:e.lastName})}),()=>{i.unsubscribe()}},[t,e]),n}function xee(){const t=Array(5).fill(null),e=Array(4).fill(null);return p.jsx("div",{className:"flex gap-6 overflow-x-auto pb-4 min-h-[calc(100vh-12rem)]",children:t.map((n,r)=>p.jsxs("div",{className:"flex-shrink-0 w-80 bg-design-greyBG/50 border border-design-greyOutlines dark:bg-design-black/50 rounded-lg p-4 animate-pulse",children:[p.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded-md w-3/4 mb-4"}),p.jsx("div",{className:"space-y-3",children:e.map((i,s)=>p.jsxs("div",{className:"card p-4 relative overflow-hidden",children:[p.jsxs("div",{className:"animate-pulse",children:[p.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-3"}),p.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-2"}),p.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3 mb-2"}),p.jsxs("div",{className:"flex gap-2 mt-3",children:[p.jsx("div",{className:"h-5 w-16 bg-gray-200 rounded-full"}),p.jsx("div",{className:"h-5 w-16 bg-gray-200 rounded-full"})]})]}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/50 to-transparent shimmer"})]},s))})]},r))})}function LE(){var Br;const{boardsList:t,isLoading:e,loadInitialBoards:n,updateBoardsList:r,addBoard:i,removeBoardFromList:s}=_p(),[o,a]=g.useState(null),[l,c]=g.useState(null),[u,d]=g.useState(!1),[f,h]=g.useState(""),[m,y]=g.useState(!1),[x,v]=g.useState(""),[w,b]=g.useState(!1),[k,S]=g.useState(!1),[C,E]=g.useState(!1),[T,P]=g.useState(!1),{currentUser:N,currentUserUsers:M,currentUserTeams:A,authUser:B}=gr(),Y=vee(o,N),R=t.find(I=>I.id===o),[X,V]=g.useState([]),O=$r(),{boardId:j}=DI(),F=p9(h9($w,{activationConstraint:{distance:8}}));g.useEffect(()=>{n()},[]),g.useEffect(()=>{a(j)},[j]),g.useEffect(()=>{if(!R){V([]);return}let I=new Set;if(R.team_id){const K=A.find(J=>J._id===R.team_id);K&&K.users.forEach(J=>I.add(J)),M.filter(J=>J.role==="ADMIN").forEach(J=>I.add(J._id))}else R.shared_users&&R.shared_users.forEach(K=>I.add(K));const ee=M.filter(K=>I.has(K._id));V(ee)},[R==null?void 0:R.team_id,R==null?void 0:R.shared_users,A,M,R]);const H=async I=>{if((I==null?void 0:I.type)==="DELETE"){if(r(t.filter(K=>K.id!==I.id)),o===I.id){const K=t.filter(J=>J.id!==I.id);K.length>0?(a(K[0].id),O(`/ideation/${K[0].id}`)):(a(null),O("/ideation"))}return}const ee=await vP();r(ee)};g.useEffect(()=>{e||(t.length===0?O("/ideation"):j?t.some(ee=>ee.id===j)?a(j):(a(t[0].id),O(`/ideation/${t[0].id}`)):(a(t[0].id),O(`/ideation/${t[0].id}`)))},[t,e,j,O]);const Z=I=>{r(ee=>{let K=!1;return ee.map(ae=>({...ae,columns:ae.columns.map(pe=>{pe.cards.find(St=>St.id===I.id)&&(pe.id,K=!0);const Je=pe.cards.filter(St=>St.id!==I.id);if(pe.id===I.column_id){const St=[...Je];if(I.type!=="DELETE"){const me={...K?ee.flatMap(He=>He.columns).flatMap(He=>He.cards).find(He=>He.id===I.id):{},...I,position:I.position||0};St.splice(I.position,0,me)}return St.sort((me,He)=>me.position-He.position),{...pe,cards:St}}return{...pe,cards:Je}})}))})},z=I=>{if(I.type==="DELETE"){r(ee=>ee.map(K=>({...K,columns:K.columns.filter(J=>J.id!==I.id)})));return}r(ee=>ee.map(K=>{if(K.id===I.board_id){const J=K.columns.findIndex(xe=>xe.id===I.id),ae=[...K.columns],pe={...I,cards:I.cards||[]};return J===-1&&I.type==="INSERT"?ae.push(pe):J!==-1&&(ae[J]={...ae[J],...pe,cards:ae[J].cards||[]}),{...K,columns:ae}}return K}))},se=(I,ee)=>{if(ee==="DELETE"){r(K=>K.map(J=>({...J,columns:J.columns.map(ae=>({...ae,cards:ae.cards.map(pe=>({...pe,comments:pe.comments?pe.comments.filter(xe=>xe.id!==I):[]}))}))})));return}r(K=>K.map(J=>({...J,columns:J.columns.map(ae=>({...ae,cards:ae.cards.map(pe=>{if(pe.id===I.card_id){const xe=pe.comments||[],Je=xe.findIndex(me=>me.id===I.id),St=[...xe];return Je===-1&&ee==="INSERT"?St.unshift(I):Je!==-1&&(St[Je]={...St[Je],...I}),{...pe,comments:St}}return pe})}))})))};hee(o||"",Z),pee(o||"",z),gee(o,se),yee(H),mee(w);const we=async()=>{if(f.trim())try{b(!0);const I=await i(f.trim(),N.accountId,B.id);a(I.id),O(`/ideation/${I.id}`),h(""),d(!1),ge.success("Board created successfully")}catch(I){console.error("Error creating board:",I),ge.error("Failed to create board")}finally{b(!1)}},Se=async()=>{if(o)try{b(!0),await s(o);const I=t.find(ee=>ee.id!==o);I?(a(I.id),O(`/ideation/${I.id}`)):(a(null),O("/ideation")),ge.success("Board deleted successfully")}catch(I){console.error("Error deleting board:",I),ge.error("Failed to delete board")}finally{S(!1),b(!1)}},Ne=async()=>{if(x.trim()&&o)try{b(!0);const I=await uee(o,x.trim(),N.accountId);r(ee=>ee.map(K=>K.id===o?{...K,columns:[...K.columns,I]}:K)),v(""),y(!1),ge.success("Column added successfully")}catch(I){console.error("Error adding column:",I),ge.error("Failed to add column")}finally{b(!1)}},kt=async I=>{if(o)try{b(!0),await dee(I,N.accountId),r(ee=>ee.map(K=>K.id===o?{...K,columns:K.columns.filter(J=>J.id!==I)}:K)),ge.success("Column deleted successfully")}catch(ee){console.error("Error deleting column:",ee),ge.error("Failed to delete column")}finally{b(!1)}},st=async(I,ee)=>{try{b(!0),await fee(I,ee,N.accountId),r(K=>K.map(J=>({...J,columns:J.columns.map(ae=>ae.id===I?{...ae,...ee}:ae)}))),ge.success("Column updated successfully")}catch(K){console.error("Error updating column:",K),ge.error("Failed to update column")}finally{b(!1)}},ke=async I=>{try{b(!0);const ee=await JK(I,{title:"New Task",priority:"medium",description:"Add a description...",labels:[],attachments:[],assignee:[],position:0},N.accountId);r(K=>K.map(ae=>({...ae,columns:ae.columns.map(pe=>{if(pe.id===I){const xe=[ee,...pe.cards.map(Je=>({...Je,position:Je.position+1}))];return Pg(xe).catch(Je=>{console.error("Error updating card positions:",Je)}),{...pe,cards:xe}}return pe})}))),ge.success("Card added successfully")}catch(ee){console.error("Error adding card:",ee),ge.error("Failed to add card")}finally{b(!1)}},vr=async(I,ee)=>{try{b(!0);let K=null;if(ee.assignee&&ee.assignee.length>0&&(K=t.flatMap(J=>J.columns).flatMap(J=>J.cards).find(J=>J.id===I)),await pC(I,ee,N.accountId),r(J=>J.map(ae=>({...ae,columns:ae.columns.map(pe=>({...pe,cards:pe.cards.map(xe=>xe.id===I?{...xe,...ee}:xe)}))}))),ee.assignee&&ee.assignee.length>0&&K){const J=Array.isArray(K.assignee)?K.assignee.map(xe=>xe._id):[],ae=ee.assignee.filter(xe=>!J.includes(xe._id)),pe=ee.title||K.title;kz(ae,N.firstName,pe,o,R.title);for(const xe of ae)try{console.log("Creating notification for user:",xe),await ne.from("notifications").insert([{user_id:xe._id,content:`You've been assigned to "${pe}" in board "${R.title}"`,type:"CARD_ASSIGNMENT",board_id:R.id,card_id:I,created_at:new Date().toISOString(),read:!1}])}catch(Je){console.error("Error creating notification:",Je)}}}catch(K){console.error("Error updating card:",K),ge.error("Failed to update card")}finally{b(!1)}},he=async I=>{try{b(!0),await YK(I,N.accountId),r(ee=>ee.map(K=>({...K,columns:K.columns.map(J=>({...J,cards:J.cards.filter(ae=>ae.id!==I)}))}))),ge.success("Card deleted successfully")}catch(ee){console.error("Error deleting card:",ee),ge.error("Failed to delete card")}finally{b(!1)}},Me=async I=>{try{await pC(I,{archived:!0},N.accountId),r(ee=>ee.map(K=>({...K,columns:K.columns.map(J=>({...J,cards:J.cards.map(ae=>ae.id===I?{...ae,archived:!0}:ae)}))}))),ge.success("Card archived successfully")}catch(ee){console.error("Error archiving card:",ee),ge.error("Failed to archive card")}},Ue=I=>{const{active:ee}=I,K=t.flatMap(J=>J.columns).flatMap(J=>J.cards).find(J=>J.id===ee.id);K&&c(K)},xr=async I=>{const{active:ee,over:K}=I;if(!K)return;const J=t.flatMap(me=>me.columns).flatMap(me=>me.cards).find(me=>me.id===ee.id),ae=t.flatMap(me=>me.columns).find(me=>me.cards.some(He=>He.id===ee.id)),pe=t.flatMap(me=>me.columns).flatMap(me=>me.cards).find(me=>me.id===K.id),xe=pe?t.flatMap(me=>me.columns).find(me=>me.cards.includes(pe)):t.flatMap(me=>me.columns).find(me=>me.id===K.id);if(!J||!xe)return;const Je=ae.id===xe.id,St=pe?xe.cards.findIndex(me=>me.id===K.id):xe.cards.length;try{r(He=>He.map(pi=>({...pi,columns:pi.columns.map(Yn=>{if(!Je&&Yn.id===ae.id)return{...Yn,cards:Yn.cards.filter(on=>on.id!==ee.id)};if(Yn.id===xe.id){let on;if(Je){const mi=[...Yn.cards],ul=mi.findIndex(zu=>zu.id===ee.id),[dl]=mi.splice(ul,1);mi.splice(St,0,dl),on=mi}else on=[...Yn.cards,{...J,column_id:xe.id}];const Vu=on.map((mi,ul)=>({...mi,position:ul,column_id:xe.id}));return{...Yn,cards:Vu}}return Yn})})));const me=t.flatMap(He=>He.columns).find(He=>He.id===xe.id).cards;Je?await Pg(me,N.accountId):(await XK(J.id,xe.id,St,N.accountId),await Pg(me,N.accountId))}catch(me){console.error("Error moving card:",me),ge.error("Failed to move card")}c(null)};return e?p.jsx("div",{className:"h-[calc(100vh-4rem)] mt-8 border border-design-greyOutlines rounded-3xl bg-gradient-to-br from-primary-light to-white dark:from-design-black dark:to-design-black p-6",children:p.jsxs("div",{className:"mx-auto",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-700 rounded-md animate-pulse"}),p.jsx("div",{className:"h-8 w-32 bg-gray-200 dark:bg-gray-700 rounded-md animate-pulse"})]}),p.jsx(xee,{})]})}):!e&&t.length===0?p.jsx("div",{className:"h-[calc(100vh-4rem)] mt-8 border border-design-greyOutlines rounded-3xl bg-gradient-to-br from-primary-light to-white dark:from-design-black dark:to-design-black p-6",children:p.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[p.jsx("div",{className:"bg-primary-light/30 p-6 rounded-full mb-6",children:p.jsx(L2,{className:"w-16 h-16 text-primary"})}),p.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white mb-3",children:"No Boards Yet"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 text-center max-w-md",children:"Create your first board to start organizing your ideas and tasks in a visual way."}),u?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"text",value:f,onChange:I=>h(I.target.value),placeholder:"Enter board title...",className:"input p-2",autoFocus:!0}),p.jsx("button",{onClick:we,className:"btn-primary",disabled:!f.trim(),children:"Create"}),p.jsx("button",{onClick:()=>{d(!1),h("")},className:"btn-ghost",children:"Cancel"})]}):p.jsxs("button",{onClick:()=>d(!0),className:"btn-primary flex items-center gap-2 px-6 py-3 text-lg animate-bounce",children:[p.jsx(Or,{className:"h-5 w-5"}),"Create Your First Board"]})]})}):p.jsxs("div",{className:"h-[calc(100vh-4rem)] bg-design-white border border-design-greyOutlines rounded-3xl dark:bg-design-black p-6 flex flex-col mt-8",children:[p.jsxs("div",{className:"flex-none mb-4",children:[p.jsxs("div",{className:"flex items-center justify-between border-b border-design-greyOutlines",children:[p.jsx("h1",{className:"text-2xl font-semibold",children:R&&R.title}),p.jsx("div",{className:"flex items-center gap-2",children:u?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"text",value:f,onChange:I=>h(I.target.value),placeholder:"Board title...",className:"input p-2",autoFocus:!0}),p.jsx("button",{onClick:we,className:"btn-primary",children:"Add"}),p.jsx("button",{onClick:()=>{d(!1),h("")},className:"btn-ghost",children:"Cancel"})]}):p.jsx("div",{className:"flex items-center gap-2 m-2",children:p.jsxs("button",{onClick:()=>d(!0),className:"btn-primary group hover:scale-105 transition-transform",children:[p.jsx(Or,{className:"h-4 w-4  group-hover:rotate-90 transition-transform"}),"Add Board"]})})})]}),p.jsxs("div",{className:"flex items-center justify-between gap-4 mt-4",children:[" ",p.jsxs("div",{className:"flex items-center gap-4",children:[" ",p.jsxs("button",{onClick:()=>E(!0),className:`btn-secondary text-sm ${R&&R.created_by===B.id?"":"hidden"}`,children:[p.jsx("span",{className:`h-1.5 w-1.5 mr-2  ${R&&(R.team_id||((Br=R==null?void 0:R.shared_users)==null?void 0:Br.length)>0)?"bg-green-400":"bg-red-400"} rounded-full`}),"Share Board"]}),p.jsx("div",{className:"flex -space-x-3",children:Y.map((I,ee)=>p.jsx(Kt,{text:`${I.firstName} ${I.lastName}`,children:p.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium text-white bg-design-primaryPurple  cursor-pointer border-2 border-white shadow-lg transition-transform hover:scale-110",style:{zIndex:Y.length-ee,backgroundColor:`hsl(${ee*60%360}, 70%, 50%)`},children:`${I.firstName[0]}${I.lastName[0]}`})},I.accountId))})]}),o&&(R==null?void 0:R.created_by)===B.id&&p.jsxs("div",{children:[p.jsx(Kt,{text:"Delete Board",children:p.jsx("button",{onClick:()=>S(!0),className:"btn-ghost p-2 hover:text-semantic-error transition-all",children:p.jsx(Eo,{className:"h-6 w-6"})})}),p.jsx(Kt,{text:"Board Logs",children:p.jsx("button",{onClick:()=>P(!0),className:"btn-ghost p-2 hover:text-semantic-error transition-all",children:p.jsx(ku,{className:"h-6 w-6"})})})]})]})]}),R&&p.jsxs(dK,{sensors:F,onDragStart:Ue,onDragEnd:xr,children:[p.jsxs("div",{className:"flex gap-6 overflow-x-auto flex-1 min-h-0",children:[p.jsx(jj,{items:R.columns.map(I=>I.id),children:R.columns.map(I=>p.jsx(nee,{column:I,onAddCard:()=>ke(I.id),onUpdateCard:vr,onDeleteCard:he,onArchiveCard:Me,onDeleteColumn:()=>kt(I.id),onUpdateColumn:st,boardId:R.id,teamUsers:X,boardTitle:R.title},I.id))}),m?p.jsxs("div",{className:"flex-shrink-0 w-80 bg-primary-light/50 backdrop-blur-sm rounded-lg p-4 snap-start animate-in slide-in-from-right",children:[p.jsx("input",{type:"text",value:x,onChange:I=>v(I.target.value),placeholder:"Column title...",className:"input",autoFocus:!0}),p.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[p.jsx("button",{onClick:Ne,className:"btn-primary",children:"Add"}),p.jsx("button",{onClick:()=>{y(!1),v("")},className:"btn-ghost",children:"Cancel"})]})]}):p.jsxs("button",{onClick:()=>y(!0),className:"flex-shrink-0 w-80 bg-design-greyBG/50 backdrop-blur-sm rounded-2xl p-4 flex items-center justify-center text-primary hover:text-primary-hover hover:bg-primary-light/50 transition-all  snap-start group",children:[p.jsx(Or,{className:"h-5 w-5 mr-2 group-hover:rotate-90 transition-transform"}),"Add Column"]})]}),p.jsx(PK,{children:l?p.jsx(ED,{card:l,isDragging:!0,onUpdate:vr,onDelete:he,onArchive:Me,boardId:R.id,teamUsers:X,boardTitle:R.title}):null})]}),p.jsx(ree,{isOpen:k,onClose:()=>S(!1),onConfirm:Se,boardTitle:(R==null?void 0:R.title)||""}),p.jsx(iee,{isOpen:C,onClose:()=>E(!1),board:R,updateBoardsList:r,teams:A,users:M,currentUser:N}),p.jsx(cee,{isOpen:T,setIsOpen:P,board:R})]})}function wee({children:t}){const{isAuthenticated:e}=gr(),n=wo();return e?p.jsx(p.Fragment,{children:t}):p.jsx(Ff,{to:"/ideation/login",state:{from:n},replace:!0})}function bee(){const t=()=>{window.location.href="https://app.socialhub.io/login/login"};return p.jsx("div",{className:"flex items-center justify-center h-screen bg-cover bg-center",children:p.jsxs("div",{className:"bg-white bg-opacity-90 backdrop-blur-sm p-8 rounded-2xl shadow-lg text-center w-96",children:[p.jsx("p",{className:"mb-6 text-lg font-semibold text-gray-700",children:"Dear User, your session has expired. Please log in to SocialHub and revisit the Ideation Board."}),p.jsxs("button",{onClick:t,className:"flex items-center justify-center w-full btn-primary",children:[p.jsx($2,{className:"h-4 w-4 mr-2"}),p.jsx("span",{children:"Social Hub"})]})]})})}const kee={high:"bg-semantic-error",medium:"bg-semantic-warning",low:"bg-semantic-success"},See=({date:t,tasks:e,currentMonth:n,onTaskClick:r})=>{const i=rj(t,n),s=Aw(t),o=e.filter(l=>{if(!l.due_date)return!1;const c=typeof l.due_date=="string"?uc(l.due_date):l.due_date;return Qp(c,t)}),a=o.length>0;return p.jsxs(U.div,{whileHover:a?{scale:1.05,zIndex:10}:{},className:`
        relative p-2 min-h-[60px] rounded-lg transition-all duration-300 group
        ${i?"":"opacity-30"}
        ${s?"ring-2 ring-design-primaryPurple ring-offset-2":""}
        ${a?"bg-design-lightPurpleButtonFill cursor-pointer":"hover:bg-design-greyBG/50"}
      `,children:[p.jsx("span",{className:`
        text-sm font-medium block mb-1
        ${s?"text-design-primaryPurple":"text-design-primaryGrey"}
      `,children:ar(t,"d")}),a&&p.jsxs("div",{className:"flex gap-1 flex-wrap",children:[o.slice(0,2).map(l=>p.jsx("div",{className:`w-2 h-2 rounded-full ${kee[l.priority]}`},l.id)),o.length>2&&p.jsxs("div",{className:"w-2 h-2 rounded-full bg-design-primaryGrey text-[8px] flex items-center justify-center",children:["+",o.length-2]})]}),a&&p.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-0 translate-y-2 w-48 z-50 opacity-0 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto",children:p.jsx(ct,{children:p.jsx(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2},className:"bg-white rounded-lg shadow-lg border border-design-greyOutlines p-2 relative",style:{backdropFilter:"blur(8px)",backgroundColor:"rgba(255, 255, 255, 0.95)"},children:p.jsx("div",{className:"space-y-2",children:o.map(l=>p.jsxs(U.div,{whileHover:{x:5},onClick:()=>r(l),className:"flex items-center justify-between p-2 rounded-lg hover:bg-design-lightPurpleButtonFill cursor-pointer",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-sm font-medium text-design-black truncate",children:l.title}),p.jsx("p",{className:`text-xs ${l.priority==="high"?"text-semantic-error":l.priority==="medium"?"text-semantic-warning":"text-semantic-success"}`,children:l.priority})]}),p.jsx(Px,{className:"h-4 w-4 text-design-primaryPurple flex-shrink-0"})]},l.id))})})})})]})};function Cee({tasks:t,onTaskClick:e}){const[n,r]=g.useState(new Date),[i,s]=g.useState(!1),a=(d=>{const f=$a(H0(d)),h=OW(lh(d));return ZO({start:f,end:h})})(n),c=t.filter(d=>{if(!d.due_date)return!1;const f=typeof d.due_date=="string"?uc(d.due_date):d.due_date;return j7(f,{start:H0(n),end:lh(n)})}),u=async d=>{s(!0);const f=d==="next"?cc(n,1):sj(n,1);r(f),s(!1)};return p.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-design-greyOutlines",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Mp,{className:"h-5 w-5 text-design-primaryPurple"}),p.jsx("h2",{className:"text-lg font-semibold text-design-black",children:"Task Calendar"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(U.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u("prev"),className:"p-1 rounded-lg hover:bg-design-greyBG transition-colors",disabled:i,children:p.jsx(jx,{className:"h-5 w-5 text-design-primaryGrey"})}),p.jsx("span",{className:"text-sm font-medium text-design-black min-w-[100px] text-center",children:ar(n,"MMMM yyyy")}),p.jsx(U.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u("next"),className:"p-1 rounded-lg hover:bg-design-greyBG transition-colors",disabled:i,children:p.jsx(Ax,{className:"h-5 w-5 text-design-primaryGrey"})})]})]}),p.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(d=>p.jsx("div",{className:"text-center text-sm font-medium text-design-primaryGrey p-2",children:d},d)),a.map((d,f)=>p.jsx(See,{date:d,tasks:c,currentMonth:n,onTaskClick:e},d.toISOString()))]})]})}const sy={high:{color:"text-semantic-error",bg:"bg-semantic-error-light",icon:Pa},medium:{color:"text-semantic-warning",bg:"bg-semantic-warning-light",icon:ku},low:{color:"text-semantic-success",bg:"bg-semantic-success-light",icon:bu}},Eee=({task:t})=>{var i,s,o;const e=$r(),n=((i=sy[t.priority])==null?void 0:i.icon)||ku,r=a=>{if(!a)return null;const l=new Date(a);return Aw(l)?"Today":O7(l)?"Tomorrow":ar(l,"MMM dd")};return p.jsx(U.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},whileHover:{scale:1.02},onClick:()=>e(`/ideation/${t.boardId}`),className:"bg-white rounded-xl border border-design-greyOutlines p-3.5 hover:shadow-md transition-all cursor-pointer group",children:p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx(U.button,{whileHover:{scale:1.2},whileTap:{scale:.9},className:"mt-1",children:t.completed?p.jsx(bu,{className:"h-5 w-5 text-semantic-success"}):p.jsx(x4,{className:"h-5 w-5 text-design-primaryGrey group-hover:text-design-primaryPurple"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-start justify-between gap-4",children:[p.jsx("h3",{className:`font-medium text-design-black truncate ${t.completed?"line-through text-design-primaryGrey":""}`,children:t.title}),p.jsx(Px,{className:"h-5 w-5 text-design-primaryGrey opacity-0 group-hover:opacity-100 transition-opacity"})]}),p.jsxs("div",{className:"mt-2 flex items-center gap-3 flex-wrap",children:[p.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${(s=sy[t.priority])==null?void 0:s.color} ${(o=sy[t.priority])==null?void 0:o.bg}`,children:[p.jsx(n,{className:"h-3 w-3"}),t.priority]}),t.due_date&&p.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-design-primaryGrey",children:[p.jsx(Mp,{className:"h-3 w-3"}),r(t.due_date)]}),t.labels&&t.labels.length>0&&p.jsxs("div",{className:"flex items-center gap-1",children:[t.labels.slice(0,2).map((a,l)=>p.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-design-lightPurpleButtonFill text-design-primaryPurple",children:a.text},l)),t.labels.length>2&&p.jsxs("span",{className:"text-xs text-design-primaryGrey",children:["+",t.labels.length-2]})]}),p.jsx("span",{className:"text-xs text-design-primaryGrey ml-auto",children:t.boardTitle})]})]})]})})};function Tee({tasks:t,onStatusChange:e}){const n=[...t].sort((i,s)=>{if(i.due_date&&s.due_date)return new Date(i.due_date)-new Date(s.due_date);if(i.due_date)return-1;if(s.due_date)return 1;const o={high:0,medium:1,low:2};return o[i.priority]-o[s.priority]}),r=n.slice(0,4);return p.jsxs("div",{className:"space-y-4 bg-white p-6 rounded-2xl border border-design-greyOutlines h-[calc(100%-0.5rem)]",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-lg font-semibold text-design-black",children:"My Tasks"}),p.jsxs("span",{className:"text-sm text-design-primaryGrey",children:["Showing ",Math.min(4,n.length)," of ",n.length," ","tasks"]})]}),p.jsx(ct,{mode:"popLayout",children:n.length===0?p.jsxs(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-8 text-design-primaryGrey",children:[p.jsx(bu,{className:"h-12 w-12 mx-auto mb-3 text-design-primaryPurple opacity-50"}),p.jsx("p",{className:"text-sm",children:"No tasks assigned to you"})]}):p.jsx("div",{className:"space-y-3",children:r.map(i=>p.jsx(Eee,{task:i,onStatusChange:e},i.id))})})]})}const oy=({icon:t,title:e,value:n,color:r})=>p.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden bg-white p-6 rounded-2xl border border-design-greyOutlines shadow-sm transition-all",children:[p.jsx("div",{className:`absolute inset-0 opacity-15 ${{total:"bg-gradient-to-r from-blue-600 via-sky-400 to-cyan-500",completed:"bg-gradient-to-r from-green-500 via-emerald-400 to-teal-500",tasks:"bg-gradient-to-r from-violet-600 via-purple-500 to-fuchsia-500"}[r]}`}),p.jsxs("div",{className:"relative flex items-center gap-4",children:[p.jsx("div",{className:`p-3 rounded-xl ${{total:"bg-blue-600/10",completed:"bg-green-500/10",tasks:"bg-violet-600/10"}[r]}`,children:p.jsx(t,{className:`h-6 w-6 ${{total:"text-blue-600",completed:"text-green-500",tasks:"text-violet-600"}[r]}`})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-design-primaryGrey",children:e}),p.jsx("p",{className:"text-2xl font-bold text-design-black mt-1",children:n})]})]})]}),$E=t=>{if(!t)return"N/A";try{return ar(new Date(t),"MMM dd, yyyy")}catch{return"Invalid date"}},Nee=({boards:t,teams:e,onBoardClick:n})=>p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"border-b border-design-greyOutlines",children:[p.jsx("th",{className:"text-left p-3 text-sm font-medium text-design-primaryGrey",children:"Board Name"}),p.jsx("th",{className:"text-left p-3 text-sm font-medium text-design-primaryGrey",children:"Team"}),p.jsx("th",{className:"text-left p-3 text-sm font-medium text-design-primaryGrey",children:"Total Cards"}),p.jsx("th",{className:"text-left p-3 text-sm font-medium text-design-primaryGrey",children:"Completed"}),p.jsx("th",{className:"text-left p-3 text-sm font-medium text-design-primaryGrey",children:"Created At"}),p.jsx("th",{className:"text-left p-3 text-sm font-medium text-design-primaryGrey",children:"Last Updated"}),p.jsx("th",{className:"text-left p-3 text-sm font-medium text-design-primaryGrey"})]})}),p.jsx("tbody",{children:t.map(r=>{var a,l;const i=e.find(c=>c._id===r.team_id),s=(a=r.columns)==null?void 0:a.reduce((c,u)=>{var d;return c+(((d=u.cards)==null?void 0:d.length)||0)},0),o=(l=r.columns)==null?void 0:l.reduce((c,u)=>{var d,f;return c+(((f=(d=u.cards)==null?void 0:d.filter(h=>h.completed))==null?void 0:f.length)||0)},0);return p.jsxs(U.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},whileHover:{backgroundColor:"rgba(124, 58, 237, 0.05)"},onClick:()=>n(r.id),className:"border-b border-design-greyOutlines cursor-pointer",children:[p.jsx("td",{className:"p-3",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"p-2 rounded-lg bg-design-lightPurpleButtonFill",children:p.jsx(Wf,{className:"h-5 w-5 text-design-primaryPurple"})}),p.jsx("span",{className:"font-medium text-design-black",children:r.title})]})}),p.jsx("td",{className:"p-3",children:p.jsxs("span",{className:"text-sm text-design-primaryGrey flex items-center gap-1",children:[p.jsx(Oa,{className:"h-4 w-4"}),(i==null?void 0:i.name)||"Personal"]})}),p.jsx("td",{className:"p-3",children:p.jsx("span",{className:"text-sm text-design-primaryGrey",children:s})}),p.jsx("td",{className:"p-3",children:p.jsxs("span",{className:"text-sm text-design-primaryGrey",children:[o,"/",s]})}),p.jsx("td",{className:"p-3",children:p.jsx("span",{className:"text-sm text-design-primaryGrey",children:$E(r.created_at)})}),p.jsx("td",{className:"p-3",children:p.jsx("span",{className:"text-sm text-design-primaryGrey",children:$E(r.updated_at)})}),p.jsx("td",{className:"p-3 text-right",children:p.jsx(Px,{className:"h-5 w-5 text-design-primaryGrey inline-block"})})]},r.id)})})]})}),Mee=({boards:t,selectedBoard:e,onBoardSelect:n})=>{const[r,i]=g.useState(!1);return p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>i(!r),className:"flex items-center gap-2 px-4 py-2 rounded-xl border border-design-greyOutlines hover:border-design-primaryPurple/30 transition-all",children:[p.jsx(Wf,{className:"h-5 w-5 text-design-primaryPurple"}),p.jsx("span",{className:"font-medium text-design-black",children:e?e.title:"All Boards"}),p.jsx(Co,{className:"h-4 w-4 text-design-primaryGrey"})]}),r&&p.jsx("div",{className:"absolute top-full right-0 mt-2 w-64 bg-white rounded-xl border border-design-greyOutlines shadow-lg z-50",children:p.jsxs("div",{className:"p-2",children:[p.jsx("div",{className:"p-2 rounded-lg cursor-pointer hover:bg-design-lightPurpleButtonFill",onClick:()=>{n(null),i(!1)},children:"All Boards"}),t.map(s=>p.jsx("div",{className:"p-2 rounded-lg cursor-pointer hover:bg-design-lightPurpleButtonFill",onClick:()=>{n(s),i(!1)},children:s.title},s.id))]})})]})};function Pee(){const{boardsList:t,loadInitialBoards:e,isLoading:n,updateCard:r}=_p(),{currentUser:i,currentUserTeams:s}=gr(),[o,a]=g.useState(null),[l,c]=g.useState({totalTasks:0,completedTasks:0,myTasks:[]});g.useState([]);const u=$r();g.useEffect(()=>{(!n||t.length===0)&&e()},[]),g.useEffect(()=>{let y=0,x=0,v=[];(o?[o]:t).forEach(b=>{var k;(k=b.columns)==null||k.forEach(S=>{var C;(C=S.cards)==null||C.forEach(E=>{var T;y++,E.completed&&x++,(T=E.assignee)!=null&&T.some(P=>P._id===i.userId)&&v.push({...E,boardId:b.id,boardTitle:b.title})})})}),c({totalTasks:y,completedTasks:x,myTasks:v})},[t,i,o]);const d=y=>{u(`/ideation/${y}`)},h=(()=>{const y=new Date().getHours();return y>=5&&y<12?{text:"Good Morning",icon:H4,className:"text-amber-500"}:y>=12&&y<17?{text:"Good Afternoon",icon:U4,className:"text-yellow-500"}:y>=17&&y<20?{text:"Good Evening",icon:W4,className:"text-orange-500"}:{text:"Good Night",icon:L4,className:"text-indigo-500"}})(),m=h.icon;return n?p.jsxs("div",{className:"p-8 space-y-8 animate-in fade-in-50",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),p.jsx("div",{className:"h-9 w-64 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"})]}),p.jsx("div",{className:"h-10 w-40 bg-gray-200 dark:bg-gray-700 rounded-xl animate-pulse"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(y=>p.jsx("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 animate-pulse",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"h-12 w-12 rounded-xl bg-gray-200 dark:bg-gray-700"}),p.jsxs("div",{className:"space-y-2 flex-1",children:[p.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-700 rounded"}),p.jsx("div",{className:"h-7 w-16 bg-gray-200 dark:bg-gray-700 rounded"})]})]})},y))}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("div",{className:"h-5 w-32 bg-gray-200 dark:bg-gray-700 rounded"}),p.jsx("div",{className:"h-5 w-24 bg-gray-200 dark:bg-gray-700 rounded"})]}),p.jsx("div",{className:"grid grid-cols-7 gap-2",children:[...Array(35)].map((y,x)=>p.jsx("div",{className:"h-16 rounded-lg bg-gray-100 dark:bg-gray-800 p-2",children:p.jsx("div",{className:"h-4 w-4 bg-gray-200 dark:bg-gray-700 rounded"})},x))})]}),p.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100",children:[p.jsx("div",{className:"h-6 w-32 bg-gray-200 dark:bg-gray-700 rounded mb-6"}),p.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(y=>p.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-gray-50 dark:bg-gray-800",children:[p.jsx("div",{className:"h-4 w-4 rounded-full bg-gray-200 dark:bg-gray-700"}),p.jsxs("div",{className:"space-y-2 flex-1",children:[p.jsx("div",{className:"h-4 w-3/4 bg-gray-200 dark:bg-gray-700 rounded"}),p.jsx("div",{className:"h-3 w-1/4 bg-gray-200 dark:bg-gray-700 rounded"})]})]},y))})]})]}),p.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"h-5 w-5 bg-gray-200 dark:bg-gray-700 rounded"}),p.jsx("div",{className:"h-5 w-32 bg-gray-200 dark:bg-gray-700 rounded"})]}),p.jsx("div",{className:"h-5 w-20 bg-gray-200 dark:bg-gray-700 rounded"})]}),p.jsx("div",{className:"space-y-4",children:[1,2,3].map(y=>p.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-100",children:[p.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[p.jsx("div",{className:"h-10 w-10 rounded-lg bg-gray-200 dark:bg-gray-700"}),p.jsx("div",{className:"h-5 w-40 bg-gray-200 dark:bg-gray-700 rounded"})]}),p.jsxs("div",{className:"flex items-center gap-8",children:[p.jsx("div",{className:"h-5 w-20 bg-gray-200 dark:bg-gray-700 rounded"}),p.jsx("div",{className:"h-5 w-20 bg-gray-200 dark:bg-gray-700 rounded"}),p.jsx("div",{className:"h-5 w-24 bg-gray-200 dark:bg-gray-700 rounded"}),p.jsx("div",{className:"h-5 w-24 bg-gray-200 dark:bg-gray-700 rounded"})]})]},y))})]})]}):p.jsxs("div",{className:"p-8 space-y-8 animate-in fade-in-50",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(m,{className:`h-8 w-8 ${h.className}`}),p.jsxs("h1",{className:"text-3xl font-bold text-design-black",children:[h.text,", ",i.firstName]})]}),p.jsx(Mee,{boards:t,selectedBoard:o,onBoardSelect:a})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsx(oy,{icon:L2,title:"Total Tasks",value:l.totalTasks,color:"total"}),p.jsx(oy,{icon:bu,title:"Completed Tasks",value:l.completedTasks,color:"completed"}),p.jsx(oy,{icon:Wf,title:"My Tasks",value:l.myTasks.length,color:"tasks"})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsx(Cee,{tasks:l.myTasks,onTaskClick:y=>{y.boardId&&u(`/ideation/${y.boardId}`)}}),p.jsx(Tee,{tasks:l.myTasks})]}),!o&&p.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-2xl border border-design-greyOutlines w-full",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Wf,{className:"h-5 w-5 text-design-primaryPurple"}),p.jsx("h2",{className:"text-lg font-semibold text-design-black",children:"My Boards"})]}),p.jsxs("span",{className:"text-sm text-design-primaryGrey",children:[t.length," ",t.length===1?"Board":"Boards"]})]}),p.jsx(Nee,{boards:t,teams:s,onBoardClick:d})]})]})}const FE=["Organizing your ideas...","Bringing collaboration to life...","Turning thoughts into action...","Streamlining your workflow...","Managing tasks efficiently...","Your productivity, our priority..."];function TD(){const[t,e]=g.useState(0);return g.useEffect(()=>{const n=setInterval(()=>{e(r=>r===FE.length-1?0:r+1)},3e3);return()=>clearInterval(n)},[]),p.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-design-lightPurpleButtonFill to-white dark:from-design-black dark:to-design-black/70 z-50",children:p.jsxs("div",{className:"relative w-full h-full",children:[p.jsx("div",{className:"absolute inset-0 opacity-5",children:p.jsx("div",{className:"absolute top-0 left-0 w-full h-full",children:Array.from({length:20}).map((n,r)=>p.jsx("div",{className:"absolute bg-design-primaryPurple rounded-full",style:{width:`${Math.random()*300+50}px`,height:`${Math.random()*300+50}px`,top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,opacity:Math.random()*.1,filter:"blur(50px)",transform:"translate(-50%, -50%)",animation:`float ${Math.random()*10+10}s ease-in-out infinite`,animationDelay:`${Math.random()*5}s`}},r))})}),p.jsx(U.div,{className:"absolute inset-0 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:p.jsxs("div",{className:"bg-white dark:bg-design-black/80 rounded-2xl shadow-2xl p-10 max-w-md w-full backdrop-blur-lg border border-design-greyOutlines dark:border-design-greyOutlines/20",children:[p.jsx("div",{className:"flex justify-center mb-8",children:p.jsxs("div",{className:"relative",children:[p.jsxs(U.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,delay:.2},className:"text-3xl font-bold text-design-primaryPurple text-center flex items-center",children:["Social",p.jsx("span",{className:"text-design-black dark:text-white",children:"Hub"}),p.jsx("img",{src:"/SocialHub.png",alt:"",className:"h-12 w-12 mx-auto ml-2"})]}),p.jsx(U.div,{initial:{width:0},animate:{width:"100%"},transition:{duration:1,delay:.8},className:"h-0.5 bg-design-primaryPurple mt-1"})]})}),p.jsx(U.h1,{className:"text-3xl md:text-4xl font-bold text-design-black dark:text-white text-center mb-8",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.5},children:"Ideation Board"}),p.jsx("div",{className:"h-8 relative overflow-hidden",children:FE.map((n,r)=>p.jsx(U.div,{className:"absolute inset-0 flex justify-center items-center text-lg text-design-primaryGrey dark:text-design-greyOutlines text-center",initial:{opacity:0,y:20},animate:{opacity:t===r?1:0,y:t===r?0:20},transition:{duration:.5},children:n},r))}),p.jsx("div",{className:"mt-12",children:p.jsx("div",{className:"relative h-1 w-full bg-design-greyBG dark:bg-design-black rounded-full overflow-hidden",children:p.jsx(U.div,{className:"absolute top-0 left-0 h-full bg-design-primaryPurple",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:3,repeat:1/0,ease:"linear"}})})}),p.jsx("div",{className:"flex justify-center mt-8 gap-2",children:[0,1,2].map(n=>p.jsx(U.div,{className:"w-2 h-2 rounded-full bg-design-primaryPurple",animate:{opacity:[.3,1,.3],scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0,delay:n*.2}},n))})]})})]})})}const ay=({children:t})=>p.jsx(wee,{children:p.jsx(X7,{children:t})}),Oee=()=>{const{isAuthenticated:t,isLoading:e}=gr(),n=!0;return e?p.jsx(TD,{}):t?p.jsx(Ff,{to:"/home",replace:!0}):n?p.jsx(Q7,{}):p.jsx(bee,{})},jee=()=>{const{isAuthenticated:t,isLoading:e}=gr();return e?p.jsx(TD,{}):t?p.jsxs(a2,{children:[p.jsx(Bs,{path:"/",element:p.jsx(Ff,{to:"/home",replace:!0})}),p.jsx(Bs,{path:"/ideation",element:p.jsx(ay,{children:p.jsx(LE,{})})}),p.jsx(Bs,{path:"/ideation/:boardId",element:p.jsx(ay,{children:p.jsx(LE,{})})}),p.jsx(Bs,{path:"/home",element:p.jsx(ay,{children:p.jsx(Pee,{})})})," "]}):p.jsx(Ff,{to:"/ideation/login",replace:!0})};function Aee(){return p.jsx(c4,{children:p.jsx(Az,{children:p.jsx(Dz,{children:p.jsxs(nL,{children:[p.jsxs(a2,{children:[p.jsx(Bs,{path:"/ideation/login",element:p.jsx(Oee,{})}),p.jsx(Bs,{path:"/*",element:p.jsx(jee,{})})]}),p.jsx(ZL,{position:"top-right"})]})})})})}const ND=document.getElementById("root");if(!ND)throw new Error("Failed to find the root element");QN(ND).render(p.jsx(Aee,{}));export{Ev as g};
